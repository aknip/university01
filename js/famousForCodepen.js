if(!Function.prototype.bind){Function.prototype.bind=function(a){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var e=Array.prototype.slice.call(arguments,1),d=this,b=function(){},c=function(){return d.apply(this instanceof b&&a?this:a,e.concat(Array.prototype.slice.call(arguments)))};b.prototype=this.prototype;c.prototype=new b();return c}}
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/
;if(typeof document!=="undefined"&&!("classList" in document.createElement("a"))){(function(j){var a="classList",f="prototype",m=(j.HTMLElement||j.Element)[f],b=Object,k=String[f].trim||function(){return this.replace(/^\s+|\s+$/g,"")},c=Array[f].indexOf||function(q){var p=0,o=this.length;for(;p<o;p++){if(p in this&&this[p]===q){return p}}return -1},n=function(o,p){this.name=o;this.code=DOMException[o];this.message=p},g=function(p,o){if(o===""){throw new n("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(o)){throw new n("INVALID_CHARACTER_ERR","String contains an invalid character")}return c.call(p,o)},d=function(s){var r=k.call(s.className),q=r?r.split(/\s+/):[],p=0,o=q.length;for(;p<o;p++){this.push(q[p])}this._updateClassName=function(){s.className=this.toString()}},e=d[f]=[],i=function(){return new d(this)};n[f]=Error[f];e.item=function(o){return this[o]||null};e.contains=function(o){o+="";return g(this,o)!==-1};e.add=function(o){o+="";if(g(this,o)===-1){this.push(o);this._updateClassName()}};e.remove=function(p){p+="";var o=g(this,p);if(o!==-1){this.splice(o,1);this._updateClassName()}};e.toggle=function(o){o+="";if(g(this,o)===-1){this.add(o)}else{this.remove(o)}};e.toString=function(){return this.join(" ")};if(b.defineProperty){var l={get:i,enumerable:true,configurable:true};try{b.defineProperty(m,a,l)}catch(h){if(h.number===-2146823252){l.enumerable=false;b.defineProperty(m,a,l)}}}else{if(b[f].__defineGetter__){m.__defineGetter__(a,i)}}}(self))}window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,a){return window.setTimeout(function(){b(+new Date())},1000/60)});var requirejs,require,define;(function(ca){function G(b){return"[object Function]"===M.call(b)}function H(b){return"[object Array]"===M.call(b)}function v(b,c){if(b){var d;for(d=0;d<b.length&&(!b[d]||!c(b[d],d,b));d+=1){}}}function U(b,c){if(b){var d;for(d=b.length-1;-1<d&&(!b[d]||!c(b[d],d,b));d-=1){}}}function s(b,c){return ga.call(b,c)}function j(b,c){return s(b,c)&&b[c]}function B(b,c){for(var d in b){if(s(b,d)&&c(b[d],d)){break}}}function V(b,c,d,g){c&&B(c,function(c,h){if(d||!s(b,h)){g&&"object"===typeof c&&c&&!H(c)&&!G(c)&&!(c instanceof RegExp)?(b[h]||(b[h]={}),V(b[h],c,d,g)):b[h]=c}});return b}function t(b,c){return function(){return c.apply(b,arguments)}}function da(b){throw b}function ea(b){if(!b){return b}var c=ca;v(b.split("."),function(b){c=c[b]});return c}function C(b,c,d,g){c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+b);c.requireType=b;c.requireModules=g;d&&(c.originalError=d);return c}function ha(b){function c(a,e,b){var f,n,c,d,g,h,i,I=e&&e.split("/");n=I;var m=l.map,k=m&&m["*"];if(a&&"."===a.charAt(0)){if(e){n=I.slice(0,I.length-1);a=a.split("/");e=a.length-1;l.nodeIdCompat&&R.test(a[e])&&(a[e]=a[e].replace(R,""));n=a=n.concat(a);d=n.length;for(e=0;e<d;e++){if(c=n[e],"."===c){n.splice(e,1),e-=1}else{if(".."===c){if(1===e&&(".."===n[2]||".."===n[0])){break}else{0<e&&(n.splice(e-1,2),e-=2)}}}}a=a.join("/")}else{0===a.indexOf("./")&&(a=a.substring(2))}}if(b&&m&&(I||k)){n=a.split("/");e=n.length;a:for(;0<e;e-=1){d=n.slice(0,e).join("/");if(I){for(c=I.length;0<c;c-=1){if(b=j(m,I.slice(0,c).join("/"))){if(b=j(b,d)){f=b;g=e;break a}}}}!h&&(k&&j(k,d))&&(h=j(k,d),i=e)}!f&&h&&(f=h,g=i);f&&(n.splice(0,g,f),a=n.join("/"))}return(f=j(l.pkgs,a))?f:a}function d(a){z&&v(document.getElementsByTagName("script"),function(e){if(e.getAttribute("data-requiremodule")===a&&e.getAttribute("data-requirecontext")===i.contextName){return e.parentNode.removeChild(e),!0}})}function g(a){var e=j(l.paths,a);if(e&&H(e)&&1<e.length){return e.shift(),i.require.undef(a),i.require([a]),!0}}function u(a){var e,b=a?a.indexOf("!"):-1;-1<b&&(e=a.substring(0,b),a=a.substring(b+1,a.length));return[e,a]}function m(a,e,b,f){var n,d,g=null,h=e?e.name:null,l=a,m=!0,k="";a||(m=!1,a="_@r"+(M+=1));a=u(a);g=a[0];a=a[1];g&&(g=c(g,h,f),d=j(p,g));a&&(g?k=d&&d.normalize?d.normalize(a,function(a){return c(a,h,f)}):c(a,h,f):(k=c(a,h,f),a=u(k),g=a[0],k=a[1],b=!0,n=i.nameToUrl(k)));b=g&&!d&&!b?"_unnormalized"+(Q+=1):"";return{prefix:g,name:k,parentMap:e,unnormalized:!!b,url:n,originalName:l,isDefine:m,id:(g?g+"!"+k:k)+b}}function q(a){var e=a.id,b=j(k,e);b||(b=k[e]=new i.Module(a));return b}function r(a,e,b){var f=a.id,n=j(k,f);if(s(p,f)&&(!n||n.defineEmitComplete)){"defined"===e&&b(p[f])}else{if(n=q(a),n.error&&"error"===e){b(n.error)}else{n.on(e,b)}}}function w(a,e){var b=a.requireModules,f=!1;if(e){e(a)}else{if(v(b,function(e){if(e=j(k,e)){e.error=a,e.events.error&&(f=!0,e.emit("error",a))}}),!f){h.onError(a)}}}function x(){S.length&&(ia.apply(A,[A.length,0].concat(S)),S=[])}function y(a){delete k[a];delete W[a]}function F(a,e,b){var f=a.map.id;a.error?a.emit("error",a.error):(e[f]=!0,v(a.depMaps,function(f,c){var d=f.id,g=j(k,d);g&&(!a.depMatched[c]&&!b[d])&&(j(e,d)?(a.defineDep(c,p[d]),a.check()):F(g,e,b))}),b[f]=!0)}function D(){var a,e,b=(a=1000*l.waitSeconds)&&i.startTime+a<(new Date).getTime(),f=[],c=[],h=!1,k=!0;if(!X){X=!0;B(W,function(a){var i=a.map,m=i.id;if(a.enabled&&(i.isDefine||c.push(a),!a.error)){if(!a.inited&&b){g(m)?h=e=!0:(f.push(m),d(m))}else{if(!a.inited&&(a.fetched&&i.isDefine)&&(h=!0,!i.prefix)){return k=!1}}}});if(b&&f.length){return a=C("timeout","Load timeout for modules: "+f,null,f),a.contextName=i.contextName,w(a)}k&&v(c,function(a){F(a,{},{})});if((!b||e)&&h){if((z||fa)&&!Y){Y=setTimeout(function(){Y=0;D()},50)}}X=!1}}function E(a){s(p,a[0])||q(m(a[0],null,!0)).init(a[1],a[2])}function K(a){var a=a.currentTarget||a.srcElement,e=i.onScriptLoad;a.detachEvent&&!Z?a.detachEvent("onreadystatechange",e):a.removeEventListener("load",e,!1);e=i.onScriptError;(!a.detachEvent||Z)&&a.removeEventListener("error",e,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}function L(){var a;for(x();A.length;){a=A.shift();if(null===a[0]){return w(C("mismatch","Mismatched anonymous define() module: "+a[a.length-1]))}E(a)}}var X,$,i,N,Y,l={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},k={},W={},aa={},A=[],p={},T={},ba={},M=1,Q=1;N={require:function(a){return a.require?a.require:a.require=i.makeRequire(a.map)},exports:function(a){a.usingExports=!0;if(a.map.isDefine){return a.exports?p[a.map.id]=a.exports:a.exports=p[a.map.id]={}}},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return j(l.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}};$=function(a){this.events=j(aa,a.id)||{};this.map=a;this.shim=j(l.shim,a.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};$.prototype={init:function(a,e,b,f){f=f||{};if(!this.inited){this.factory=e;if(b){this.on("error",b)}else{this.events.error&&(b=t(this,function(a){this.emit("error",a)}))}this.depMaps=a&&a.slice(0);this.errback=b;this.inited=!0;this.ignore=f.ignore;f.enabled||this.enabled?this.enable():this.check()}},defineDep:function(a,e){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=e)},fetch:function(){if(!this.fetched){this.fetched=!0;i.startTime=(new Date).getTime();var a=this.map;if(this.shim){i.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],t(this,function(){return a.prefix?this.callPlugin():this.load()}))}else{return a.prefix?this.callPlugin():this.load()}}},load:function(){var a=this.map.url;T[a]||(T[a]=!0,i.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,e,b=this.map.id;e=this.depExports;var f=this.exports,c=this.factory;if(this.inited){if(this.error){this.emit("error",this.error)}else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(G(c)){if(this.events.error&&this.map.isDefine||h.onError!==da){try{f=i.execCb(b,c,e,f)}catch(d){a=d}}else{f=i.execCb(b,c,e,f)}this.map.isDefine&&void 0===f&&((e=this.module)?f=e.exports:this.usingExports&&(f=this.exports));if(a){return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",w(this.error=a)}}else{f=c}this.exports=f;if(this.map.isDefine&&!this.ignore&&(p[b]=f,h.onResourceLoad)){h.onResourceLoad(i,this.map,this.depMaps)}y(b);this.defined=!0}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}}else{this.fetch()}}},callPlugin:function(){var a=this.map,b=a.id,d=m(a.prefix);this.depMaps.push(d);r(d,"defined",t(this,function(f){var d,g;g=j(ba,this.map.id);var J=this.map.name,u=this.map.parentMap?this.map.parentMap.name:null,p=i.makeRequire(a.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(f.normalize&&(J=f.normalize(J,function(a){return c(a,u,!0)})||""),f=m(a.prefix+"!"+J,this.map.parentMap),r(f,"defined",t(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),g=j(k,f.id)){this.depMaps.push(f);if(this.events.error){g.on("error",t(this,function(a){this.emit("error",a)}))}g.enable()}}else{g?(this.map.url=i.nameToUrl(g),this.load()):(d=t(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),d.error=t(this,function(a){this.inited=!0;this.error=a;a.requireModules=[b];B(k,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&y(a.map.id)});w(a)}),d.fromText=t(this,function(f,c){var g=a.name,J=m(g),k=O;c&&(f=c);k&&(O=!1);q(J);s(l.config,b)&&(l.config[g]=l.config[b]);try{h.exec(f)}catch(j){return w(C("fromtexteval","fromText eval for "+b+" failed: "+j,j,[b]))}k&&(O=!0);this.depMaps.push(J);i.completeLoad(g);p([g],d)}),f.load(a.name,p,d,l))}}));i.enable(d,this);this.pluginMaps[d.id]=d},enable:function(){W[this.map.id]=this;this.enabling=this.enabled=!0;v(this.depMaps,t(this,function(a,b){var c,f;if("string"===typeof a){a=m(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[b]=a;if(c=j(N,a.id)){this.depExports[b]=c(this);return}this.depCount+=1;r(a,"defined",t(this,function(a){this.defineDep(b,a);this.check()}));this.errback&&r(a,"error",t(this,this.errback))}c=a.id;f=k[c];!s(N,c)&&(f&&!f.enabled)&&i.enable(a,this)}));B(this.pluginMaps,t(this,function(a){var b=j(k,a.id);b&&!b.enabled&&i.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){v(this.events[a],function(a){a(b)});"error"===a&&delete this.events[a]}};i={config:l,contextName:b,registry:k,defined:p,urlFetched:T,defQueue:A,Module:$,makeModuleMap:m,nextTick:h.nextTick,onError:w,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=l.shim,c={paths:!0,bundles:!0,config:!0,map:!0};B(a,function(a,b){c[b]?(l[b]||(l[b]={}),V(l[b],a,!0,!0)):l[b]=a});a.bundles&&B(a.bundles,function(a,b){v(a,function(a){a!==b&&(ba[a]=b)})});a.shim&&(B(a.shim,function(a,c){H(a)&&(a={deps:a});if((a.exports||a.init)&&!a.exportsFn){a.exportsFn=i.makeShimExports(a)}b[c]=a}),l.shim=b);a.packages&&v(a.packages,function(a){var b,a="string"===typeof a?{name:a}:a;b=a.name;a.location&&(l.paths[b]=a.location);l.pkgs[b]=a.name+"/"+(a.main||"main").replace(ja,"").replace(R,"")});B(k,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=m(b))});if(a.deps||a.callback){i.require(a.deps||[],a.callback)}},makeShimExports:function(a){return function(){var b;a.init&&(b=a.init.apply(ca,arguments));return b||a.exports&&ea(a.exports)}},makeRequire:function(a,e){function g(f,c,d){var j,l;e.enableBuildCallback&&(c&&G(c))&&(c.__requireJsBuild=!0);if("string"===typeof f){if(G(c)){return w(C("requireargs","Invalid require call"),d)}if(a&&s(N,f)){return N[f](k[a.id])}if(h.get){return h.get(i,f,a,g)}j=m(f,a,!1,!0);j=j.id;return !s(p,j)?w(C("notloaded",'Module name "'+j+'" has not been loaded yet for context: '+b+(a?"":". Use require([])"))):p[j]}L();i.nextTick(function(){L();l=q(m(null,a));l.skipMap=e.skipMap;l.init(f,c,d,{enabled:!0});D()});return g}e=e||{};V(g,{isBrowser:z,toUrl:function(b){var e,d=b.lastIndexOf("."),g=b.split("/")[0];if(-1!==d&&(!("."===g||".."===g)||1<d)){e=b.substring(d,b.length),b=b.substring(0,d)}return i.nameToUrl(c(b,a&&a.id,!0),e,!0)},defined:function(b){return s(p,m(b,a,!1,!0).id)},specified:function(b){b=m(b,a,!1,!0).id;return s(p,b)||s(k,b)}});a||(g.undef=function(b){x();var c=m(b,a,!0),e=j(k,b);d(b);delete p[b];delete T[c.url];delete aa[b];U(A,function(a,c){a[0]===b&&A.splice(c,1)});e&&(e.events.defined&&(aa[b]=e.events),y(b))});return g},enable:function(a){j(k,a.id)&&q(a).enable()},completeLoad:function(a){var b,c,f=j(l.shim,a)||{},d=f.exports;for(x();A.length;){c=A.shift();if(null===c[0]){c[0]=a;if(b){break}b=!0}else{c[0]===a&&(b=!0)}E(c)}c=j(k,a);if(!b&&!s(p,a)&&c&&!c.inited){if(l.enforceDefine&&(!d||!ea(d))){return g(a)?void 0:w(C("nodefine","No define call for "+a,null,[a]))}E([a,f.deps||[],f.exportsFn])}D()},nameToUrl:function(a,b,c){var f,d,g;(f=j(l.pkgs,a))&&(a=f);if(f=j(ba,a)){return i.nameToUrl(f,b,c)}if(h.jsExtRegExp.test(a)){f=a+(b||"")}else{f=l.paths;a=a.split("/");for(d=a.length;0<d;d-=1){if(g=a.slice(0,d).join("/"),g=j(f,g)){H(g)&&(g=g[0]);a.splice(0,d,g);break}}f=a.join("/");f+=b||(/^data\:|\?/.test(f)||c?"":".js");f=("/"===f.charAt(0)||f.match(/^[\w\+\.\-]+:/)?"":l.baseUrl)+f}return l.urlArgs?f+((-1===f.indexOf("?")?"?":"&")+l.urlArgs):f},load:function(a,b){h.load(i,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||ka.test((a.currentTarget||a.srcElement).readyState)){P=null,a=K(a),i.completeLoad(a.id)}},onScriptError:function(a){var b=K(a);if(!g(b.id)){return w(C("scripterror","Script error for: "+b.id,a,[b.id]))}}};i.require=i.makeRequire();return i}var h,x,y,D,K,E,P,L,q,Q,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,R=/\.js$/,ja=/^\.\//;x=Object.prototype;var M=x.toString,ga=x.hasOwnProperty,ia=Array.prototype.splice,z=!!("undefined"!==typeof window&&"undefined"!==typeof navigator&&window.document),fa=!z&&"undefined"!==typeof importScripts,ka=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Z="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),F={},r={},S=[],O=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(G(requirejs)){return}r=requirejs;requirejs=void 0}"undefined"!==typeof require&&!G(require)&&(r=require,require=void 0);h=requirejs=function(b,c,d,g){var u,m="_";!H(b)&&"string"!==typeof b&&(u=b,H(c)?(b=c,c=d,d=g):b=[]);u&&u.context&&(m=u.context);(g=j(F,m))||(g=F[m]=h.s.newContext(m));u&&g.configure(u);return g.require(b,c,d)};h.config=function(b){return h(b)};h.nextTick="undefined"!==typeof setTimeout?function(b){setTimeout(b,4)}:function(b){b()};require||(require=h);h.version="2.1.11";h.jsExtRegExp=/^\/|:|\?|\.js$/;h.isBrowser=z;x=h.s={contexts:F,newContext:ha};h({});v(["toUrl","undef","defined","specified"],function(b){h[b]=function(){var c=F._;return c.require[b].apply(c,arguments)}});if(z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])){y=x.head=D.parentNode}h.onError=da;h.createNode=function(b){var c=b.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");c.type=b.scriptType||"text/javascript";c.charset="utf-8";c.async=!0;return c};h.load=function(b,c,d){var g=b&&b.config||{};if(z){return g=h.createNode(g,c,d),g.setAttribute("data-requirecontext",b.contextName),g.setAttribute("data-requiremodule",c),g.attachEvent&&!(g.attachEvent.toString&&0>g.attachEvent.toString().indexOf("[native code"))&&!Z?(O=!0,g.attachEvent("onreadystatechange",b.onScriptLoad)):(g.addEventListener("load",b.onScriptLoad,!1),g.addEventListener("error",b.onScriptError,!1)),g.src=d,L=g,D?y.insertBefore(g,D):y.appendChild(g),L=null,g}if(fa){try{importScripts(d),b.completeLoad(c)}catch(j){b.onError(C("importscripts","importScripts failed for "+c+" at "+d,j,[c]))}}};z&&!r.skipDataMain&&U(document.getElementsByTagName("script"),function(b){y||(y=b.parentNode);if(K=b.getAttribute("data-main")){return q=K,r.baseUrl||(E=q.split("/"),q=E.pop(),Q=E.length?E.join("/")+"/":"./",r.baseUrl=Q),q=q.replace(R,""),h.jsExtRegExp.test(q)&&(q=K),r.deps=r.deps?r.deps.concat(q):[q],!0}});define=function(b,c,d){var g,h;"string"!==typeof b&&(d=c,c=b,b=null);H(c)||(d=c,c=null);!c&&G(d)&&(c=[],d.length&&(d.toString().replace(la,"").replace(ma,function(b,d){c.push(d)}),c=(1===d.length?["require"]:["require","exports","module"]).concat(c)));if(O){if(!(g=L)){P&&"interactive"===P.readyState||U(document.getElementsByTagName("script"),function(b){if("interactive"===b.readyState){return P=b}}),g=P}g&&(b||(b=g.getAttribute("data-requiremodule")),h=F[g.getAttribute("data-requirecontext")])}(h?h.defQueue:S).push([b,c,d])};define.amd={jQuery:!0};h.exec=function(b){return eval(b)};h(r)}})(this);define("famous/core/Entity",["require","exports","module"],function(c,a,e){var g=[];function b(i){return g[i]}function h(j,i){g[j]=i}function f(i){var j=g.length;h(j,i);return j}function d(i){h(i,null)}e.exports={register:f,unregister:d,get:b,set:h}});define("famous/core/Transform",["require","exports","module"],function(j,F,b){var u={};u.precision=0.000001;u.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.multiply4x4=function B(I,H){return[I[0]*H[0]+I[4]*H[1]+I[8]*H[2]+I[12]*H[3],I[1]*H[0]+I[5]*H[1]+I[9]*H[2]+I[13]*H[3],I[2]*H[0]+I[6]*H[1]+I[10]*H[2]+I[14]*H[3],I[3]*H[0]+I[7]*H[1]+I[11]*H[2]+I[15]*H[3],I[0]*H[4]+I[4]*H[5]+I[8]*H[6]+I[12]*H[7],I[1]*H[4]+I[5]*H[5]+I[9]*H[6]+I[13]*H[7],I[2]*H[4]+I[6]*H[5]+I[10]*H[6]+I[14]*H[7],I[3]*H[4]+I[7]*H[5]+I[11]*H[6]+I[15]*H[7],I[0]*H[8]+I[4]*H[9]+I[8]*H[10]+I[12]*H[11],I[1]*H[8]+I[5]*H[9]+I[9]*H[10]+I[13]*H[11],I[2]*H[8]+I[6]*H[9]+I[10]*H[10]+I[14]*H[11],I[3]*H[8]+I[7]*H[9]+I[11]*H[10]+I[15]*H[11],I[0]*H[12]+I[4]*H[13]+I[8]*H[14]+I[12]*H[15],I[1]*H[12]+I[5]*H[13]+I[9]*H[14]+I[13]*H[15],I[2]*H[12]+I[6]*H[13]+I[10]*H[14]+I[14]*H[15],I[3]*H[12]+I[7]*H[13]+I[11]*H[14]+I[15]*H[15]]};u.multiply=function q(I,H){return[I[0]*H[0]+I[4]*H[1]+I[8]*H[2],I[1]*H[0]+I[5]*H[1]+I[9]*H[2],I[2]*H[0]+I[6]*H[1]+I[10]*H[2],0,I[0]*H[4]+I[4]*H[5]+I[8]*H[6],I[1]*H[4]+I[5]*H[5]+I[9]*H[6],I[2]*H[4]+I[6]*H[5]+I[10]*H[6],0,I[0]*H[8]+I[4]*H[9]+I[8]*H[10],I[1]*H[8]+I[5]*H[9]+I[9]*H[10],I[2]*H[8]+I[6]*H[9]+I[10]*H[10],0,I[0]*H[12]+I[4]*H[13]+I[8]*H[14]+I[12],I[1]*H[12]+I[5]*H[13]+I[9]*H[14]+I[13],I[2]*H[12]+I[6]*H[13]+I[10]*H[14]+I[14],1]};u.thenMove=function D(H,I){if(!I[2]){I[2]=0}return[H[0],H[1],H[2],0,H[4],H[5],H[6],0,H[8],H[9],H[10],0,H[12]+I[0],H[13]+I[1],H[14]+I[2],1]};u.moveThen=function y(I,H){if(!I[2]){I[2]=0}var L=I[0]*H[0]+I[1]*H[4]+I[2]*H[8];var K=I[0]*H[1]+I[1]*H[5]+I[2]*H[9];var J=I[0]*H[2]+I[1]*H[6]+I[2]*H[10];return u.thenMove(H,[L,K,J])};u.translate=function s(H,J,I){if(I===undefined){I=0}return[1,0,0,0,0,1,0,0,0,0,1,0,H,J,I,1]};u.thenScale=function l(H,I){return[I[0]*H[0],I[1]*H[1],I[2]*H[2],0,I[0]*H[4],I[1]*H[5],I[2]*H[6],0,I[0]*H[8],I[1]*H[9],I[2]*H[10],0,I[0]*H[12],I[1]*H[13],I[2]*H[14],1]};u.scale=function G(H,J,I){if(I===undefined){I=1}return[H,0,0,0,0,J,0,0,0,0,I,0,0,0,0,1]};u.rotateX=function p(I){var J=Math.cos(I);var H=Math.sin(I);return[1,0,0,0,0,J,H,0,0,-H,J,0,0,0,0,1]};u.rotateY=function n(I){var J=Math.cos(I);var H=Math.sin(I);return[J,0,-H,0,0,1,0,0,H,0,J,0,0,0,0,1]};u.rotateZ=function m(I){var J=Math.cos(I);var H=Math.sin(I);return[J,H,0,0,-H,J,0,0,0,0,1,0,0,0,0,1]};u.rotate=function A(O,J,P){var L=Math.cos(O);var H=Math.sin(O);var N=Math.cos(J);var I=Math.sin(J);var M=Math.cos(P);var K=Math.sin(P);var Q=[N*M,L*K+H*I*M,H*K-L*I*M,0,-N*K,L*M-H*I*K,H*M+L*I*K,0,I,-H*N,L*N,0,0,0,0,1];return Q};u.rotateAxis=function e(S,J){var H=Math.sin(J);var P=Math.cos(J);var R=1-P;var Q=S[0]*S[0]*R;var L=S[0]*S[1]*R;var U=S[0]*S[2]*R;var N=S[1]*S[1]*R;var I=S[1]*S[2]*R;var M=S[2]*S[2]*R;var K=S[0]*H;var T=S[1]*H;var O=S[2]*H;var V=[Q+P,L+O,U-T,0,L-O,N+P,I+K,0,U+T,I-K,M+P,0,0,0,0,1];return V};u.aboutOrigin=function a(I,H){var L=I[0]-(I[0]*H[0]+I[1]*H[4]+I[2]*H[8]);var K=I[1]-(I[0]*H[1]+I[1]*H[5]+I[2]*H[9]);var J=I[2]-(I[0]*H[2]+I[1]*H[6]+I[2]*H[10]);return u.thenMove(H,[L,K,J])};u.skew=function f(J,H,I){return[1,0,0,0,Math.tan(I),1,0,0,Math.tan(H),Math.tan(J),1,0,0,0,0,1]};u.skewX=function k(H){return[1,0,0,0,Math.tan(H),1,0,0,0,0,1,0,0,0,0,1]};u.skewY=function i(H){return[1,Math.tan(H),0,0,0,1,0,0,0,0,1,0,0,0,0,1]};u.perspective=function w(H){return[1,0,0,0,0,1,0,0,0,0,1,-1/H,0,0,0,1]};u.getTranslate=function z(H){return[H[12],H[13],H[14]]};u.inverse=function d(M){var R=M[5]*M[10]-M[6]*M[9];var Q=M[4]*M[10]-M[6]*M[8];var P=M[4]*M[9]-M[5]*M[8];var N=M[1]*M[10]-M[2]*M[9];var L=M[0]*M[10]-M[2]*M[8];var K=M[0]*M[9]-M[1]*M[8];var I=M[1]*M[6]-M[2]*M[5];var H=M[0]*M[6]-M[2]*M[4];var O=M[0]*M[5]-M[1]*M[4];var J=M[0]*R-M[1]*Q+M[2]*P;var S=1/J;var T=[S*R,-S*N,S*I,0,-S*Q,S*L,-S*H,0,S*P,-S*K,S*O,0,0,0,0,1];T[12]=-M[12]*T[0]-M[13]*T[4]-M[14]*T[8];T[13]=-M[12]*T[1]-M[13]*T[5]-M[14]*T[9];T[14]=-M[12]*T[2]-M[13]*T[6]-M[14]*T[10];return T};u.transpose=function r(H){return[H[0],H[4],H[8],H[12],H[1],H[5],H[9],H[13],H[2],H[6],H[10],H[14],H[3],H[7],H[11],H[15]]};function x(H){return(H.length===2)?H[0]*H[0]+H[1]*H[1]:H[0]*H[0]+H[1]*H[1]+H[2]*H[2]}function E(H){return Math.sqrt(x(H))}function t(H){return(H<0)?-1:1}u.interpret=function h(P){var S=[P[0],P[1],P[2]];var O=t(S[0]);var Z=E(S);var V=[S[0]+O*Z,S[1],S[2]];var L=2/x(V);if(L>=Infinity){return{translate:u.getTranslate(P),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]}}var Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];Y[0]=1-L*V[0]*V[0];Y[5]=1-L*V[1]*V[1];Y[10]=1-L*V[2]*V[2];Y[1]=-L*V[0]*V[1];Y[2]=-L*V[0]*V[2];Y[6]=-L*V[1]*V[2];Y[4]=Y[1];Y[8]=Y[2];Y[9]=Y[6];var J=u.multiply(Y,P);var aa=[J[5],J[6]];var U=t(aa[0]);var I=E(aa);var H=[aa[0]+U*I,aa[1]];var ab=2/x(H);var X=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];X[5]=1-ab*H[0]*H[0];X[10]=1-ab*H[1]*H[1];X[6]=-ab*H[0]*H[1];X[9]=X[6];var N=u.multiply(X,Y);var K=u.multiply(N,P);var W=u.scale(K[0]<0?-1:1,K[5]<0?-1:1,K[10]<0?-1:1);K=u.multiply(K,W);N=u.multiply(W,N);var T={};T.translate=u.getTranslate(P);T.rotate=[Math.atan2(-N[6],N[10]),Math.asin(N[2]),Math.atan2(-N[1],N[0])];if(!T.rotate[0]){T.rotate[0]=0;T.rotate[2]=Math.atan2(N[4],N[5])}T.scale=[K[0],K[5],K[10]];T.skew=[Math.atan2(K[9],T.scale[2]),Math.atan2(K[8],T.scale[2]),Math.atan2(K[4],T.scale[0])];if(Math.abs(T.rotate[0])+Math.abs(T.rotate[2])>1.5*Math.PI){T.rotate[1]=Math.PI-T.rotate[1];if(T.rotate[1]>Math.PI){T.rotate[1]-=2*Math.PI}if(T.rotate[1]<-Math.PI){T.rotate[1]+=2*Math.PI}if(T.rotate[0]<0){T.rotate[0]+=Math.PI}else{T.rotate[0]-=Math.PI}if(T.rotate[2]<0){T.rotate[2]+=Math.PI}else{T.rotate[2]-=Math.PI}}return T};u.average=function c(L,K,J){J=(J===undefined)?0.5:J;var N=u.interpret(L);var M=u.interpret(K);var H={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};for(var I=0;I<3;I++){H.translate[I]=(1-J)*N.translate[I]+J*M.translate[I];H.rotate[I]=(1-J)*N.rotate[I]+J*M.rotate[I];H.scale[I]=(1-J)*N.scale[I]+J*M.scale[I];H.skew[I]=(1-J)*N.skew[I]+J*M.skew[I]}return u.build(H)};u.build=function v(I){var J=u.scale(I.scale[0],I.scale[1],I.scale[2]);var H=u.skew(I.skew[0],I.skew[1],I.skew[2]);var K=u.rotate(I.rotate[0],I.rotate[1],I.rotate[2]);return u.thenMove(u.multiply(u.multiply(K,H),J),I.translate)};u.equals=function o(I,H){return !u.notEquals(I,H)};u.notEquals=function g(I,H){if(I===H){return false}return !(I&&H)||I[12]!==H[12]||I[13]!==H[13]||I[14]!==H[14]||I[0]!==H[0]||I[1]!==H[1]||I[2]!==H[2]||I[4]!==H[4]||I[5]!==H[5]||I[6]!==H[6]||I[8]!==H[8]||I[9]!==H[9]||I[10]!==H[10]};u.normalizeRotation=function C(I){var H=I.slice(0);if(H[0]===Math.PI*0.5||H[0]===-Math.PI*0.5){H[0]=-H[0];H[1]=Math.PI-H[1];H[2]-=Math.PI}if(H[0]>Math.PI*0.5){H[0]=H[0]-Math.PI;H[1]=Math.PI-H[1];H[2]-=Math.PI}if(H[0]<-Math.PI*0.5){H[0]=H[0]+Math.PI;H[1]=-Math.PI-H[1];H[2]-=Math.PI}while(H[1]<-Math.PI){H[1]+=2*Math.PI}while(H[1]>=Math.PI){H[1]-=2*Math.PI}while(H[2]<-Math.PI){H[2]+=2*Math.PI}while(H[2]>=Math.PI){H[2]-=2*Math.PI}return H};u.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0.001,1];u.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-0.001,1];b.exports=u});define("famous/core/SpecParser",["require","exports","module","./Transform"],function(c,g,b){var f=c("./Transform");function h(){this.result={}}h._instance=new h();h.parse=function e(k,l){return h._instance.parse(k,l)};h.prototype.parse=function e(k,l){this.reset();this._parseSpec(k,l,f.identity);return this.result};h.prototype.reset=function i(){this.result={}};function d(l,k){return[l[0]*k[0]+l[1]*k[4]+l[2]*k[8],l[0]*k[1]+l[1]*k[5]+l[2]*k[9],l[0]*k[2]+l[1]*k[6]+l[2]*k[10]]}var a=[0,0];h.prototype._parseSpec=function j(w,r,n){var k;var t;var m;var q;var v;var s;var x;if(typeof w==="number"){k=w;m=r.transform;s=r.align||r.origin;if(r.size&&s&&(s[0]||s[1])){var p=[s[0]*r.size[0],s[1]*r.size[1],0];m=f.thenMove(m,d(p,n))}this.result[k]={transform:m,opacity:r.opacity,origin:r.origin||a,align:r.align||r.origin||a,size:r.size}}else{if(!w){return}else{if(w instanceof Array){for(var o=0;o<w.length;o++){this._parseSpec(w[o],r,n)}}else{t=w.target;m=r.transform;q=r.opacity;v=r.origin;s=r.align;x=r.size;var u=n;if(w.opacity!==undefined){q=r.opacity*w.opacity}if(w.transform){m=f.multiply(r.transform,w.transform)}if(w.origin){v=w.origin;u=r.transform}if(w.align){s=w.align}if(w.size){var l=r.size;x=[w.size[0]!==undefined?w.size[0]:l[0],w.size[1]!==undefined?w.size[1]:l[1]];if(l){if(!s){s=v}if(s&&(s[0]||s[1])){m=f.thenMove(m,d([s[0]*l[0],s[1]*l[1],0],n))}if(v&&(v[0]||v[1])){m=f.moveThen([-v[0]*x[0],-v[1]*x[1],0],m)}}u=r.transform;v=null;s=null}this._parseSpec(t,{transform:m,opacity:q,origin:v,align:s,size:x},u)}}}};b.exports=h});define("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(d,f,b){var e=d("./Entity");var h=d("./SpecParser");function i(n){this._object=null;this._child=null;this._hasMultipleChildren=false;this._isRenderable=false;this._isModifier=false;this._resultCache={};this._prevResults={};this._childResult=null;if(n){this.set(n)}}i.prototype.add=function l(o){var n=(o instanceof i)?o:new i(o);if(this._child instanceof Array){this._child.push(n)}else{if(this._child){this._child=[this._child,n];this._hasMultipleChildren=true;this._childResult=[]}else{this._child=n}}return n};i.prototype.get=function c(){return this._object||(this._hasMultipleChildren?null:(this._child?this._child.get():null))};i.prototype.set=function j(n){this._childResult=null;this._hasMultipleChildren=false;this._isRenderable=n.render?true:false;this._isModifier=n.modify?true:false;this._object=n;this._child=null;if(n instanceof i){return n}else{return this}};i.prototype.getSize=function m(){var n=null;var o=this.get();if(o&&o.getSize){n=o.getSize()}if(!n&&this._child&&this._child.getSize){n=this._child.getSize()}return n};function k(t,q,v){var w=h.parse(t,q);var u=Object.keys(w);for(var r=0;r<u.length;r++){var p=u[r];var n=e.get(p);var o=w[p];o.allocator=q.allocator;var s=n.commit(o);if(s){k(s,q,v)}else{v[p]=o}}}i.prototype.commit=function g(q){var n=Object.keys(this._prevResults);for(var p=0;p<n.length;p++){var r=n[p];if(this._resultCache[r]===undefined){var o=e.get(r);if(o.cleanup){o.cleanup(q.allocator)}}}this._prevResults=this._resultCache;this._resultCache={};k(this.render(),q,this._resultCache)};i.prototype.render=function a(){if(this._isRenderable){return this._object.render()}var n=null;if(this._hasMultipleChildren){n=this._childResult;var p=this._child;for(var o=0;o<p.length;o++){n[o]=p[o].render()}}else{if(this._child){n=this._child.render()}}return this._isModifier?this._object.modify(n):n};b.exports=i});define("famous/core/EventEmitter",["require","exports","module"],function(e,c,f){function h(){this.listeners={};this._owner=this}h.prototype.emit=function d(l,m){var j=this.listeners[l];if(j){for(var k=0;k<j.length;k++){j[k].call(this._owner,m)}}return this};h.prototype.on=function a(k,j){if(!(k in this.listeners)){this.listeners[k]=[]}var i=this.listeners[k].indexOf(j);if(i<0){this.listeners[k].push(j)}return this};h.prototype.addListener=h.prototype.on;h.prototype.removeListener=function g(k,j){var i=this.listeners[k].indexOf(j);if(i>=0){this.listeners[k].splice(i,1)}return this};h.prototype.bindThis=function b(i){this._owner=i};f.exports=h});define("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(d,f,a){var l=d("./EventEmitter");function k(){l.apply(this,arguments);this.downstream=[];this.downstreamFn=[];this.upstream=[];this.upstreamListeners={}}k.prototype=Object.create(l.prototype);k.prototype.constructor=k;k.setInputHandler=function e(n,o){n.trigger=o.trigger.bind(o);if(o.subscribe&&o.unsubscribe){n.subscribe=o.subscribe.bind(o);n.unsubscribe=o.unsubscribe.bind(o)}};k.setOutputHandler=function m(n,o){if(o instanceof k){o.bindThis(n)}n.pipe=o.pipe.bind(o);n.unpipe=o.unpipe.bind(o);n.on=o.on.bind(o);n.addListener=n.on;n.removeListener=o.removeListener.bind(o)};k.prototype.emit=function i(o,p){l.prototype.emit.apply(this,arguments);var n=0;for(n=0;n<this.downstream.length;n++){if(this.downstream[n].trigger){this.downstream[n].trigger(o,p)}}for(n=0;n<this.downstreamFn.length;n++){this.downstreamFn[n](o,p)}return this};k.prototype.trigger=k.prototype.emit;k.prototype.pipe=function c(p){if(p.subscribe instanceof Function){return p.subscribe(this)}var n=(p instanceof Function)?this.downstreamFn:this.downstream;var o=n.indexOf(p);if(o<0){n.push(p)}if(p instanceof Function){p("pipe",null)}else{if(p.trigger){p.trigger("pipe",null)}}return p};k.prototype.unpipe=function g(p){if(p.unsubscribe instanceof Function){return p.unsubscribe(this)}var n=(p instanceof Function)?this.downstreamFn:this.downstream;var o=n.indexOf(p);if(o>=0){n.splice(o,1);if(p instanceof Function){p("unpipe",null)}else{if(p.trigger){p.trigger("unpipe",null)}}return p}else{return false}};k.prototype.on=function h(q,p){l.prototype.on.apply(this,arguments);if(!(q in this.upstreamListeners)){var n=this.trigger.bind(this,q);this.upstreamListeners[q]=n;for(var o=0;o<this.upstream.length;o++){this.upstream[o].on(q,n)}}return this};k.prototype.addListener=k.prototype.on;k.prototype.subscribe=function b(p){var n=this.upstream.indexOf(p);if(n<0){this.upstream.push(p);for(var o in this.upstreamListeners){p.on(o,this.upstreamListeners[o])}}return this};k.prototype.unsubscribe=function j(p){var n=this.upstream.indexOf(p);if(n>=0){this.upstream.splice(n,1);for(var o in this.upstreamListeners){p.removeListener(o,this.upstreamListeners[o])}}return this};a.exports=k});define("famous/core/ElementAllocator",["require","exports","module"],function(d,b,e){function f(i){if(!i){i=document.createDocumentFragment()}this.container=i;this.detachedNodes={};this.nodeCount=0}f.prototype.migrate=function c(i){var j=this.container;if(i===j){return}if(j instanceof DocumentFragment){i.appendChild(j)}else{while(j.hasChildNodes()){i.appendChild(j.removeChild(j.firstChild))}}this.container=i};f.prototype.allocate=function g(j){j=j.toLowerCase();if(!(j in this.detachedNodes)){this.detachedNodes[j]=[]}var k=this.detachedNodes[j];var i;if(k.length>0){i=k.pop()}else{i=document.createElement(j);this.container.appendChild(i)}this.nodeCount++;return i};f.prototype.deallocate=function a(j){var i=j.nodeName.toLowerCase();var k=this.detachedNodes[i];k.push(j);this.nodeCount--};f.prototype.getNodeCount=function h(){return this.nodeCount};e.exports=f});define("famous/utilities/Utility",["require","exports","module"],function(c,b,e){var a={};a.Direction={X:0,Y:1,Z:2};a.after=function g(i,j){var h=i;return function(){h--;if(h===0){j.apply(this,arguments)}}};a.loadURL=function f(h,k){var j=new XMLHttpRequest();j.onreadystatechange=function i(){if(this.readyState===4){if(k){k(this.responseText)}}};j.open("GET",h);j.send()};a.createDocumentFragmentFromHTML=function d(j){var i=document.createElement("div");i.innerHTML=j;var h=document.createDocumentFragment();while(i.hasChildNodes()){h.appendChild(i.firstChild)}return h};e.exports=a});define("famous/transitions/MultipleTransition",["require","exports","module","famous/utilities/Utility"],function(d,b,e){var a=d("famous/utilities/Utility");function h(i){this.method=i;this._instances=[];this.state=[]}h.SUPPORTS_MULTIPLE=true;h.prototype.get=function c(){for(var j=0;j<this._instances.length;j++){this.state[j]=this._instances[j].get()}return this.state};h.prototype.set=function g(j,m,n){var k=a.after(j.length,n);for(var l=0;l<j.length;l++){if(!this._instances[l]){this._instances[l]=new (this.method)()}this._instances[l].set(j[l],m,k)}};h.prototype.reset=function f(j){for(var k=0;k<j.length;k++){if(!this._instances[k]){this._instances[k]=new (this.method)()}this._instances[k].reset(j[k])}};e.exports=h});define("famous/transitions/TweenTransition",["require","exports","module"],function(k,v,c){function g(x){this.options=Object.create(g.DEFAULT_OPTIONS);if(x){this.setOptions(x)}this._startTime=0;this._startValue=0;this._updateTime=0;this._endValue=0;this._curve=undefined;this._duration=0;this._active=false;this._callback=undefined;this.state=0;this.velocity=undefined}g.Curves={linear:function(x){return x},easeIn:function(x){return x*x},easeOut:function(x){return x*(2-x)},easeInOut:function(x){if(x<=0.5){return 2*x*x}else{return -2*x*x+4*x-1}},easeOutBounce:function(x){return x*(3-2*x)},spring:function(x){return(1-x)*Math.sin(6*Math.PI*x)+x}};g.SUPPORTS_MULTIPLE=true;g.DEFAULT_OPTIONS={curve:g.Curves.linear,duration:500,speed:0};var b={};g.registerCurve=function n(x,y){if(!b[x]){b[x]=y;return true}else{return false}};g.unregisterCurve=function w(x){if(b[x]){delete b[x];return true}else{return false}};g.getCurve=function a(x){var y=b[x];if(y!==undefined){return y}else{throw new Error("curve not registered")}};g.getCurves=function j(){return b};function q(y,x,z){return((1-z)*y)+(z*x)}function m(x){if(x instanceof Object){if(x instanceof Array){return x.slice(0)}else{return Object.create(x)}}else{return x}}function d(z,y){var x={curve:y.curve};if(y.duration){x.duration=y.duration}if(y.speed){x.speed=y.speed}if(z instanceof Object){if(z.duration!==undefined){x.duration=z.duration}if(z.curve){x.curve=z.curve}if(z.speed){x.speed=z.speed}}if(typeof x.curve==="string"){x.curve=g.getCurve(x.curve)}return x}g.prototype.setOptions=function s(x){if(x.curve!==undefined){this.options.curve=x.curve}if(x.duration!==undefined){this.options.duration=x.duration}if(x.speed!==undefined){this.options.speed=x.speed}};g.prototype.set=function o(x,B,C){if(!B){this.reset(x);if(C){C()}return}this._startValue=m(this.get());B=d(B,this.options);if(B.speed){var y=this._startValue;if(y instanceof Object){var z=0;for(var A in y){z+=(x[A]-y[A])*(x[A]-y[A])}B.duration=Math.sqrt(z)/B.speed}else{B.duration=Math.abs(x-y)/B.speed}}this._startTime=Date.now();this._endValue=m(x);this._startVelocity=m(B.velocity);this._duration=B.duration;this._curve=B.curve;this._active=true;this._callback=C};g.prototype.reset=function u(y,x){if(this._callback){var z=this._callback;this._callback=undefined;z()}this.state=m(y);this.velocity=m(x);this._startTime=0;this._duration=0;this._updateTime=0;this._startValue=this.state;this._startVelocity=this.velocity;this._endValue=this.state;this._active=false};g.prototype.getVelocity=function h(){return this.velocity};g.prototype.get=function t(x){this.update(x);return this.state};function r(D,x,y,A,E){var B;var F=1e-7;var z=(y(E)-y(E-F))/F;if(D instanceof Array){B=[];for(var C=0;C<D.length;C++){if(typeof D[C]==="number"){B[C]=z*(D[C]-x[C])/A}else{B[C]=0}}}else{B=z*(D-x)/A}return B}function e(B,x,z){var A;if(B instanceof Array){A=[];for(var y=0;y<B.length;y++){if(typeof B[y]==="number"){A[y]=q(B[y],x[y],z)}else{A[y]=B[y]}}}else{A=q(B,x,z)}return A}g.prototype.update=function i(z){if(!this._active){if(this._callback){var A=this._callback;this._callback=undefined;A()}return}if(!z){z=Date.now()}if(this._updateTime>=z){return}this._updateTime=z;var x=z-this._startTime;if(x>=this._duration){this.state=this._endValue;this.velocity=r(this.state,this._startValue,this._curve,this._duration,1);this._active=false}else{if(x<0){this.state=this._startValue;this.velocity=this._startVelocity}else{var y=x/this._duration;this.state=e(this._startValue,this._endValue,this._curve(y));this.velocity=r(this.state,this._startValue,this._curve,this._duration,y)}}};g.prototype.isActive=function p(){return this._active};g.prototype.halt=function l(){this.reset(this.get())};g.registerCurve("linear",g.Curves.linear);g.registerCurve("easeIn",g.Curves.easeIn);g.registerCurve("easeOut",g.Curves.easeOut);g.registerCurve("easeInOut",g.Curves.easeInOut);g.registerCurve("easeOutBounce",g.Curves.easeOutBounce);g.registerCurve("spring",g.Curves.spring);g.customCurve=function f(y,x){y=y||0;x=x||0;return function(z){return y*z+(-2*y-x+3)*z*z+(y+x-2)*z*z*z}};c.exports=g});define("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(c,g,a){var f=c("./MultipleTransition");var k=c("./TweenTransition");function i(q){this.currentAction=null;this.actionQueue=[];this.callbackQueue=[];this.state=0;this.velocity=undefined;this._callback=undefined;this._engineInstance=null;this._currentMethod=null;this.set(q)}var l={};i.registerMethod=function p(r,q){if(!(r in l)){l[r]=q;return true}else{return false}};i.unregisterMethod=function e(q){if(q in l){delete l[q];return true}else{return false}};function m(){if(this._callback){var t=this._callback;this._callback=undefined;t()}if(this.actionQueue.length<=0){this.set(this.get());return}this.currentAction=this.actionQueue.shift();this._callback=this.callbackQueue.shift();var s=null;var q=this.currentAction[0];var r=this.currentAction[1];if(r instanceof Object&&r.method){s=r.method;if(typeof s==="string"){s=l[s]}}else{s=k}if(this._currentMethod!==s){if(!(q instanceof Object)||s.SUPPORTS_MULTIPLE===true||q.length<=s.SUPPORTS_MULTIPLE){this._engineInstance=new s()}else{this._engineInstance=new f(s)}this._currentMethod=s}this._engineInstance.reset(this.state,this.velocity);if(this.velocity!==undefined){r.velocity=this.velocity}this._engineInstance.set(q,r,m.bind(this))}i.prototype.set=function n(q,s,t){if(!s){this.reset(q);if(t){t()}return this}var r=[q,s];this.actionQueue.push(r);this.callbackQueue.push(t);if(!this.currentAction){m.call(this)}return this};i.prototype.reset=function j(r,q){this._currentMethod=null;this._engineInstance=null;this._callback=undefined;this.state=r;this.velocity=q;this.currentAction=null;this.actionQueue=[];this.callbackQueue=[]};i.prototype.delay=function h(q,r){this.set(this.get(),{duration:q,curve:function(){return 0}},r)};i.prototype.get=function b(q){if(this._engineInstance){if(this._engineInstance.getVelocity){this.velocity=this._engineInstance.getVelocity()}this.state=this._engineInstance.get(q)}return this.state};i.prototype.isActive=function o(){return !!this.currentAction};i.prototype.halt=function d(){this.set(this.get())};a.exports=i});define("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(i,w,a){var r=i("./RenderNode");var j=i("./EventHandler");var n=i("./ElementAllocator");var o=i("./Transform");var c=i("famous/transitions/Transitionable");var g=[0,0];function e(y){return[y.clientWidth,y.clientHeight]}function q(y){this.container=y;this._allocator=new n(y);this._node=new r();this._eventOutput=new j();this._size=e(this.container);this._perspectiveState=new c(0);this._perspective=undefined;this._nodeContext={allocator:this._allocator,transform:o.identity,opacity:1,origin:g,align:null,size:this._size};this._eventOutput.on("resize",function(){this.setSize(e(this.container))}.bind(this))}q.prototype.getAllocator=function l(){return this._allocator};q.prototype.add=function m(y){return this._node.add(y)};q.prototype.migrate=function u(y){if(y===this.container){return}this.container=y;this._allocator.migrate(y)};q.prototype.getSize=function b(){return this._size};q.prototype.setSize=function v(y){if(!y){y=e(this.container)}this._size[0]=y[0];this._size[1]=y[1]};q.prototype.update=function h(y){if(y){if(y.transform){this._nodeContext.transform=y.transform}if(y.opacity){this._nodeContext.opacity=y.opacity}if(y.origin){this._nodeContext.origin=y.origin}if(y.align){this._nodeContext.align=y.align}if(y.size){this._nodeContext.size=y.size}}var z=this._perspectiveState.get();if(z!==this._perspective){this.container.style.perspective=z?z.toFixed()+"px":"";this.container.style.webkitPerspective=z?z.toFixed():"";this._perspective=z}this._node.commit(this._nodeContext)};q.prototype.getPerspective=function f(){return this._perspectiveState.get()};q.prototype.setPerspective=function t(y,z,A){return this._perspectiveState.set(y,z,A)};q.prototype.emit=function p(y,z){return this._eventOutput.emit(y,z)};q.prototype.on=function k(z,y){return this._eventOutput.on(z,y)};q.prototype.removeListener=function d(z,y){return this._eventOutput.removeListener(z,y)};q.prototype.pipe=function s(y){return this._eventOutput.pipe(y)};q.prototype.unpipe=function x(y){return this._eventOutput.unpipe(y)};a.exports=q});define("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(f,h,b){var o=f("./EventHandler");function a(q){this._value=q;this.eventOutput=null}a.patch=function p(t,s){var r=new a(t);for(var q=1;q<arguments.length;q++){r.patch(arguments[q])}return t};function g(){this.eventOutput=new o();this.eventOutput.bindThis(this);o.setOutputHandler(this,this.eventOutput)}a.prototype.patch=function d(){var s=this._value;for(var r=0;r<arguments.length;r++){var t=arguments[r];for(var q in t){if((q in s)&&(t[q]&&t[q].constructor===Object)&&(s[q]&&s[q].constructor===Object)){if(!s.hasOwnProperty(q)){s[q]=Object.create(s[q])}this.key(q).patch(t[q]);if(this.eventOutput){this.eventOutput.emit("change",{id:q,value:this.key(q).value()})}}else{this.set(q,t[q])}}}return this};a.prototype.setOptions=a.prototype.patch;a.prototype.key=function n(r){var q=new a(this._value[r]);if(!(q._value instanceof Object)||q._value instanceof Array){q._value={}}return q};a.prototype.get=function c(q){return this._value[q]};a.prototype.getOptions=a.prototype.get;a.prototype.set=function m(r,s){var q=this.get(r);this._value[r]=s;if(this.eventOutput&&s!==q){this.eventOutput.emit("change",{id:r,value:s})}return this};a.prototype.value=function l(){return this._value};a.prototype.on=function k(){g.call(this);return this.on.apply(this,arguments)};a.prototype.removeListener=function i(){g.call(this);return this.removeListener.apply(this,arguments)};a.prototype.pipe=function e(){g.call(this);return this.pipe.apply(this,arguments)};a.prototype.unpipe=function j(){g.call(this);return this.unpipe.apply(this,arguments)};b.exports=a});define("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(n,G,b){var z=n("./Context");var q=n("./EventHandler");var t=n("./OptionsManager");var o={};var j=[];var i=[];var m=[];var E=Date.now();var s;var w;var H=true;var y={};var B=new q();var d={containerType:"div",containerClass:"famous-container",fpsCap:undefined,runLoop:true};var a=new t(d);var g=10;o.step=function h(){var K=Date.now();if(w&&K-E<w){return}var J=0;s=K-E;E=K;B.emit("prerender");for(J=0;J<i.length;J++){i[J].call(this)}i.splice(0);while(m.length&&(Date.now()-K)<g){m.shift().call(this)}for(J=0;J<j.length;J++){j[J].update()}B.emit("postrender")};function D(){if(d.runLoop){o.step();requestAnimationFrame(D)}else{H=false}}requestAnimationFrame(D);function F(K){for(var J=0;J<j.length;J++){j[J].emit("resize")}B.emit("resize")}window.addEventListener("resize",F,false);F();window.addEventListener("touchmove",function(J){J.preventDefault()},true);o.pipe=function A(J){if(J.subscribe instanceof Function){return J.subscribe(o)}else{return B.pipe(J)}};o.unpipe=function I(J){if(J.unsubscribe instanceof Function){return J.unsubscribe(o)}else{return B.unpipe(J)}};o.on=function r(K,J){if(!(K in y)){y[K]=B.emit.bind(B,K);if(document.body){document.body.addEventListener(K,y[K])}else{o.nextTick(function(L,M){document.body.addEventListener(L,M)}.bind(this,K,y[K]))}}return B.on(K,J)};o.emit=function v(J,K){return B.emit(J,K)};o.removeListener=function e(K,J){return B.removeListener(K,J)};o.getFPS=function l(){return 1000/s};o.setFPSCap=function u(J){w=Math.floor(1000/J)};o.getOptions=function p(){return a.getOptions.apply(a,arguments)};o.setOptions=function C(J){return a.setOptions.apply(a,arguments)};o.createContext=function x(K){var L=false;if(!K){K=document.createElement(d.containerType);K.classList.add(d.containerClass);L=true}var J=new z(K);o.registerContext(J);if(L){o.nextTick(function(M,N){document.body.appendChild(N);M.emit("resize")}.bind(this,J,K))}return J};o.registerContext=function k(J){j.push(J);return J};o.nextTick=function f(J){i.push(J)};o.defer=function c(J){m.push(J)};a.on("change",function(J){if(J.id==="fpsCap"){o.setFPSCap(J.value)}else{if(J.id==="runLoop"){if(!H&&J.value){H=true;requestAnimationFrame(D)}}}});b.exports=o});define("famous/core/Surface",["require","exports","module","./Entity","./EventHandler","./Transform"],function(i,K,g){var J=i("./Entity");var j=i("./EventHandler");var M=i("./Transform");var o=window.devicePixelRatio||1;var r=document.createElement("div").style.webkitTransform!==undefined;function F(Q){this.options={};this.properties={};this.content="";this.classList=[];this.size=null;this._classesDirty=true;this._stylesDirty=true;this._sizeDirty=true;this._contentDirty=true;this._dirtyClasses=[];this._matrix=null;this._opacity=1;this._origin=null;this._size=null;this.eventForwarder=function R(S){this.emit(S.type,S)}.bind(this);this.eventHandler=new j();this.eventHandler.bindThis(this);this.id=J.register(this);if(Q){this.setOptions(Q)}this._currTarget=null}F.prototype.elementType="div";F.prototype.elementClass="famous-surface";F.prototype.on=function C(R,Q){if(this._currTarget){this._currTarget.addEventListener(R,this.eventForwarder)}this.eventHandler.on(R,Q)};F.prototype.removeListener=function c(R,Q){this.eventHandler.removeListener(R,Q)};F.prototype.emit=function w(Q,R){if(R&&!R.origin){R.origin=this}var S=this.eventHandler.emit(Q,R);if(S&&R&&R.stopPropagation){R.stopPropagation()}return S};F.prototype.pipe=function m(Q){return this.eventHandler.pipe(Q)};F.prototype.unpipe=function y(Q){return this.eventHandler.unpipe(Q)};F.prototype.render=function B(){return this.id};F.prototype.setProperties=function a(Q){for(var R in Q){this.properties[R]=Q[R]}this._stylesDirty=true};F.prototype.getProperties=function E(){return this.properties};F.prototype.addClass=function z(Q){if(this.classList.indexOf(Q)<0){this.classList.push(Q);this._classesDirty=true}};F.prototype.removeClass=function s(R){var Q=this.classList.indexOf(R);if(Q>=0){this._dirtyClasses.push(this.classList.splice(Q,1)[0]);this._classesDirty=true}};F.prototype.setClasses=function d(S){var R=0;var Q=[];for(R=0;R<this.classList.length;R++){if(S.indexOf(this.classList[R])<0){Q.push(this.classList[R])}}for(R=0;R<Q.length;R++){this.removeClass(Q[R])}for(R=0;R<S.length;R++){this.addClass(S[R])}};F.prototype.getClassList=function h(){return this.classList};F.prototype.setContent=function k(Q){if(this.content!==Q){this.content=Q;this._contentDirty=true}};F.prototype.getContent=function D(){return this.content};F.prototype.setOptions=function x(Q){if(Q.size){this.setSize(Q.size)}if(Q.classes){this.setClasses(Q.classes)}if(Q.properties){this.setProperties(Q.properties)}if(Q.content){this.setContent(Q.content)}};function e(R){for(var Q in this.eventHandler.listeners){R.addEventListener(Q,this.eventForwarder)}}function b(R){for(var Q in this.eventHandler.listeners){R.removeEventListener(Q,this.eventForwarder)}}function u(R){for(var Q=0;Q<this._dirtyClasses.length;Q++){R.classList.remove(this._dirtyClasses[Q])}this._dirtyClasses=[]}function t(Q){for(var R in this.properties){Q.style[R]=this.properties[R]}}function A(Q){for(var R in this.properties){Q.style[R]=""}}function I(R){R[12]=Math.round(R[12]*o)/o;R[13]=Math.round(R[13]*o)/o;var Q="matrix3d(";for(var S=0;S<15;S++){Q+=(R[S]<0.000001&&R[S]>-0.000001)?"0,":R[S]+","}Q+=R[15]+")";return Q}var P;if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){P=function(R,Q){R.style.zIndex=(Q[14]*1000000)|0;R.style.transform=I(Q)}}else{if(r){P=function(R,Q){R.style.webkitTransform=I(Q)}}else{P=function(R,Q){R.style.transform=I(Q)}}}function q(Q){return(100*Q[0])+"% "+(100*Q[1])+"%"}var p=r?function(R,Q){R.style.webkitTransformOrigin=q(Q)}:function(R,Q){R.style.transformOrigin=q(Q)};var L=r?function(Q){Q.style.webkitTransform="scale3d(0.0001,0.0001,1)";Q.style.opacity=0}:function(Q){Q.style.transform="scale3d(0.0001,0.0001,1)";Q.style.opacity=0};function O(R,Q){return(R&&Q)?(R[0]!==Q[0]||R[1]!==Q[1]):R!==Q}F.prototype.setup=function l(Q){var S=Q.allocate(this.elementType);if(this.elementClass){if(this.elementClass instanceof Array){for(var R=0;R<this.elementClass.length;R++){S.classList.add(this.elementClass[R])}}else{S.classList.add(this.elementClass)}}S.style.display="";e.call(this,S);this._currTarget=S;this._stylesDirty=true;this._classesDirty=true;this._sizeDirty=true;this._contentDirty=true;this._matrix=null;this._opacity=undefined;this._origin=null;this._size=null};F.prototype.commit=function v(R){if(!this._currTarget){this.setup(R.allocator)}var W=this._currTarget;var X=R.transform;var V=R.opacity;var Y=R.origin;var Z=R.size;if(this._classesDirty){u.call(this,W);var S=this.getClassList();for(var T=0;T<S.length;T++){W.classList.add(S[T])}this._classesDirty=false}if(this._stylesDirty){t.call(this,W);this._stylesDirty=false}if(this._contentDirty){this.deploy(W);this.eventHandler.emit("deploy");this._contentDirty=false}if(this.size){var U=Z;Z=[this.size[0],this.size[1]];if(Z[0]===undefined&&U[0]){Z[0]=U[0]}if(Z[1]===undefined&&U[1]){Z[1]=U[1]}}if(Z[0]===true){Z[0]=W.clientWidth}if(Z[1]===true){Z[1]=W.clientHeight}if(O(this._size,Z)){if(!this._size){this._size=[0,0]}this._size[0]=Z[0];this._size[1]=Z[1];this._sizeDirty=true}if(!X&&this._matrix){this._matrix=null;this._opacity=0;L(W);return}if(this._opacity!==V){this._opacity=V;W.style.opacity=(V>=1)?"0.999999":V}if(O(this._origin,Y)||M.notEquals(this._matrix,X)||this._sizeDirty){if(!X){X=M.identity}this._matrix=X;var Q=X;if(Y){if(!this._origin){this._origin=[0,0]}this._origin[0]=Y[0];this._origin[1]=Y[1];Q=M.thenMove(X,[-this._size[0]*Y[0],-this._size[1]*Y[1],0]);p(W,Y)}P(W,Q)}if(this._sizeDirty){if(this._size){W.style.width=(this.size&&this.size[0]===true)?"":this._size[0]+"px";W.style.height=(this.size&&this.size[1]===true)?"":this._size[1]+"px"}this._sizeDirty=false}};F.prototype.cleanup=function f(Q){var R=0;var S=this._currTarget;this.eventHandler.emit("recall");this.recall(S);S.style.display="none";S.style.width="";S.style.height="";this._size=null;A.call(this,S);var T=this.getClassList();u.call(this,S);for(R=0;R<T.length;R++){S.classList.remove(T[R])}if(this.elementClass){if(this.elementClass instanceof Array){for(R=0;R<this.elementClass.length;R++){S.classList.remove(this.elementClass[R])}}else{S.classList.remove(this.elementClass)}}b.call(this,S);this._currTarget=null;Q.deallocate(S);L(S)};F.prototype.deploy=function N(R){var Q=this.getContent();if(Q instanceof Node){while(R.hasChildNodes()){R.removeChild(R.firstChild)}R.appendChild(Q)}else{R.innerHTML=Q}};F.prototype.recall=function n(Q){var R=document.createDocumentFragment();while(Q.hasChildNodes()){R.appendChild(Q.firstChild)}this.setContent(R)};F.prototype.getSize=function G(Q){return Q?this._size:(this.size||this._size)};F.prototype.setSize=function H(Q){this.size=Q?[Q[0],Q[1]]:null;this._sizeDirty=true};g.exports=F});define("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(d,g,c){var k=d("./Context");var f=d("./Transform");var i=d("./Surface");function j(m){i.call(this,m);this._shouldRecalculateSize=false;this._container=document.createDocumentFragment();this.context=new k(this._container);this.setContent(this._container);this._groupSize=[undefined,undefined]}j.SIZE_ZERO=[0,0];j.prototype=Object.create(i.prototype);j.prototype.elementType="div";j.prototype.elementClass="famous-group";j.prototype.add=function l(){return this.context.add.apply(this.context,arguments)};j.prototype.render=function a(){return i.prototype.render.call(this)};j.prototype.deploy=function e(m){this.context.migrate(m)};j.prototype.recall=function b(m){this._container=document.createDocumentFragment();this.context.migrate(this._container)};j.prototype.commit=function h(r){var p=r.transform;var n=r.origin;var o=r.opacity;var q=r.size;var m=i.prototype.commit.call(this,{allocator:r.allocator,transform:f.thenMove(p,[-n[0]*q[0],-n[1]*q[1],0]),opacity:o,origin:n,size:j.SIZE_ZERO});if(q[0]!==this._groupSize[0]||q[1]!==this._groupSize[1]){this._groupSize[0]=q[0];this._groupSize[1]=q[1];this.context.setSize(q)}this.context.update({transform:f.translate(-n[0]*q[0],-n[1]*q[1],0),origin:n,size:q});return m};c.exports=j});define("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(g,q,a){var c=g("./Transitionable");var n=g("famous/core/Transform");var b=g("famous/utilities/Utility");function r(s){this._final=n.identity.slice();this.translate=new c([0,0,0]);this.rotate=new c([0,0,0]);this.skew=new c([0,0,0]);this.scale=new c([1,1,1]);if(s){this.set(s)}}function d(){return n.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}r.prototype.setTranslate=function e(t,s,u){this.translate.set(t,s,u);this._final=this._final.slice();this._final[12]=t[0];this._final[13]=t[1];if(t[2]!==undefined){this._final[14]=t[2]}return this};r.prototype.setScale=function h(t,s,u){this.scale.set(t,s,u);this._final=this._final.slice();this._final[0]=t[0];this._final[5]=t[1];if(t[2]!==undefined){this._final[10]=t[2]}return this};r.prototype.setRotate=function k(u,s,t){this.rotate.set(u,s,t);this._final=d.call(this);this._final=n.build({translate:this.translate.get(),rotate:u,scale:this.scale.get(),skew:this.skew.get()});return this};r.prototype.setSkew=function i(s,t,u){this.skew.set(s,t,u);this._final=n.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:s});return this};r.prototype.set=function l(t,v,w){this._final=t;var u=n.interpret(t);var s=w?b.after(4,w):null;this.translate.set(u.translate,v,s);this.rotate.set(u.rotate,v,s);this.skew.set(u.skew,v,s);this.scale.set(u.scale,v,s);return this};r.prototype.setDefaultTransition=function f(s){this.translate.setDefault(s);this.rotate.setDefault(s);this.skew.setDefault(s);this.scale.setDefault(s)};r.prototype.get=function p(){if(this.isActive()){return d.call(this)}else{return this._final}};r.prototype.getFinal=function m(){return this._final};r.prototype.isActive=function o(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()};r.prototype.halt=function j(){this._final=this.get();this.translate.halt();this.rotate.halt();this.skew.halt();this.scale.halt()};a.exports=r});define("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(l,y,b){var o=l("./Transform");var d=l("famous/transitions/Transitionable");var z=l("famous/transitions/TransitionableTransform");function a(A){this._transformGetter=null;this._opacityGetter=null;this._originGetter=null;this._alignGetter=null;this._sizeGetter=null;this._legacyStates={};this._output={transform:o.identity,opacity:1,origin:null,align:null,size:null,target:null};if(A){if(A.transform){this.transformFrom(A.transform)}if(A.opacity!==undefined){this.opacityFrom(A.opacity)}if(A.origin){this.originFrom(A.origin)}if(A.align){this.alignFrom(A.align)}if(A.size){this.sizeFrom(A.size)}}}a.prototype.transformFrom=function p(A){if(A instanceof Function){this._transformGetter=A}else{if(A instanceof Object&&A.get){this._transformGetter=A.get.bind(A)}else{this._transformGetter=null;this._output.transform=A}}return this};a.prototype.opacityFrom=function k(A){if(A instanceof Function){this._opacityGetter=A}else{if(A instanceof Object&&A.get){this._opacityGetter=A.get.bind(A)}else{this._opacityGetter=null;this._output.opacity=A}}return this};a.prototype.originFrom=function g(A){if(A instanceof Function){this._originGetter=A}else{if(A instanceof Object&&A.get){this._originGetter=A.get.bind(A)}else{this._originGetter=null;this._output.origin=A}}return this};a.prototype.alignFrom=function i(A){if(A instanceof Function){this._alignGetter=A}else{if(A instanceof Object&&A.get){this._alignGetter=A.get.bind(A)}else{this._alignGetter=null;this._output.align=A}}return this};a.prototype.sizeFrom=function w(A){if(A instanceof Function){this._sizeGetter=A}else{if(A instanceof Object&&A.get){this._sizeGetter=A.get.bind(A)}else{this._sizeGetter=null;this._output.size=A}}return this};a.prototype.setTransform=function h(A,B,C){if(B||this._legacyStates.transform){if(!this._legacyStates.transform){this._legacyStates.transform=new z(this._output.transform)}if(!this._transformGetter){this.transformFrom(this._legacyStates.transform)}this._legacyStates.transform.set(A,B,C);return this}else{return this.transformFrom(A)}};a.prototype.setOpacity=function t(A,B,C){if(B||this._legacyStates.opacity){if(!this._legacyStates.opacity){this._legacyStates.opacity=new d(this._output.opacity)}if(!this._opacityGetter){this.opacityFrom(this._legacyStates.opacity)}return this._legacyStates.opacity.set(A,B,C)}else{return this.opacityFrom(A)}};a.prototype.setOrigin=function q(A,B,C){if(B||this._legacyStates.origin){if(!this._legacyStates.origin){this._legacyStates.origin=new d(this._output.origin||[0,0])}if(!this._originGetter){this.originFrom(this._legacyStates.origin)}this._legacyStates.origin.set(A,B,C);return this}else{return this.originFrom(A)}};a.prototype.setAlign=function e(C,A,B){if(A||this._legacyStates.align){if(!this._legacyStates.align){this._legacyStates.align=new d(this._output.align||[0,0])}if(!this._alignGetter){this.alignFrom(this._legacyStates.align)}this._legacyStates.align.set(C,A,B);return this}else{return this.alignFrom(C)}};a.prototype.setSize=function u(A,B,C){if(A&&(B||this._legacyStates.size)){if(!this._legacyStates.size){this._legacyStates.size=new d(this._output.size||[0,0])}if(!this._sizeGetter){this.sizeFrom(this._legacyStates.size)}this._legacyStates.size.set(A,B,C);return this}else{return this.sizeFrom(A)}};a.prototype.halt=function n(){if(this._legacyStates.transform){this._legacyStates.transform.halt()}if(this._legacyStates.opacity){this._legacyStates.opacity.halt()}if(this._legacyStates.origin){this._legacyStates.origin.halt()}if(this._legacyStates.align){this._legacyStates.align.halt()}if(this._legacyStates.size){this._legacyStates.size.halt()}this._transformGetter=null;this._opacityGetter=null;this._originGetter=null;this._alignGetter=null;this._sizeGetter=null};a.prototype.getTransform=function r(){return this._transformGetter()};a.prototype.getFinalTransform=function j(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform};a.prototype.getOpacity=function m(){return this._opacityGetter()};a.prototype.getOrigin=function v(){return this._originGetter()};a.prototype.getAlign=function f(){return this._alignGetter()};a.prototype.getSize=function c(){return this._sizeGetter?this._sizeGetter():this._output.size};function s(){if(this._transformGetter){this._output.transform=this._transformGetter()}if(this._opacityGetter){this._output.opacity=this._opacityGetter()}if(this._originGetter){this._output.origin=this._originGetter()}if(this._alignGetter){this._output.align=this._alignGetter()}if(this._sizeGetter){this._output.size=this._sizeGetter()}}a.prototype.modify=function x(A){s.call(this);this._output.target=A;return this._output};b.exports=a});define("famous/core/Scene",["require","exports","module","./Transform","./Modifier","./RenderNode"],function(d,h,b){var g=d("./Transform");var p=d("./Modifier");var l=d("./RenderNode");function e(q){this.id=null;this._objects=null;this.node=new l();this._definition=null;if(q){this.load(q)}}var f={translate:g.translate,rotate:g.rotate,rotateX:g.rotateX,rotateY:g.rotateY,rotateZ:g.rotateZ,rotateAxis:g.rotateAxis,scale:g.scale,skew:g.skew,matrix3d:function(){return arguments}};e.prototype.create=function i(){return new e(this._definition)};function m(q){for(var s in f){if(s in q){var r=q[s];if(!(r instanceof Array)){r=[r]}return f[s].apply(this,r)}}}function c(w){var x=w.transform;var t=w.opacity;var r=w.origin;var v=w.size;var s=g.identity;if(x instanceof Array){if(x.length===16&&typeof x[0]==="number"){s=x}else{for(var u=0;u<x.length;u++){s=g.multiply(s,m(x[u]))}}}else{if(x instanceof Object){s=m(x)}}var q=new p({transform:s,opacity:t,origin:r,size:v});return q}function k(s){var q=new l();for(var r=0;r<s.length;r++){var t=j.call(this,s[r]);if(t){q.add(t)}}return q}function j(s){var q;var u;if(s instanceof Array){q=k.call(this,s)}else{u=this._objects.length;if(s.render&&(s.render instanceof Function)){q=s}else{if(s.target){var r=j.call(this,s.target);var t=c.call(this,s);q=new l(t);q.add(r);if(s.id){this.id[s.id]=t}}else{if(s.id){q=new l();this.id[s.id]=q}}}}this._objects[u]=q;return q}e.prototype.load=function n(q){this._definition=q;this.id={};this._objects=[];this.node.set(j.call(this,q))};e.prototype.add=function o(){return this.node.add.apply(this.node,arguments)};e.prototype.render=function a(){return this.node.render.apply(this.node,arguments)};b.exports=e});define("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode"],function(e,f,d){var j=e("./EventHandler");var c=e("./OptionsManager");var g=e("./RenderNode");function a(m){this._node=new g();this._eventInput=new j();this._eventOutput=new j();j.setInputHandler(this,this._eventInput);j.setOutputHandler(this,this._eventOutput);this.options=Object.create(this.constructor.DEFAULT_OPTIONS||a.DEFAULT_OPTIONS);this._optionsManager=new c(this.options);if(m){this.setOptions(m)}}a.DEFAULT_OPTIONS={};a.prototype.getOptions=function i(){return this._optionsManager.value()};a.prototype.setOptions=function h(m){this._optionsManager.patch(m)};a.prototype.add=function k(){return this._node.add.apply(this._node,arguments)};a.prototype._add=a.prototype.add;a.prototype.render=function b(){return this._node.render()};a.prototype.getSize=function l(){if(this._node&&this._node.getSize){return this._node.getSize.apply(this._node,arguments)||this.options.size}else{return this.options.size}};d.exports=a});define("famous/core/ViewSequence",["require","exports","module"],function(h,s,a){function j(t){if(!t){t=[]}if(t instanceof Array){t={array:t}}this._=null;this.index=t.index||0;if(t.array){this._=new (this.constructor.Backing)(t.array)}else{if(t._){this._=t._}}if(this.index===this._.firstIndex){this._.firstNode=this}if(this.index===this._.firstIndex+this._.array.length-1){this._.lastNode=this}if(t.loop!==undefined){this._.loop=t.loop}this._previousNode=null;this._nextNode=null}j.Backing=function i(t){this.array=t;this.firstIndex=0;this.loop=false;this.firstNode=null;this.lastNode=null};j.Backing.prototype.getValue=function e(t){var u=t-this.firstIndex;if(u<0||u>=this.array.length){return null}return this.array[u]};j.Backing.prototype.setValue=function c(t,u){this.array[t-this.firstIndex]=u};j.Backing.prototype.reindex=function o(t,u,B){if(!this.array[0]){return}var y=0;var z=this.firstIndex;var v=B-u;var w=this.firstNode;while(z<t-1){w=w.getNext();z++}var x=w;for(y=0;y<u;y++){w=w.getNext();if(w){w._previousNode=x}}var A=w?w.getNext():null;x._nextNode=null;w=x;for(y=0;y<B;y++){w=w.getNext()}z+=B;if(w!==A){w._nextNode=A;if(A){A._previousNode=w}}if(A){w=A;z++;while(w&&z<this.array.length+this.firstIndex){if(w._nextNode){w.index+=v}else{w.index=z}w=w.getNext();z++}}};j.prototype.getPrevious=function b(){if(this.index===this._.firstIndex){if(this._.loop){this._previousNode=this._.lastNode||new (this.constructor)({_:this._,index:this._.firstIndex+this._.array.length-1});this._previousNode._nextNode=this}else{this._previousNode=null}}else{if(!this._previousNode){this._previousNode=new (this.constructor)({_:this._,index:this.index-1});this._previousNode._nextNode=this}}return this._previousNode};j.prototype.getNext=function f(){if(this.index===this._.firstIndex+this._.array.length-1){if(this._.loop){this._nextNode=this._.firstNode||new (this.constructor)({_:this._,index:this._.firstIndex});this._nextNode._previousNode=this}else{this._nextNode=null}}else{if(!this._nextNode){this._nextNode=new (this.constructor)({_:this._,index:this.index+1});this._nextNode._previousNode=this}}return this._nextNode};j.prototype.getIndex=function n(){return this.index};j.prototype.toString=function l(){return""+this.index};j.prototype.unshift=function m(t){this._.array.unshift.apply(this._.array,arguments);this._.firstIndex-=arguments.length};j.prototype.push=function g(t){this._.array.push.apply(this._.array,arguments)};j.prototype.splice=function q(u,v){var t=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[u-this._.firstIndex,v].concat(t));this._.reindex(u,v,t.length)};j.prototype.swap=function k(y){var v=y.get();var B=this.get();this._.setValue(this.index,v);this._.setValue(y.index,B);var u=this._previousNode;var z=this._nextNode;var w=this.index;var A=y._previousNode;var x=y._nextNode;var t=y.index;this.index=t;this._previousNode=(A===this)?y:A;if(this._previousNode){this._previousNode._nextNode=this}this._nextNode=(x===this)?y:x;if(this._nextNode){this._nextNode._previousNode=this}y.index=w;y._previousNode=(u===y)?this:u;if(y._previousNode){y._previousNode._nextNode=y}y._nextNode=(z===y)?this:z;if(y._nextNode){y._nextNode._previousNode=y}if(this.index===this._.firstIndex){this._.firstNode=this}else{if(this.index===this._.firstIndex+this._.array.length-1){this._.lastNode=this}}if(y.index===this._.firstIndex){this._.firstNode=y}else{if(y.index===this._.firstIndex+this._.array.length-1){this._.lastNode=y}}};j.prototype.get=function p(){return this._.getValue(this.index)};j.prototype.getSize=function d(){var t=this.get();return t?t.getSize():null};j.prototype.render=function r(){var t=this.get();return t?t.render.apply(t,arguments):null};a.exports=j});define("famous/math/Utilities",["require","exports","module"],function(b,a,d){var c={};c.clamp=function f(h,g){return Math.max(Math.min(h,g[1]),g[0])};c.length=function e(j){var h=0;for(var g=0;g<j.length;g++){h+=j[g]*j[g]}return Math.sqrt(h)};d.exports=c});define("famous/inputs/GenericSync",["require","exports","module","famous/core/EventHandler"],function(c,f,b){var i=c("famous/core/EventHandler");function j(l,m){this._eventInput=new i();this._eventOutput=new i();i.setInputHandler(this,this._eventInput);i.setOutputHandler(this,this._eventOutput);this._syncs={};if(l){this.addSync(l)}if(m){this.setOptions(m)}}j.DIRECTION_X=0;j.DIRECTION_Y=1;j.DIRECTION_Z=2;var a={};j.register=function h(m){for(var l in m){if(a[l]){if(a[l]===m[l]){return}else{throw new Error("this key is registered to a different sync class")}}else{a[l]=m[l]}}};j.prototype.setOptions=function(l){for(var m in this._syncs){this._syncs[m].setOptions(l)}};j.prototype.pipeSync=function e(l){var m=this._syncs[l];this._eventInput.pipe(m);m.pipe(this._eventOutput)};j.prototype.unpipeSync=function d(l){var m=this._syncs[l];this._eventInput.unpipe(m);m.unpipe(this._eventOutput)};function k(m,l){if(!a[m]){return}this._syncs[m]=new (a[m])(l);this.pipeSync(m)}j.prototype.addSync=function g(l){if(l instanceof Array){for(var n=0;n<l.length;n++){k.call(this,l[n])}}else{if(l instanceof Object){for(var m in l){k.call(this,m,l[m])}}}};b.exports=j});define("famous/inputs/MouseSync",["require","exports","module","famous/core/EventHandler"],function(b,e,a){var m=b("famous/core/EventHandler");function g(n){this.options=Object.create(g.DEFAULT_OPTIONS);if(n){this.setOptions(n)}this._eventInput=new m();this._eventOutput=new m();m.setInputHandler(this,this._eventInput);m.setOutputHandler(this,this._eventOutput);this._eventInput.on("mousedown",l.bind(this));this._eventInput.on("mousemove",c.bind(this));this._eventInput.on("mouseup",j.bind(this));if(this.options.propogate){this._eventInput.on("mouseleave",i.bind(this))}else{this._eventInput.on("mouseleave",j.bind(this))}this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0};this._position=null;this._prevCoord=undefined;this._prevTime=undefined;this._down=false;this._moved=false}g.DEFAULT_OPTIONS={direction:undefined,rails:false,scale:1,propogate:true};g.DIRECTION_X=0;g.DIRECTION_Y=1;var f=8;var d=Date.now;function l(p){var s;var o;p.preventDefault();var n=p.clientX;var r=p.clientY;this._prevCoord=[n,r];this._prevTime=d();this._down=true;this._move=false;if(this.options.direction!==undefined){this._position=0;s=0;o=0}else{this._position=[0,0];s=[0,0];o=[0,0]}var q=this._payload;q.delta=s;q.position=this._position;q.velocity=o;q.clientX=n;q.clientY=r;q.offsetX=p.offsetX;q.offsetY=p.offsetY;this._eventOutput.emit("start",q)}function c(n){if(!this._prevCoord){return}var q=this._prevCoord;var o=this._prevTime;var B=n.clientX;var u=n.clientY;var r=d();var A=B-q[0];var v=u-q[1];if(this.options.rails){if(Math.abs(A)>Math.abs(v)){v=0}else{A=0}}var D=Math.max(r-o,f);var z=A/D;var t=v/D;var p=this.options.scale;var s;var w;if(this.options.direction===g.DIRECTION_X){w=p*A;s=p*z;this._position+=w}else{if(this.options.direction===g.DIRECTION_Y){w=p*v;s=p*t;this._position+=w}else{w=[p*A,p*v];s=[p*z,p*t];this._position[0]+=w[0];this._position[1]+=w[1]}}var C=this._payload;C.delta=w;C.position=this._position;C.velocity=s;C.clientX=B;C.clientY=u;C.offsetX=n.offsetX;C.offsetY=n.offsetY;this._eventOutput.emit("update",C);this._prevCoord=[B,u];this._prevTime=r;this._move=true}function j(n){if(!this._down){return}this._eventOutput.emit("end",this._payload);this._prevCoord=undefined;this._prevTime=undefined;this._down=false;this._move=false}function i(o){if(!this._down||!this._move){return}var p=c.bind(this);var n=function(q){j.call(this,q);document.removeEventListener("mousemove",p);document.removeEventListener("mouseup",n)}.bind(this,o);document.addEventListener("mousemove",p);document.addEventListener("mouseup",n)}g.prototype.getOptions=function k(){return this.options};g.prototype.setOptions=function h(n){if(n.direction!==undefined){this.options.direction=n.direction}if(n.rails!==undefined){this.options.rails=n.rails}if(n.scale!==undefined){this.options.scale=n.scale}if(n.propogate!==undefined){this.options.propogate=n.propogate}};a.exports=g});define("famous/inputs/TouchTracker",["require","exports","module","famous/core/EventHandler"],function(c,g,b){var k=c("famous/core/EventHandler");var f=Date.now;function l(o,m,n){return{x:o.clientX,y:o.clientY,identifier:o.identifier,origin:m.origin,timestamp:f(),count:m.touches.length,history:n}}function i(n){for(var m=0;m<n.changedTouches.length;m++){var p=n.changedTouches[m];var o=l(p,n,null);this.eventOutput.emit("trackstart",o);if(!this.selective&&!this.touchHistory[p.identifier]){this.track(o)}}}function d(n){for(var m=0;m<n.changedTouches.length;m++){var q=n.changedTouches[m];var p=this.touchHistory[q.identifier];if(p){var o=l(q,n,p);this.touchHistory[q.identifier].push(o);this.eventOutput.emit("trackmove",o)}}}function h(n){for(var m=0;m<n.changedTouches.length;m++){var q=n.changedTouches[m];var p=this.touchHistory[q.identifier];if(p){var o=l(q,n,p);this.eventOutput.emit("trackend",o);delete this.touchHistory[q.identifier]}}}function e(){for(var m in this.touchHistory){var n=this.touchHistory[m];this.eventOutput.emit("trackend",{touch:n[n.length-1].touch,timestamp:Date.now(),count:0,history:n});delete this.touchHistory[m]}}function j(m){this.selective=m;this.touchHistory={};this.eventInput=new k();this.eventOutput=new k();k.setInputHandler(this,this.eventInput);k.setOutputHandler(this,this.eventOutput);this.eventInput.on("touchstart",i.bind(this));this.eventInput.on("touchmove",d.bind(this));this.eventInput.on("touchend",h.bind(this));this.eventInput.on("touchcancel",h.bind(this));this.eventInput.on("unpipe",e.bind(this))}j.prototype.track=function a(m){this.touchHistory[m.identifier]=[m]};b.exports=j});define("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","famous/core/EventHandler"],function(b,e,a){var l=b("./TouchTracker");var k=b("famous/core/EventHandler");function d(m){this.options=Object.create(d.DEFAULT_OPTIONS);if(m){this.setOptions(m)}this._eventOutput=new k();this._touchTracker=new l();k.setOutputHandler(this,this._eventOutput);k.setInputHandler(this,this._touchTracker);this._touchTracker.on("trackstart",j.bind(this));this._touchTracker.on("trackmove",c.bind(this));this._touchTracker.on("trackend",h.bind(this));this._payload={delta:null,position:null,velocity:null,clientX:undefined,clientY:undefined,count:0,touch:undefined};this._position=null}d.DEFAULT_OPTIONS={direction:undefined,rails:false,scale:1};d.DIRECTION_X=0;d.DIRECTION_Y=1;var f=8;function j(n){var m;var p;if(this.options.direction!==undefined){this._position=0;m=0;p=0}else{this._position=[0,0];m=[0,0];p=[0,0]}var o=this._payload;o.delta=p;o.position=this._position;o.velocity=m;o.clientX=n.x;o.clientY=n.y;o.count=n.count;o.touch=n.identifier;this._eventOutput.emit("start",o)}function c(q){var s=q.history;var p=s[s.length-1];var n=s[s.length-2];var m=n.timestamp;var r=p.timestamp;var y=p.x-n.x;var v=p.y-n.y;if(this.options.rails){if(Math.abs(y)>Math.abs(v)){v=0}else{y=0}}var A=Math.max(r-m,f);var x=y/A;var u=v/A;var o=this.options.scale;var t;var w;if(this.options.direction===d.DIRECTION_X){w=o*y;t=o*x;this._position+=w}else{if(this.options.direction===d.DIRECTION_Y){w=o*v;t=o*u;this._position+=w}else{w=[o*y,o*v];t=[o*x,o*u];this._position[0]+=w[0];this._position[1]+=w[1]}}var z=this._payload;z.delta=w;z.velocity=t;z.position=this._position;z.clientX=q.x;z.clientY=q.y;z.count=q.count;z.touch=q.identifier;this._eventOutput.emit("update",z)}function h(m){this._payload.count=m.count;this._eventOutput.emit("end",this._payload)}d.prototype.setOptions=function g(m){if(m.direction!==undefined){this.options.direction=m.direction}if(m.rails!==undefined){this.options.rails=m.rails}if(m.scale!==undefined){this.options.scale=m.scale}};d.prototype.getOptions=function i(){return this.options};a.exports=d});define("famous/modifiers/Draggable",["require","exports","module","famous/core/Transform","famous/transitions/Transitionable","famous/core/EventHandler","famous/math/Utilities","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/TouchSync"],function(k,z,a){var n=k("famous/core/Transform");var g=k("famous/transitions/Transitionable");var l=k("famous/core/EventHandler");var u=k("famous/math/Utilities");var t=k("famous/inputs/GenericSync");var y=k("famous/inputs/MouseSync");var p=k("famous/inputs/TouchSync");t.register({mouse:y,touch:p});function i(A){this.options=Object.create(i.DEFAULT_OPTIONS);if(A){this.setOptions(A)}this._positionState=new g([0,0]);this._differential=[0,0];this._active=true;this.sync=new t(["mouse","touch"],{scale:this.options.scale});this.eventOutput=new l();l.setInputHandler(this,this.sync);l.setOutputHandler(this,this.eventOutput);x.call(this)}var h={x:1,y:2};i.DIRECTION_X=h.x;i.DIRECTION_Y=h.y;var e=u.clamp;i.DEFAULT_OPTIONS={projection:h.x|h.y,scale:1,xRange:null,yRange:null,snapX:0,snapY:0,transition:{duration:0}};function o(D){var E=this.options;var B=E.projection;var G=E.snapX;var F=E.snapY;var C=(B&h.x)?D[0]:0;var A=(B&h.y)?D[1]:0;if(G>0){C-=C%G}if(F>0){A-=A%F}return[C,A]}function r(){if(!this._active){return}if(this._positionState.isActive()){this._positionState.halt()}this.eventOutput.emit("start",{position:this.getPosition()})}function m(C){if(!this._active){return}var B=this.options;this._differential=C.position;var D=o.call(this,this._differential);this._differential[0]-=D[0];this._differential[1]-=D[1];var F=this.getPosition();F[0]+=D[0];F[1]+=D[1];if(B.xRange){var A=[B.xRange[0]+0.5*B.snapX,B.xRange[1]-0.5*B.snapX];F[0]=e(F[0],A)}if(B.yRange){var E=[B.yRange[0]+0.5*B.snapY,B.yRange[1]-0.5*B.snapY];F[1]=e(F[1],E)}this.eventOutput.emit("update",{position:F})}function b(){if(!this._active){return}this.eventOutput.emit("end",{position:this.getPosition()})}function x(){this.sync.on("start",r.bind(this));this.sync.on("update",m.bind(this));this.sync.on("end",b.bind(this))}i.prototype.setOptions=function s(B){var A=this.options;if(B.projection!==undefined){var C=B.projection;this.options.projection=0;["x","y"].forEach(function(D){if(C.indexOf(D)!==-1){A.projection|=h[D]}})}if(B.scale!==undefined){A.scale=B.scale;this.sync.setOptions({scale:B.scale})}if(B.xRange!==undefined){A.xRange=B.xRange}if(B.yRange!==undefined){A.yRange=B.yRange}if(B.snapX!==undefined){A.snapX=B.snapX}if(B.snapY!==undefined){A.snapY=B.snapY}};i.prototype.getPosition=function v(){return this._positionState.get()};i.prototype.setRelativePosition=function j(A,D,E){var C=this.getPosition();var B=[C[0]+A[0],C[1]+A[1]];this.setPosition(B,D,E)};i.prototype.setPosition=function d(A,B,C){if(this._positionState.isActive()){this._positionState.halt()}this._positionState.set(A,B,C)};i.prototype.activate=function f(){this._active=true};i.prototype.deactivate=function c(){this._active=false};i.prototype.toggle=function q(){this._active=!this._active};i.prototype.modify=function w(A){var B=this.getPosition();return{transform:n.translate(B[0],B[1]),target:A}};a.exports=i});define("famous/modifiers/Fader",["require","exports","module","famous/transitions/Transitionable","famous/core/OptionsManager"],function(c,f,b){var g=c("famous/transitions/Transitionable");var a=c("famous/core/OptionsManager");function d(o,n){this.options=Object.create(d.DEFAULT_OPTIONS);this._optionsManager=new a(this.options);if(o){this.setOptions(o)}if(!n){n=0}this.transitionHelper=new g(n)}d.DEFAULT_OPTIONS={cull:false,transition:true,pulseInTransition:true,pulseOutTransition:true};d.prototype.setOptions=function j(n){return this._optionsManager.setOptions(n)};d.prototype.show=function m(n,o){n=n||this.options.transition;this.set(1,n,o)};d.prototype.hide=function i(n,o){n=n||this.options.transition;this.set(0,n,o)};d.prototype.set=function l(n,o,p){this.halt();this.transitionHelper.set(n,o,p)};d.prototype.halt=function e(){this.transitionHelper.halt()};d.prototype.isVisible=function h(){return(this.transitionHelper.get()>0)};d.prototype.modify=function k(o){var n=this.transitionHelper.get();if(this.options.cull&&!n){return undefined}else{return{opacity:n,target:o}}};b.exports=d});define("famous/modifiers/ModifierChain",["require","exports","module"],function(b,a,c){function d(){this._chain=[];if(arguments.length){this.addModifier.apply(this,arguments)}}d.prototype.addModifier=function e(h){Array.prototype.push.apply(this._chain,arguments)};d.prototype.removeModifier=function g(h){var i=this._chain.indexOf(h);if(i<0){return}this._chain.splice(i,1)};d.prototype.modify=function f(j){var l=this._chain;var h=j;for(var k=0;k<l.length;k++){h=l[k].modify(h)}return h};c.exports=d});define("famous/modifiers/StateModifier",["require","exports","module","famous/core/Modifier","famous/core/Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(h,s,b){var a=h("famous/core/Modifier");var l=h("famous/core/Transform");var d=h("famous/transitions/Transitionable");var t=h("famous/transitions/TransitionableTransform");function i(u){this._transformState=new t(l.identity);this._opacityState=new d(1);this._originState=new d([0,0]);this._alignState=new d([0,0]);this._sizeState=new d([0,0]);this._modifier=new a({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null});this._hasOrigin=false;this._hasAlign=false;this._hasSize=false;if(u){if(u.transform){this.setTransform(u.transform)}if(u.opacity!==undefined){this.setOpacity(u.opacity)}if(u.origin){this.setOrigin(u.origin)}if(u.align){this.setAlign(u.align)}if(u.size){this.setSize(u.size)}}}i.prototype.setTransform=function f(u,v,w){this._transformState.set(u,v,w);return this};i.prototype.setOpacity=function o(u,v,w){this._opacityState.set(u,v,w);return this};i.prototype.setOrigin=function m(u,v,w){if(u===null){if(this._hasOrigin){this._modifier.originFrom(null);this._hasOrigin=false}return this}else{if(!this._hasOrigin){this._hasOrigin=true;this._modifier.originFrom(this._originState)}}this._originState.set(u,v,w);return this};i.prototype.setAlign=function m(w,u,v){if(w===null){if(this._hasAlign){this._modifier.alignFrom(null);this._hasAlign=false}return this}else{if(!this._hasAlign){this._hasAlign=true;this._modifier.alignFrom(this._alignState)}}this._alignState.set(w,u,v);return this};i.prototype.setSize=function p(u,v,w){if(u===null){if(this._hasSize){this._modifier.sizeFrom(null);this._hasSize=false}return this}else{if(!this._hasSize){this._hasSize=true;this._modifier.sizeFrom(this._sizeState)}}this._sizeState.set(u,v,w);return this};i.prototype.halt=function k(){this._transformState.halt();this._opacityState.halt();this._originState.halt();this._alignState.halt();this._sizeState.halt()};i.prototype.getTransform=function n(){return this._transformState.get()};i.prototype.getFinalTransform=function g(){return this._transformState.getFinal()};i.prototype.getOpacity=function j(){return this._opacityState.get()};i.prototype.getOrigin=function q(){return this._hasOrigin?this._originState.get():null};i.prototype.getAlign=function e(){return this._hasAlign?this._alignState.get():null};i.prototype.getSize=function c(){return this._hasSize?this._sizeState.get():null};i.prototype.modify=function r(u){return this._modifier.modify(u)};b.exports=i});define("famous/math/Vector",["require","exports","module"],function(n,E,d){function a(F,H,G){if(arguments.length===1){this.set(F)}else{this.x=F||0;this.y=H||0;this.z=G||0}return this}var i=new a(0,0,0);a.prototype.add=function x(F){return f.call(i,this.x+F.x,this.y+F.y,this.z+F.z)};a.prototype.sub=function m(F){return f.call(i,this.x-F.x,this.y-F.y,this.z-F.z)};a.prototype.mult=function j(F){return f.call(i,F*this.x,F*this.y,F*this.z)};a.prototype.div=function w(F){return this.mult(1/F)};a.prototype.cross=function g(G){var F=this.x;var L=this.y;var K=this.z;var J=G.x;var I=G.y;var H=G.z;return f.call(i,K*I-L*H,F*H-K*J,L*J-F*I)};a.prototype.equals=function t(F){return(F.x===this.x&&F.y===this.y&&F.z===this.z)};a.prototype.rotateX=function s(H){var F=this.x;var K=this.y;var J=this.z;var I=Math.cos(H);var G=Math.sin(H);return f.call(i,F,K*I-J*G,K*G+J*I)};a.prototype.rotateY=function r(H){var F=this.x;var K=this.y;var J=this.z;var I=Math.cos(H);var G=Math.sin(H);return f.call(i,J*G+F*I,K,J*I-F*G)};a.prototype.rotateZ=function q(H){var F=this.x;var K=this.y;var J=this.z;var I=Math.cos(H);var G=Math.sin(H);return f.call(i,F*I-K*G,F*G+K*I,J)};a.prototype.dot=function z(F){return this.x*F.x+this.y*F.y+this.z*F.z};a.prototype.normSquared=function h(){return this.dot(this)};a.prototype.norm=function k(){return Math.sqrt(this.normSquared())};a.prototype.normalize=function A(G){if(arguments.length===0){G=1}var F=this.norm();if(F>1e-7){return c.call(i,this.mult(G/F))}else{return f.call(i,G,0,0)}};a.prototype.clone=function B(){return new a(this)};a.prototype.isZero=function v(){return !(this.x||this.y||this.z)};function f(F,H,G){this.x=F;this.y=H;this.z=G;return this}function D(F){return f.call(this,F[0],F[1],F[2]||0)}function c(F){return f.call(this,F.x,F.y,F.z)}function b(F){return f.call(this,F,0,0)}a.prototype.set=function u(F){if(F instanceof Array){return D.call(this,F)}if(F instanceof a){return c.call(this,F)}if(typeof F==="number"){return b.call(this,F)}};a.prototype.setXYZ=function(F,H,G){return f.apply(this,arguments)};a.prototype.set1D=function(F){return b.call(this,F)};a.prototype.put=function l(F){c.call(F,i)};a.prototype.clear=function y(){return f.call(this,0,0,0)};a.prototype.cap=function p(G){if(G===Infinity){return c.call(i,this)}var F=this.norm();if(F>G){return c.call(i,this.mult(G/F))}else{return c.call(i,this)}};a.prototype.project=function e(F){return F.mult(this.dot(F))};a.prototype.reflectAcross=function o(F){F.normalize().put(F);return c(i,this.sub(this.project(F).mult(2)))};a.prototype.get=function C(){return[this.x,this.y,this.z]};a.prototype.get1D=function(){return this.x};d.exports=a});define("famous/math/Matrix",["require","exports","module","./Vector"],function(e,f,c){var g=e("./Vector");function a(n){this.values=n||[[1,0,0],[0,1,0],[0,0,1]];return this}var m=new a();var h=new g();a.prototype.get=function d(){return this.values};a.prototype.set=function l(n){this.values=n};a.prototype.vectorMultiply=function k(B){var x=this.get();var C=B.x;var z=B.y;var y=B.z;var p=x[0];var o=x[1];var n=x[2];var E=p[0];var D=p[1];var A=p[2];var w=o[0];var u=o[1];var t=o[2];var s=n[0];var r=n[1];var q=n[2];return h.setXYZ(E*C+D*z+A*y,w*C+u*z+t*y,s*C+r*z+q*y)};a.prototype.multiply=function b(r){var t=this.get();var n=[[]];for(var q=0;q<3;q++){n[q]=[];for(var p=0;p<3;p++){var s=0;for(var o=0;o<3;o++){s+=t[q][o]*r[o][p]}n[q][p]=s}}return m.set(n)};a.prototype.transpose=function i(){var n=[];var q=this.get();for(var p=0;p<3;p++){for(var o=0;o<3;o++){n[p][o]=q[o][p]}}return m.set(n)};a.prototype.clone=function j(){var n=this.get();var p=[];for(var o=0;o<3;o++){p[o]=n[o].slice()}return new a(p)};c.exports=a});define("famous/math/Quaternion",["require","exports","module","./Matrix"],function(n,E,c){var y=n("./Matrix");function p(H,G,J,I){if(arguments.length===1){this.set(H)}else{this.w=(H!==undefined)?H:1;this.x=(G!==undefined)?G:0;this.y=(J!==undefined)?J:0;this.z=(I!==undefined)?I:0}return this}var b=new p(1,0,0,0);p.prototype.add=function u(G){return b.setWXYZ(this.w+G.w,this.x+G.x,this.y+G.y,this.z+G.z)};p.prototype.sub=function m(G){return b.setWXYZ(this.w-G.w,this.x-G.x,this.y-G.y,this.z-G.z)};p.prototype.scalarDivide=function r(G){return this.scalarMultiply(1/G)};p.prototype.scalarMultiply=function h(G){return b.setWXYZ(this.w*G,this.x*G,this.y*G,this.z*G)};p.prototype.multiply=function q(G){var I=this.x;var O=this.y;var L=this.z;var M=this.w;var H=G.x;var N=G.y;var J=G.z;var K=G.w||0;return b.setWXYZ(M*K-I*H-O*N-L*J,I*K+H*M+N*L-O*J,O*K+N*M+I*J-H*L,L*K+J*M+H*O-I*N)};var l=new p(1,0,0,0);p.prototype.rotateVector=function o(G){l.set(this.conj());return b.set(this.multiply(G).multiply(l))};p.prototype.inverse=function f(){return b.set(this.conj().scalarDivide(this.normSquared()))};p.prototype.negate=function e(){return this.scalarMultiply(-1)};p.prototype.conj=function l(){return b.setWXYZ(this.w,-this.x,-this.y,-this.z)};p.prototype.normalize=function B(G){G=(G===undefined)?1:G;return this.scalarDivide(G*this.norm())};p.prototype.makeFromAngleAndAxis=function d(J,H){var K=H.normalize();var G=J*0.5;var I=-Math.sin(G);this.x=I*K.x;this.y=I*K.y;this.z=I*K.z;this.w=Math.cos(G);return this};p.prototype.setWXYZ=function a(H,G,J,I){b.clear();this.w=H;this.x=G;this.y=J;this.z=I;return this};p.prototype.set=function t(G){if(G instanceof Array){this.w=G[0];this.x=G[1];this.y=G[2];this.z=G[3]}else{this.w=G.w;this.x=G.x;this.y=G.y;this.z=G.z}if(this!==b){b.clear()}return this};p.prototype.put=function j(G){G.set(b)};p.prototype.clone=function C(){return new p(this)};p.prototype.clear=function w(){this.w=1;this.x=0;this.y=0;this.z=0;return this};p.prototype.isEqual=function A(G){return G.w===this.w&&G.x===this.x&&G.y===this.y&&G.z===this.z};p.prototype.dot=function v(G){return this.w*G.w+this.x*G.x+this.y*G.y+this.z*G.z};p.prototype.normSquared=function g(){return this.dot(this)};p.prototype.norm=function i(){return Math.sqrt(this.normSquared())};p.prototype.isZero=function s(){return !(this.x||this.y||this.z)};p.prototype.getTransform=function z(){var I=this.normalize(1);var G=I.x;var K=I.y;var J=I.z;var H=I.w;return[1-2*K*K-2*J*J,2*G*K-2*J*H,2*G*J+2*K*H,0,2*G*K+2*J*H,1-2*G*G-2*J*J,2*K*J-2*G*H,0,2*G*J-2*K*H,2*K*J+2*G*H,1-2*G*G-2*K*K,0,0,0,0,1]};var D=new y();p.prototype.getMatrix=function x(){var I=this.normalize(1);var G=I.x;var K=I.y;var J=I.z;var H=I.w;return D.set([[1-2*K*K-2*J*J,2*G*K+2*J*H,2*G*J-2*K*H],[2*G*K-2*J*H,1-2*G*G-2*J*J,2*K*J+2*G*H],[2*G*J+2*K*H,2*K*J-2*G*H,1-2*G*G-2*K*K]])};var F=0.00001;p.prototype.slerp=function k(K,H){var M;var L;var G;var J;var I;L=this.dot(K);if((1-L)>F){M=Math.acos(L);G=Math.sin(M);J=Math.sin((1-H)*M)/G;I=Math.sin(H*M)/G}else{J=1-H;I=H}return b.set(this.scalarMultiply(J/I).add(K).multiply(I))};c.exports=p});define("famous/math/Random",["require","exports","module"],function(d,e,a){var j=Math.random;function i(m,l){return m+j()*(l-m)}function k(m,l){return(m+j()*(l-m+1))>>0}var g={};g.integer=function h(o,m,p){o=(o!==undefined)?o:0;m=(m!==undefined)?m:1;if(p!==undefined){var l=[];for(var n=0;n<p;n++){l.push(k(o,m))}return l}else{return k(o,m)}};g.range=function f(o,m,p){o=(o!==undefined)?o:0;m=(m!==undefined)?m:1;if(p!==undefined){var l=[];for(var n=0;n<p;n++){l.push(i(o,m))}return l}else{return i(o,m)}};g.sign=function b(l){l=(l!==undefined)?l:0.5;return(j()<l)?1:-1};g.bool=function c(l){l=(l!==undefined)?l:0.5;return j()<l};a.exports=g});define("famous/events/EventArbiter",["require","exports","module","famous/core/EventHandler"],function(e,b,h){var g=e("famous/core/EventHandler");function f(i){this.dispatchers={};this.currMode=undefined;this.setMode(i)}f.prototype.setMode=function d(j){if(j!==this.currMode){var i=this.currMode;if(this.dispatchers[this.currMode]){this.dispatchers[this.currMode].trigger("unpipe")}this.currMode=j;if(this.dispatchers[j]){this.dispatchers[j].emit("pipe")}this.emit("change",{from:i,to:j})}};f.prototype.forMode=function a(i){if(!this.dispatchers[i]){this.dispatchers[i]=new g()}return this.dispatchers[i]};f.prototype.emit=function c(i,k){if(this.currMode===undefined){return false}if(!k){k={}}var j=this.dispatchers[this.currMode];if(j){return j.trigger(i,k)}};h.exports=f});define("famous/events/EventFilter",["require","exports","module","famous/core/EventHandler"],function(c,a,e){var d=c("famous/core/EventHandler");function f(g){d.call(this);this._condition=g}f.prototype=Object.create(d.prototype);f.prototype.constructor=f;f.prototype.emit=function b(g,h){if(this._condition(g,h)){return d.prototype.emit.apply(this,arguments)}};f.prototype.trigger=f.prototype.emit;e.exports=f});define("famous/events/EventMapper",["require","exports","module","famous/core/EventHandler"],function(d,b,f){var e=d("famous/core/EventHandler");function a(g){e.call(this);this._mappingFunction=g}a.prototype=Object.create(e.prototype);a.prototype.constructor=a;a.prototype.subscribe=null;a.prototype.unsubscribe=null;a.prototype.emit=function c(g,h){var i=this._mappingFunction.apply(this,arguments);if(i&&(i.emit instanceof Function)){i.emit(g,h)}};a.prototype.trigger=a.prototype.emit;f.exports=a});define("famous/physics/PhysicsEngine",["require","exports","module","famous/core/EventHandler"],function(d,K,c){var f=d("famous/core/EventHandler");function l(U){this.options=Object.create(l.DEFAULT_OPTIONS);if(U){this.setOptions(U)}this._particles=[];this._bodies=[];this._agents={};this._forces=[];this._constraints=[];this._buffer=0;this._prevTime=H();this._isSleeping=false;this._eventHandler=null;this._currAgentId=0;this._hasBodies=false}var x=17;var r=1000/120;var s=17;l.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7};var H=(function(){return Date.now})();l.prototype.setOptions=function q(V){for(var U in V){if(this.options[U]){this.options[U]=V[U]}}};l.prototype.addBody=function I(U){U._engine=this;if(U.isBody){this._bodies.push(U);this._hasBodies=true}else{this._particles.push(U)}return U};l.prototype.removeBody=function e(U){var X=(U.isBody)?this._bodies:this._particles;var V=X.indexOf(U);if(V>-1){for(var W=0;W<Object.keys(this._agents).length;W++){this.detachFrom(W,U)}X.splice(V,1)}if(this.getBodies().length===0){this._hasBodies=false}};function i(U){if(U.applyForce){return this._forces}if(U.applyConstraint){return this._constraints}}function S(V,U,W){if(U===undefined){U=this.getParticlesAndBodies()}if(!(U instanceof Array)){U=[U]}this._agents[this._currAgentId]={agent:V,targets:U,source:W};i.call(this,V).push(this._currAgentId);return this._currAgentId++}l.prototype.attach=function n(W,U,X){if(W instanceof Array){var Y=[];for(var V=0;V<W.length;V++){Y[V]=S.call(this,W[V],U,X)}return Y}else{return S.call(this,W,U,X)}};l.prototype.attachTo=function j(U,V){k.call(this,U).targets.push(V)};l.prototype.detach=function Q(X){var V=this.getAgent(X);var W=i.call(this,V);var U=W.indexOf(X);W.splice(U,1);delete this._agents[X]};l.prototype.detachFrom=function O(Y,X){var W=k.call(this,Y);if(W.source===X){this.detach(Y)}else{var U=W.targets;var V=U.indexOf(X);if(V>-1){U.splice(V,1)}}};l.prototype.detachAll=function v(){this._agents={};this._forces=[];this._constraints=[];this._currAgentId=0};function k(U){return this._agents[U]}l.prototype.getAgent=function L(U){return k.call(this,U).agent};l.prototype.getParticles=function F(){return this._particles};l.prototype.getBodies=function t(){return this._bodies};l.prototype.getParticlesAndBodies=function u(){return this.getParticles().concat(this.getBodies())};l.prototype.forEachParticle=function w(W,Y){var X=this.getParticles();for(var V=0,U=X.length;V<U;V++){W.call(this,X[V],Y)}};l.prototype.forEachBody=function E(X,Y){if(!this._hasBodies){return}var V=this.getBodies();for(var W=0,U=V.length;W<U;W++){X.call(this,V[W],Y)}};l.prototype.forEach=function b(U,V){this.forEachParticle(U,V);this.forEachBody(U,V)};function T(U){var V=k.call(this,this._forces[U]);V.agent.applyForce(V.targets,V.source)}function N(){for(var U=this._forces.length-1;U>-1;U--){T.call(this,U)}}function C(U,V){var W=this._agents[this._constraints[U]];return W.agent.applyConstraint(W.targets,W.source,V)}function g(W){var V=0;while(V<this.options.constraintSteps){for(var U=this._constraints.length-1;U>-1;U--){C.call(this,U,W)}V++}}function z(V,U){V.integrateVelocity(U)}function G(U,V){U.integrateAngularMomentum(V);U.updateAngularVelocity()}function D(U,V){U.integrateOrientation(V)}function h(V,U){V.integratePosition(U);V.emit("update",V)}function P(U){N.call(this,U);this.forEach(z,U);this.forEachBody(G,U);g.call(this,U);this.forEachBody(D,U);this.forEach(h,U)}function J(){var V=0;var U=0;this.forEach(function(W){U=W.getEnergy();V+=U;if(U<W.sleepTolerance){W.sleep()}});return V}function m(){var V=0;for(var U=this._forces.length-1;U>-1;U--){V+=this._forces[U].getEnergy()||0}return V}function p(){var V=0;for(var U=this._constraints.length-1;U>-1;U--){V+=this._constraints[U].getEnergy()||0}return V}l.prototype.getEnergy=function R(){return J.call(this)+m.call(this)+p.call(this)};l.prototype.step=function B(){var U=H();var V=U-this._prevTime;this._prevTime=U;if(V<r){return}if(V>s){V=s}P.call(this,x)};l.prototype.isSleeping=function M(){return this._isSleeping};l.prototype.sleep=function a(){this.emit("end",this);this._isSleeping=true};l.prototype.wake=function A(){this._prevTime=H();this.emit("start",this);this._isSleeping=false};l.prototype.emit=function o(U,V){if(this._eventHandler===null){return}this._eventHandler.emit(U,V)};l.prototype.on=function y(V,U){if(this._eventHandler===null){this._eventHandler=new f()}this._eventHandler.on(V,U)};c.exports=l});define("famous/inputs/Accumulator",["require","exports","module","famous/core/EventHandler","famous/transitions/Transitionable"],function(d,f,a){var i=d("famous/core/EventHandler");var g=d("famous/transitions/Transitionable");function e(k,j){if(j===undefined){j="update"}this._state=(k&&k.get&&k.set)?k:new g(k||0);this._eventInput=new i();i.setInputHandler(this,this._eventInput);this._eventInput.on(j,b.bind(this))}function b(k){var m=k.delta;var j=this.get();if(m.constructor===j.constructor){var l=(m instanceof Array)?[j[0]+m[0],j[1]+m[1]]:j+m;this.set(l)}}e.prototype.get=function c(){return this._state.get()};e.prototype.set=function h(j){this._state.set(j)};a.exports=e});define("famous/inputs/DesktopEmulationMode",["require","exports","module"],function(b,a,d){var e="ontouchstart" in window;function c(f){window.addEventListener(f,function(g){g.stopPropagation();return false},true)}if(e){c("mousedown");c("mousemove");c("mouseup");c("mouseleave")}});define("famous/inputs/FastClick",["require","exports","module"],function(c,a,f){if(!window.CustomEvent){return}var h=300;var g=500;var b={};var e={};var d=Date.now;window.addEventListener("touchstart",function(k){var l=d();for(var j=0;j<k.changedTouches.length;j++){var m=k.changedTouches[j];b[m.identifier]=l}});window.addEventListener("touchmove",function(k){for(var j=0;j<k.changedTouches.length;j++){var l=k.changedTouches[j];delete b[l.identifier]}});window.addEventListener("touchend",function(n){var j=d();for(var k=0;k<n.changedTouches.length;k++){var o=n.changedTouches[k];var l=b[o.identifier];if(l&&j-l<h){var m=new window.CustomEvent("click",{bubbles:true,details:o});e[j]=n;n.target.dispatchEvent(m)}delete b[o.identifier]}});window.addEventListener("click",function(m){var k=d();for(var l in e){var j=e[l];if(k-l<g){if(m instanceof window.MouseEvent&&m.target===j.target){m.stopPropagation()}}else{delete e[l]}}},true)});define("famous/inputs/TwoFingerSync",["require","exports","module","famous/core/EventHandler"],function(c,e,b){var h=c("famous/core/EventHandler");function i(){this._eventInput=new h();this._eventOutput=new h();h.setInputHandler(this,this._eventInput);h.setOutputHandler(this,this._eventOutput);this.touchAEnabled=false;this.touchAId=0;this.posA=null;this.timestampA=0;this.touchBEnabled=false;this.touchBId=0;this.posB=null;this.timestampB=0;this._eventInput.on("touchstart",this.handleStart.bind(this));this._eventInput.on("touchmove",this.handleMove.bind(this));this._eventInput.on("touchend",this.handleEnd.bind(this));this._eventInput.on("touchcancel",this.handleEnd.bind(this))}i.calculateAngle=function(j,m){var l=m[0]-j[0];var k=m[1]-j[1];return Math.atan2(k,l)};i.calculateDistance=function(j,m){var l=m[0]-j[0];var k=m[1]-j[1];return Math.sqrt(l*l+k*k)};i.calculateCenter=function(j,k){return[(j[0]+k[0])/2,(j[1]+k[1])/2]};var d=Date.now;i.prototype.handleStart=function g(k){for(var j=0;j<k.changedTouches.length;j++){var l=k.changedTouches[j];if(!this.touchAEnabled){this.touchAId=l.identifier;this.touchAEnabled=true;this.posA=[l.pageX,l.pageY];this.timestampA=d()}else{if(!this.touchBEnabled){this.touchBId=l.identifier;this.touchBEnabled=true;this.posB=[l.pageX,l.pageY];this.timestampB=d();this._startUpdate(k)}}}};i.prototype.handleMove=function a(n){if(!(this.touchAEnabled&&this.touchBEnabled)){return}var m=this.timestampA;var k=this.timestampB;var l;for(var j=0;j<n.changedTouches.length;j++){var o=n.changedTouches[j];if(o.identifier===this.touchAId){this.posA=[o.pageX,o.pageY];this.timestampA=d();l=this.timestampA-m}else{if(o.identifier===this.touchBId){this.posB=[o.pageX,o.pageY];this.timestampB=d();l=this.timestampB-k}}}if(l){this._moveUpdate(l)}};i.prototype.handleEnd=function f(k){for(var j=0;j<k.changedTouches.length;j++){var l=k.changedTouches[j];if(l.identifier===this.touchAId||l.identifier===this.touchBId){if(this.touchAEnabled&&this.touchBEnabled){this._eventOutput.emit("end",{touches:[this.touchAId,this.touchBId],angle:this._angle})}this.touchAEnabled=false;this.touchAId=0;this.touchBEnabled=false;this.touchBId=0}}};b.exports=i});define("famous/inputs/PinchSync",["require","exports","module","./TwoFingerSync"],function(c,d,b){var i=c("./TwoFingerSync");function h(j){i.call(this);this.options=Object.create(h.DEFAULT_OPTIONS);if(j){this.setOptions(j)}this._displacement=0;this._previousDistance=0}h.prototype=Object.create(i.prototype);h.prototype.constructor=h;h.DEFAULT_OPTIONS={scale:1};h.prototype._startUpdate=function e(j){this._previousDistance=i.calculateDistance(this.posA,this.posB);this._displacement=0;this._eventOutput.emit("start",{count:j.touches.length,touches:[this.touchAId,this.touchBId],distance:this._dist,center:i.calculateCenter(this.posA,this.posB)})};h.prototype._moveUpdate=function a(l){var k=i.calculateDistance(this.posA,this.posB);var j=i.calculateCenter(this.posA,this.posB);var n=this.options.scale;var o=n*(k-this._previousDistance);var m=o/l;this._previousDistance=k;this._displacement+=o;this._eventOutput.emit("update",{delta:o,velocity:m,distance:k,displacement:this._displacement,center:j,touches:[this.touchAId,this.touchBId]})};h.prototype.getOptions=function g(){return this.options};h.prototype.setOptions=function f(j){if(j.scale!==undefined){this.options.scale=j.scale}};b.exports=h});define("famous/inputs/RotateSync",["require","exports","module","./TwoFingerSync"],function(c,e,b){var i=c("./TwoFingerSync");function d(j){i.call(this);this.options=Object.create(d.DEFAULT_OPTIONS);if(j){this.setOptions(j)}this._angle=0;this._previousAngle=0}d.prototype=Object.create(i.prototype);d.prototype.constructor=d;d.DEFAULT_OPTIONS={scale:1};d.prototype._startUpdate=function f(k){this._angle=0;this._previousAngle=i.calculateAngle(this.posA,this.posB);var j=i.calculateCenter(this.posA,this.posB);this._eventOutput.emit("start",{count:k.touches.length,angle:this._angle,center:j,touches:[this.touchAId,this.touchBId]})};d.prototype._moveUpdate=function a(n){var o=this.options.scale;var m=i.calculateAngle(this.posA,this.posB);var j=i.calculateCenter(this.posA,this.posB);var l=o*(m-this._previousAngle);var k=l/n;this._angle+=l;this._eventOutput.emit("update",{delta:l,velocity:k,angle:this._angle,center:j,touches:[this.touchAId,this.touchBId]});this._previousAngle=m};d.prototype.getOptions=function h(){return this.options};d.prototype.setOptions=function g(j){if(j.scale!==undefined){this.options.scale=j.scale}};b.exports=d});define("famous/inputs/ScaleSync",["require","exports","module","./TwoFingerSync"],function(c,e,b){var j=c("./TwoFingerSync");function d(k){j.call(this);this.options=Object.create(d.DEFAULT_OPTIONS);if(k){this.setOptions(k)}this._scaleFactor=1;this._startDist=0;this._eventInput.on("pipe",i.bind(this))}d.prototype=Object.create(j.prototype);d.prototype.constructor=d;d.DEFAULT_OPTIONS={scale:1};function i(){this.touchAId=undefined;this.touchBId=undefined}d.prototype._startUpdate=function f(k){this._scaleFactor=1;this._startDist=j.calculateDistance(this.posA,this.posB);this._eventOutput.emit("start",{count:k.touches.length,touches:[this.touchAId,this.touchBId],distance:this._startDist,center:j.calculateCenter(this.posA,this.posB)})};d.prototype._moveUpdate=function a(o){var p=this.options.scale;var l=j.calculateDistance(this.posA,this.posB);var k=j.calculateCenter(this.posA,this.posB);var q=(l-this._startDist)/this._startDist;var n=Math.max(1+p*q,0);var m=(n-this._scaleFactor)/o;this._eventOutput.emit("update",{delta:q,scale:n,velocity:m,distance:l,center:k,touches:[this.touchAId,this.touchBId]});this._scaleFactor=n};d.prototype.getOptions=function h(){return this.options};d.prototype.setOptions=function g(k){if(k.scale!==undefined){this.options.scale=k.scale}};b.exports=d});define("famous/inputs/ScrollSync",["require","exports","module","famous/core/EventHandler","famous/core/Engine"],function(b,e,a){var l=b("famous/core/EventHandler");var k=b("famous/core/Engine");function f(m){this.options=Object.create(f.DEFAULT_OPTIONS);if(m){this.setOptions(m)}this._payload={delta:null,position:null,velocity:null,slip:true};this._eventInput=new l();this._eventOutput=new l();l.setInputHandler(this,this._eventInput);l.setOutputHandler(this,this._eventOutput);this._position=(this.options.direction===undefined)?[0,0]:0;this._prevTime=undefined;this._prevVel=undefined;this._eventInput.on("mousewheel",c.bind(this));this._eventInput.on("wheel",c.bind(this));this._inProgress=false;this._loopBound=false}f.DEFAULT_OPTIONS={direction:undefined,minimumEndSpeed:Infinity,rails:false,scale:1,stallTime:50,lineHeight:40};f.DIRECTION_X=0;f.DIRECTION_Y=1;var g=8;var d=Date.now;function h(){if(this._inProgress&&(d()-this._prevTime)>this.options.stallTime){this._position=(this.options.direction===undefined)?[0,0]:0;this._inProgress=false;var m=(Math.abs(this._prevVel)>=this.options.minimumEndSpeed)?this._prevVel:0;var n=this._payload;n.position=this._position;n.velocity=m;n.slip=true;this._eventOutput.emit("end",n)}}function c(m){m.preventDefault();if(!this._inProgress){this._inProgress=true;w=this._payload;w.slip=true;w.position=this._position;w.clientX=m.clientX;w.clientY=m.clientY;w.offsetX=m.offsetX;w.offsetY=m.offsetY;this._eventOutput.emit("start",w);if(!this._loopBound){k.on("prerender",h.bind(this));this._loopBound=true}}var p=d();var n=this._prevTime||p;var v=(m.wheelDeltaX!==undefined)?m.wheelDeltaX:-m.deltaX;var s=(m.wheelDeltaY!==undefined)?m.wheelDeltaY:-m.deltaY;if(m.deltaMode===1){v*=this.options.lineHeight;s*=this.options.lineHeight}if(this.options.rails){if(Math.abs(v)>Math.abs(s)){s=0}else{v=0}}var x=Math.max(p-n,g);var u=v/x;var r=s/x;var o=this.options.scale;var q;var t;if(this.options.direction===f.DIRECTION_X){t=o*v;q=o*u;this._position+=t}else{if(this.options.direction===f.DIRECTION_Y){t=o*s;q=o*r;this._position+=t}else{t=[o*v,o*s];q=[o*u,o*r];this._position[0]+=t[0];this._position[1]+=t[1]}}var w=this._payload;w.delta=t;w.velocity=q;w.position=this._position;w.slip=true;this._eventOutput.emit("update",w);this._prevTime=p;this._prevVel=q}f.prototype.getOptions=function j(){return this.options};f.prototype.setOptions=function i(m){if(m.direction!==undefined){this.options.direction=m.direction}if(m.minimumEndSpeed!==undefined){this.options.minimumEndSpeed=m.minimumEndSpeed}if(m.rails!==undefined){this.options.rails=m.rails}if(m.scale!==undefined){this.options.scale=m.scale}if(m.stallTime!==undefined){this.options.stallTime=m.stallTime}};a.exports=f});define("famous/transitions/CachedMap",["require","exports","module"],function(c,a,e){function f(g){this._map=g||null;this._cachedOutput=null;this._cachedInput=Number.NaN}f.create=function d(h){var g=new f(h);return g.get.bind(g)};f.prototype.get=function b(g){if(g!==this._cachedInput){this._cachedInput=g;this._cachedOutput=this._map(g)}return this._cachedOutput};e.exports=f});define("famous/transitions/Easing",["require","exports","module"],function(b,a,c){var d={inQuad:function(e){return e*e},outQuad:function(e){return -(e-=1)*e+1},inOutQuad:function(e){if((e/=0.5)<1){return 0.5*e*e}return -0.5*((--e)*(e-2)-1)},inCubic:function(e){return e*e*e},outCubic:function(e){return((--e)*e*e+1)},inOutCubic:function(e){if((e/=0.5)<1){return 0.5*e*e*e}return 0.5*((e-=2)*e*e+2)},inQuart:function(e){return e*e*e*e},outQuart:function(e){return -((--e)*e*e*e-1)},inOutQuart:function(e){if((e/=0.5)<1){return 0.5*e*e*e*e}return -0.5*((e-=2)*e*e*e-2)},inQuint:function(e){return e*e*e*e*e},outQuint:function(e){return((--e)*e*e*e*e+1)},inOutQuint:function(e){if((e/=0.5)<1){return 0.5*e*e*e*e*e}return 0.5*((e-=2)*e*e*e*e+2)},inSine:function(e){return -1*Math.cos(e*(Math.PI/2))+1},outSine:function(e){return Math.sin(e*(Math.PI/2))},inOutSine:function(e){return -0.5*(Math.cos(Math.PI*e)-1)},inExpo:function(e){return(e===0)?0:Math.pow(2,10*(e-1))},outExpo:function(e){return(e===1)?1:(-Math.pow(2,-10*e)+1)},inOutExpo:function(e){if(e===0){return 0}if(e===1){return 1}if((e/=0.5)<1){return 0.5*Math.pow(2,10*(e-1))}return 0.5*(-Math.pow(2,-10*--e)+2)},inCirc:function(e){return -(Math.sqrt(1-e*e)-1)},outCirc:function(e){return Math.sqrt(1-(--e)*e)},inOutCirc:function(e){if((e/=0.5)<1){return -0.5*(Math.sqrt(1-e*e)-1)}return 0.5*(Math.sqrt(1-(e-=2)*e)+1)},inElastic:function(f){var g=1.70158;var h=0;var e=1;if(f===0){return 0}if(f===1){return 1}if(!h){h=0.3}g=h/(2*Math.PI)*Math.asin(1/e);return -(e*Math.pow(2,10*(f-=1))*Math.sin((f-g)*(2*Math.PI)/h))},outElastic:function(f){var g=1.70158;var h=0;var e=1;if(f===0){return 0}if(f===1){return 1}if(!h){h=0.3}g=h/(2*Math.PI)*Math.asin(1/e);return e*Math.pow(2,-10*f)*Math.sin((f-g)*(2*Math.PI)/h)+1},inOutElastic:function(f){var g=1.70158;var h=0;var e=1;if(f===0){return 0}if((f/=0.5)===2){return 1}if(!h){h=(0.3*1.5)}g=h/(2*Math.PI)*Math.asin(1/e);if(f<1){return -0.5*(e*Math.pow(2,10*(f-=1))*Math.sin((f-g)*(2*Math.PI)/h))}return e*Math.pow(2,-10*(f-=1))*Math.sin((f-g)*(2*Math.PI)/h)*0.5+1},inBack:function(e,f){if(f===undefined){f=1.70158}return e*e*((f+1)*e-f)},outBack:function(e,f){if(f===undefined){f=1.70158}return((--e)*e*((f+1)*e+f)+1)},inOutBack:function(e,f){if(f===undefined){f=1.70158}if((e/=0.5)<1){return 0.5*(e*e*(((f*=(1.525))+1)*e-f))}return 0.5*((e-=2)*e*(((f*=(1.525))+1)*e+f)+2)},inBounce:function(e){return 1-d.outBounce(1-e)},outBounce:function(e){if(e<(1/2.75)){return(7.5625*e*e)}else{if(e<(2/2.75)){return(7.5625*(e-=(1.5/2.75))*e+0.75)}else{if(e<(2.5/2.75)){return(7.5625*(e-=(2.25/2.75))*e+0.9375)}else{return(7.5625*(e-=(2.625/2.75))*e+0.984375)}}}},inOutBounce:function(e){if(e<0.5){return d.inBounce(e*2)*0.5}return d.outBounce(e*2-1)*0.5+0.5}};c.exports=d});define("famous/physics/integrators/SymplecticEuler",["require","exports","module","famous/core/OptionsManager"],function(e,g,c){var a=e("famous/core/OptionsManager");function i(l){this.options=Object.create(i.DEFAULT_OPTIONS);this._optionsManager=new a(this.options);if(l){this.setOptions(l)}}i.DEFAULT_OPTIONS={velocityCap:undefined,angularVelocityCap:undefined};i.prototype.setOptions=function h(l){this._optionsManager.patch(l)};i.prototype.getOptions=function j(){return this._optionsManager.value()};i.prototype.integrateVelocity=function b(l,o){var n=l.velocity;var m=l.inverseMass;var p=l.force;if(p.isZero()){return}n.add(p.mult(o*m)).put(n);p.clear()};i.prototype.integratePosition=function d(l,n){var o=l.position;var m=l.velocity;if(this.options.velocityCap){m.cap(this.options.velocityCap).put(m)}o.add(m.mult(n)).put(o)};i.prototype.integrateAngularMomentum=function f(m,o){var l=m.angularMomentum;var n=m.torque;if(n.isZero()){return}if(this.options.angularVelocityCap){n.cap(this.options.angularVelocityCap).put(n)}l.add(n.mult(o)).put(l);n.clear()};i.prototype.integrateOrientation=function k(l,n){var o=l.orientation;var m=l.angularVelocity;if(m.isZero()){return}o.add(o.multiply(m).scalarMultiply(0.5*n)).put(o)};c.exports=i});define("famous/physics/bodies/Particle",["require","exports","module","famous/math/Vector","famous/core/Transform","famous/core/EventHandler","../integrators/SymplecticEuler"],function(g,F,e){var u=g("famous/math/Vector");var J=g("famous/core/Transform");var i=g("famous/core/EventHandler");var p=g("../integrators/SymplecticEuler");function I(M){M=M||{};this.position=new u();this.velocity=new u();this.force=new u();var N=I.DEFAULT_OPTIONS;this.setPosition(M.position||N.position);this.setVelocity(M.velocity||N.velocity);this.force.set(M.force||[0,0,0]);this.mass=(M.mass!==undefined)?M.mass:N.mass;this.axis=(M.axis!==undefined)?M.axis:N.axis;this.inverseMass=1/this.mass;this._isSleeping=false;this._engine=null;this._eventOutput=null;this._positionGetter=null;this.transform=J.identity.slice();this._spec={transform:this.transform,target:null}}I.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1,axis:undefined};I.SLEEP_TOLERANCE=1e-7;I.AXES={X:0,Y:1,Z:2};I.INTEGRATOR=new p();var C={start:"start",update:"update",end:"end"};var E=(function(){return Date.now})();I.prototype.sleep=function b(){if(this._isSleeping){return}this.emit(C.end,this);this._isSleeping=true};I.prototype.wake=function A(){if(!this._isSleeping){return}this.emit(C.start,this);this._isSleeping=false;this._prevTime=E()};I.prototype.isBody=false;I.prototype.setPosition=function G(M){this.position.set(M)};I.prototype.setPosition1D=function f(M){this.position.x=M};I.prototype.getPosition=function x(){if(this._positionGetter instanceof Function){this.setPosition(this._positionGetter())}this._engine.step();return this.position.get()};I.prototype.getPosition1D=function B(){this._engine.step();return this.position.x};I.prototype.positionFrom=function h(M){this._positionGetter=M};I.prototype.setVelocity=function q(M){this.velocity.set(M);this.wake()};I.prototype.setVelocity1D=function v(M){this.velocity.x=M;this.wake()};I.prototype.getVelocity=function d(){return this.velocity.get()};I.prototype.getVelocity1D=function j(){return this.velocity.x};I.prototype.setMass=function o(M){this.mass=M;this.inverseMass=1/M};I.prototype.getMass=function n(){return this.mass};I.prototype.reset=function D(M,N){this.setPosition(M||[0,0,0]);this.setVelocity(N||[0,0,0])};I.prototype.applyForce=function k(M){if(M.isZero()){return}this.force.add(M).put(this.force);this.wake()};I.prototype.applyImpulse=function y(N){if(N.isZero()){return}var M=this.velocity;M.add(N.mult(this.inverseMass)).put(M)};I.prototype.integrateVelocity=function H(M){I.INTEGRATOR.integrateVelocity(this,M)};I.prototype.integratePosition=function s(M){I.INTEGRATOR.integratePosition(this,M)};I.prototype._integrate=function K(M){this.integrateVelocity(M);this.integratePosition(M)};I.prototype.getEnergy=function L(){return 0.5*this.mass*this.velocity.normSquared()};I.prototype.getTransform=function w(){this._engine.step();var M=this.position;var O=this.axis;var N=this.transform;if(O!==undefined){if(O&~I.AXES.X){M.x=0}if(O&~I.AXES.Y){M.y=0}if(O&~I.AXES.Z){M.z=0}}N[12]=M.x;N[13]=M.y;N[14]=M.z;return N};I.prototype.modify=function m(N){var M=this._spec;M.transform=this.getTransform();M.target=N;return M};function a(){this._eventOutput=new i();this._eventOutput.bindThis(this);i.setOutputHandler(this,this._eventOutput)}I.prototype.emit=function r(M,N){if(!this._eventOutput){return}this._eventOutput.emit(M,N)};I.prototype.on=function z(){a.call(this);return this.on.apply(this,arguments)};I.prototype.removeListener=function c(){a.call(this);return this.removeListener.apply(this,arguments)};I.prototype.pipe=function l(){a.call(this);return this.pipe.apply(this,arguments)};I.prototype.unpipe=function t(){a.call(this);return this.unpipe.apply(this,arguments)};e.exports=I});define("famous/physics/constraints/Constraint",["require","exports","module","famous/core/EventHandler"],function(d,g,b){var m=d("famous/core/EventHandler");function o(){this.options=this.options||{};this._energy=0;this._eventOutput=null}o.prototype.setOptions=function l(p){for(var q in p){this.options[q]=p[q]}};o.prototype.applyConstraint=function n(){};o.prototype.getEnergy=function e(){return this._energy};o.prototype.setEnergy=function j(p){this._energy=p};function f(){this._eventOutput=new m();this._eventOutput.bindThis(this);m.setOutputHandler(this,this._eventOutput)}o.prototype.on=function k(){f.call(this);return this.on.apply(this,arguments)};o.prototype.addListener=function a(){f.call(this);return this.addListener.apply(this,arguments)};o.prototype.pipe=function c(){f.call(this);return this.pipe.apply(this,arguments)};o.prototype.removeListener=function h(){return this.removeListener.apply(this,arguments)};o.prototype.unpipe=function i(){return this.unpipe.apply(this,arguments)};b.exports=o});define("famous/physics/constraints/Snap",["require","exports","module","./Constraint","famous/math/Vector"],function(d,f,b){var l=d("./Constraint");var h=d("famous/math/Vector");function j(m){this.options=Object.create(this.constructor.DEFAULT_OPTIONS);if(m){this.setOptions(m)}this.pDiff=new h();this.vDiff=new h();this.impulse1=new h();this.impulse2=new h();l.call(this)}j.prototype=Object.create(l.prototype);j.prototype.constructor=j;j.DEFAULT_OPTIONS={period:300,dampingRatio:0.1,length:0,anchor:undefined};var g=Math.PI;function a(o,m,n){return Math.abs(o.dot(m)/n)}j.prototype.setOptions=function i(m){if(m.anchor!==undefined){if(m.anchor instanceof h){this.options.anchor=m.anchor}if(m.anchor.position instanceof h){this.options.anchor=m.anchor.position}if(m.anchor instanceof Array){this.options.anchor=new h(m.anchor)}}if(m.length!==undefined){this.options.length=m.length}if(m.dampingRatio!==undefined){this.options.dampingRatio=m.dampingRatio}if(m.period!==undefined){this.options.period=m.period}};j.prototype.setAnchor=function c(m){if(this.options.anchor!==undefined){this.options.anchor=new h()}this.options.anchor.set(m)};j.prototype.getEnergy=function e(q,p){var n=this.options;var o=n.length;var m=n.anchor||p.position;var s=Math.pow(2*g/n.period,2);var r=m.sub(q.position).norm()-o;return 0.5*s*r*r};j.prototype.applyConstraint=function k(K,z,x){var q=this.options;var G=this.pDiff;var w=this.vDiff;var J=this.impulse1;var F=this.impulse2;var r=q.length;var t=q.anchor||z.position;var E=q.period;var L=q.dampingRatio;for(var D=0;D<K.length;D++){var M=K[D];var n=M.position;var p=M.velocity;var m=M.mass;var v=M.inverseMass;G.set(n.sub(t));var y=G.norm()-r;var B;if(z){var u=z.inverseMass;var o=z.velocity;w.set(p.sub(o));B=1/(v+u)}else{w.set(p);B=m}var s;var I;if(this.options.period===0){s=0;I=1}else{var C=4*B*g*g/(E*E);var H=4*B*g*L/E;I=x*C/(H+x*C);s=1/(H+x*C)}var A=I/x*y;G.normalize(-A).sub(w).mult(x/(s+x/B)).put(J);M.applyImpulse(J);if(z){J.mult(-1).put(F);z.applyImpulse(F)}this.setEnergy(a(J,G,x))}};b.exports=j});define("famous/transitions/SnapTransition",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/constraints/Snap","famous/math/Vector"],function(k,A,c){var w=k("famous/physics/PhysicsEngine");var x=k("famous/physics/bodies/Particle");var n=k("famous/physics/constraints/Snap");var a=k("famous/math/Vector");function s(B){B=B||0;this.endState=new a(B);this.initState=new a();this._dimensions=1;this._restTolerance=1e-10;this._absRestTolerance=this._restTolerance;this._callback=undefined;this.PE=new w();this.particle=new x();this.spring=new n({anchor:this.endState});this.PE.addBody(this.particle);this.PE.attach(this.spring,this.particle)}s.SUPPORTS_MULTIPLE=3;s.DEFAULT_OPTIONS={period:100,dampingRatio:0.2,velocity:0};function e(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function f(){var B=this.endState.sub(this.initState).normSquared();this._absRestTolerance=(B===0)?this._restTolerance:this._restTolerance*B}function b(B){this.endState.set(B);f.call(this)}function h(){this.PE.wake()}function o(){this.PE.sleep()}function d(B){this.particle.position.set(B)}function p(B){this.particle.velocity.set(B)}function m(){return(this._dimensions===0)?this.particle.getPosition1D():this.particle.getPosition()}function i(){return(this._dimensions===0)?this.particle.getVelocity1D():this.particle.getVelocity()}function g(B){this._callback=B}function t(B){var C=s.DEFAULT_OPTIONS;if(B.period===undefined){B.period=C.period}if(B.dampingRatio===undefined){B.dampingRatio=C.dampingRatio}if(B.velocity===undefined){B.velocity=C.velocity}this.spring.setOptions({period:B.period,dampingRatio:B.dampingRatio});p.call(this,B.velocity)}function v(){if(this.PE.isSleeping()){if(this._callback){var B=this._callback;this._callback=undefined;B()}return}if(e.call(this)<this._absRestTolerance){d.call(this,this.endState);p.call(this,[0,0,0]);o.call(this)}}s.prototype.reset=function z(C,B){this._dimensions=(C instanceof Array)?C.length:0;this.initState.set(C);d.call(this,C);b.call(this,C);if(B){p.call(this,B)}g.call(this,undefined)};s.prototype.getVelocity=function j(){return i.call(this)};s.prototype.setVelocity=function r(B){this.call(this,p(B))};s.prototype.isActive=function u(){return !this.PE.isSleeping()};s.prototype.halt=function l(){this.set(this.get())};s.prototype.get=function y(){v.call(this);return m.call(this)};s.prototype.set=function q(C,B,D){if(!B){this.reset(C);if(D){D()}return}this._dimensions=(C instanceof Array)?C.length:0;h.call(this);t.call(this,B);b.call(this,C);g.call(this,D)};c.exports=s});define("famous/physics/forces/Force",["require","exports","module","famous/math/Vector","famous/core/EventHandler"],function(d,g,b){var i=d("famous/math/Vector");var n=d("famous/core/EventHandler");function o(q){this.force=new i(q);this._energy=0;this._eventOutput=null}o.prototype.setOptions=function m(q){for(var r in q){this.options[r]=q[r]}};o.prototype.applyForce=function p(q){q.applyForce(this.force)};o.prototype.getEnergy=function e(){return this._energy};o.prototype.setEnergy=function k(q){this._energy=q};function f(){this._eventOutput=new n();this._eventOutput.bindThis(this);n.setOutputHandler(this,this._eventOutput)}o.prototype.on=function l(){f.call(this);return this.on.apply(this,arguments)};o.prototype.addListener=function a(){f.call(this);return this.addListener.apply(this,arguments)};o.prototype.pipe=function c(){f.call(this);return this.pipe.apply(this,arguments)};o.prototype.removeListener=function h(){return this.removeListener.apply(this,arguments)};o.prototype.unpipe=function j(){return this.unpipe.apply(this,arguments)};b.exports=o});define("famous/physics/forces/Spring",["require","exports","module","./Force","famous/math/Vector"],function(f,i,d){var o=f("./Force");var k=f("famous/math/Vector");function c(q){this.options=Object.create(this.constructor.DEFAULT_OPTIONS);if(q){this.setOptions(q)}this.disp=new k(0,0,0);m.call(this);o.call(this)}c.prototype=Object.create(o.prototype);c.prototype.constructor=c;var j=Math.PI;c.FORCE_FUNCTIONS={FENE:function(u,t){var s=t*0.99;var q=Math.max(Math.min(u,s),-s);return q/(1-q*q/(t*t))},HOOK:function(q){return q}};c.DEFAULT_OPTIONS={period:300,dampingRatio:0.1,length:0,maxLength:Infinity,anchor:undefined,forceFunction:c.FORCE_FUNCTIONS.HOOK};function b(q){this.forceFunction=q}function g(){var q=this.options;q.stiffness=Math.pow(2*j/q.period,2)}function n(){var q=this.options;q.damping=4*j*q.dampingRatio/q.period}function a(r,q){return 0.5*r*q*q}function m(){b.call(this,this.options.forceFunction);g.call(this);n.call(this)}c.prototype.setOptions=function l(q){if(q.anchor!==undefined){if(q.anchor.position instanceof k){this.options.anchor=q.anchor.position}if(q.anchor instanceof k){this.options.anchor=q.anchor}if(q.anchor instanceof Array){this.options.anchor=new k(q.anchor)}}if(q.period!==undefined){this.options.period=q.period}if(q.dampingRatio!==undefined){this.options.dampingRatio=q.dampingRatio}if(q.length!==undefined){this.options.length=q.length}if(q.forceFunction!==undefined){this.options.forceFunction=q.forceFunction}if(q.maxLength!==undefined){this.options.maxLength=q.maxLength}m.call(this)};c.prototype.applyForce=function p(x,q){var s=this.force;var E=this.disp;var F=this.options;var A=F.stiffness;var u=F.damping;var r=F.length;var z=F.maxLength;var w=F.anchor||q.position;for(var v=0;v<x.length;v++){var y=x[v];var D=y.position;var C=y.velocity;w.sub(D).put(E);var B=E.norm()-r;if(B===0){return}var t=y.mass;A*=t;u*=t;E.normalize(A*this.forceFunction(B,z)).put(s);if(u){if(q){s.add(C.sub(q.velocity).mult(-u)).put(s)}else{s.add(C.mult(-u)).put(s)}}y.applyForce(s);if(q){q.applyForce(s.mult(-1))}this.setEnergy(a(A,B))}};c.prototype.getEnergy=function h(t){var r=this.options;var s=r.length;var q=r.anchor;var v=r.stiffness;var u=q.sub(t.position).norm()-s;return 0.5*v*u*u};c.prototype.setAnchor=function e(q){if(!this.options.anchor){this.options.anchor=new k()}this.options.anchor.set(q)};d.exports=c});define("famous/transitions/SpringTransition",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Spring","famous/math/Vector"],function(l,A,c){var w=l("famous/physics/PhysicsEngine");var x=l("famous/physics/bodies/Particle");var o=l("famous/physics/forces/Spring");var a=l("famous/math/Vector");function f(B){B=B||0;this.endState=new a(B);this.initState=new a();this._dimensions=undefined;this._restTolerance=1e-10;this._absRestTolerance=this._restTolerance;this._callback=undefined;this.PE=new w();this.spring=new o({anchor:this.endState});this.particle=new x();this.PE.addBody(this.particle);this.PE.attach(this.spring,this.particle)}f.SUPPORTS_MULTIPLE=3;f.DEFAULT_OPTIONS={period:300,dampingRatio:0.5,velocity:0};function e(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function d(B){this.particle.setPosition(B)}function q(B){this.particle.setVelocity(B)}function n(){return(this._dimensions===0)?this.particle.getPosition1D():this.particle.getPosition()}function j(){return(this._dimensions===0)?this.particle.getVelocity1D():this.particle.getVelocity()}function h(B){this._callback=B}function i(){this.PE.wake()}function p(){this.PE.sleep()}function v(){if(this.PE.isSleeping()){if(this._callback){var B=this._callback;this._callback=undefined;B()}return}if(e.call(this)<this._absRestTolerance){d.call(this,this.endState);q.call(this,[0,0,0]);p.call(this)}}function t(B){var C=f.DEFAULT_OPTIONS;if(B.period===undefined){B.period=C.period}if(B.dampingRatio===undefined){B.dampingRatio=C.dampingRatio}if(B.velocity===undefined){B.velocity=C.velocity}if(B.period<150){B.period=150;console.warn("The period of a SpringTransition is capped at 150 ms. Use a SnapTransition for faster transitions")}this.spring.setOptions({period:B.period,dampingRatio:B.dampingRatio});q.call(this,B.velocity)}function g(){var B=this.endState.sub(this.initState).normSquared();this._absRestTolerance=(B===0)?this._restTolerance:this._restTolerance*B}function b(B){this.endState.set(B);g.call(this)}f.prototype.reset=function z(C,B){this._dimensions=(C instanceof Array)?C.length:0;this.initState.set(C);d.call(this,C);b.call(this,C);if(B){q.call(this,B)}h.call(this,undefined)};f.prototype.getVelocity=function k(){return j.call(this)};f.prototype.setVelocity=function s(B){this.call(this,q(B))};f.prototype.isActive=function u(){return !this.PE.isSleeping()};f.prototype.halt=function m(){this.set(this.get())};f.prototype.get=function y(){v.call(this);return n.call(this)};f.prototype.set=function r(B,C,D){if(!C){this.reset(B);if(D){D()}return}this._dimensions=(B instanceof Array)?B.length:0;i.call(this);t.call(this,C);b.call(this,B);h.call(this,D)};c.exports=f});define("famous/physics/constraints/Wall",["require","exports","module","./Constraint","famous/math/Vector"],function(c,e,b){var l=c("./Constraint");var h=c("famous/math/Vector");function a(m){this.options=Object.create(a.DEFAULT_OPTIONS);if(m){this.setOptions(m)}this.diff=new h();this.impulse=new h();l.call(this)}a.prototype=Object.create(l.prototype);a.prototype.constructor=a;a.ON_CONTACT={REFLECT:0,SILENT:1};a.DEFAULT_OPTIONS={restitution:0.5,drift:0.5,slop:0,normal:[1,0,0],distance:0,onContact:a.ON_CONTACT.REFLECT};a.prototype.setOptions=function i(m){if(m.normal!==undefined){if(m.normal instanceof h){this.options.normal=m.normal.clone()}if(m.normal instanceof Array){this.options.normal=new h(m.normal)}}if(m.restitution!==undefined){this.options.restitution=m.restitution}if(m.drift!==undefined){this.options.drift=m.drift}if(m.slop!==undefined){this.options.slop=m.slop}if(m.distance!==undefined){this.options.distance=m.distance}if(m.onContact!==undefined){this.options.onContact=m.onContact}};function f(o,m){return m.dot(o)}function j(m){var q=this.options.normal;var o=this.options.distance;return m.dot(q)+o}function d(A,B,s){var r=A.position;var D=A.velocity;var u=A.mass;var t=this.options.normal;var x=this.options.onContact;var o=this.options.restitution;var q=this.impulse;var C=this.options.drift;var E=-this.options.slop;var w=0;if(this._eventOutput){var y={particle:A,wall:this,overlap:B,normal:t};this._eventOutput.emit("preCollision",y);this._eventOutput.emit("collision",y)}switch(x){case a.ON_CONTACT.REFLECT:var z=(B<E)?-((1+o)*t.dot(D)+C/s*(B-E))/(u*s+w):-((1+o)*t.dot(D))/(u*s+w);q.set(t.mult(s*z));A.applyImpulse(q);A.setPosition(r.add(t.mult(-B)));break}if(this._eventOutput){this._eventOutput.emit("postCollision",y)}}function g(t,m,o){var q=this.options.onContact;var r=t.position;var s=this.options.normal;if(q===a.ON_CONTACT.REFLECT){t.setPosition(r.add(s.mult(-m)))}}a.prototype.applyConstraint=function k(x,o,s){var t=this.options.normal;for(var u=0;u<x.length;u++){var w=x[u];var q=w.position;var A=w.velocity;var m=w.radius||0;var z=j.call(this,q.add(t.mult(-m)));var y=f.call(this,t,A);if(z<=0){if(y<0){d.call(this,w,z,s)}else{g.call(this,w,z,s)}}}};b.exports=a});define("famous/transitions/WallTransition",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Spring","famous/physics/constraints/Wall","famous/math/Vector"],function(l,B,c){var w=l("famous/physics/PhysicsEngine");var x=l("famous/physics/bodies/Particle");var o=l("famous/physics/forces/Spring");var d=l("famous/physics/constraints/Wall");var a=l("famous/math/Vector");function A(C){C=C||0;this.endState=new a(C);this.initState=new a();this.spring=new o({anchor:this.endState});this.wall=new d();this._restTolerance=1e-10;this._dimensions=1;this._absRestTolerance=this._restTolerance;this._callback=undefined;this.PE=new w();this.particle=new x();this.PE.addBody(this.particle);this.PE.attach([this.wall,this.spring],this.particle)}A.SUPPORTS_MULTIPLE=3;A.DEFAULT_OPTIONS={period:300,dampingRatio:0.5,velocity:0,resitution:0.5};function f(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function g(){var C=this.endState.sub(this.initState).normSquared();this._absRestTolerance=(C===0)?this._restTolerance:this._restTolerance*C}function i(){this.PE.wake()}function p(){this.PE.sleep()}function b(C){this.endState.set(C);var D=this.endState.sub(this.initState).norm();this.wall.setOptions({distance:this.endState.norm(),normal:(D===0)?this.particle.velocity.normalize(-1):this.endState.sub(this.initState).normalize(-1)});g.call(this)}function e(C){this.particle.position.set(C)}function q(C){this.particle.velocity.set(C)}function n(){return(this._dimensions===0)?this.particle.getPosition1D():this.particle.getPosition()}function j(){return(this._dimensions===0)?this.particle.getVelocity1D():this.particle.getVelocity()}function h(C){this._callback=C}function v(){if(this.PE.isSleeping()){if(this._callback){var C=this._callback;this._callback=undefined;C()}return}var D=f.call(this);if(D<this._absRestTolerance){p.call(this);e.call(this,this.endState);q.call(this,[0,0,0])}}function t(C){var D=A.DEFAULT_OPTIONS;if(C.period===undefined){C.period=D.period}if(C.dampingRatio===undefined){C.dampingRatio=D.dampingRatio}if(C.velocity===undefined){C.velocity=D.velocity}if(C.restitution===undefined){C.restitution=D.restitution}this.spring.setOptions({period:C.period,dampingRatio:C.dampingRatio});this.wall.setOptions({restitution:C.restitution});q.call(this,C.velocity)}A.prototype.reset=function z(D,C){this._dimensions=(D instanceof Array)?D.length:0;this.initState.set(D);e.call(this,D);if(C){q.call(this,C)}b.call(this,D);h.call(this,undefined)};A.prototype.getVelocity=function k(){return j.call(this)};A.prototype.setVelocity=function s(C){this.call(this,q(C))};A.prototype.isActive=function u(){return !this.PE.isSleeping()};A.prototype.halt=function m(){this.set(this.get())};A.prototype.get=function y(){v.call(this);return n.call(this)};A.prototype.set=function r(D,C,E){if(!C){this.reset(D);if(E){E()}return}this._dimensions=(D instanceof Array)?D.length:0;i.call(this);t.call(this,C);b.call(this,D);h.call(this,E)};c.exports=A});define("famous/surfaces/CanvasSurface",["require","exports","module","famous/core/Surface"],function(e,g,a){var i=e("famous/core/Surface");function c(k){if(k&&k.canvasSize){this._canvasSize=k.canvasSize}i.apply(this,arguments);if(!this._canvasSize){this._canvasSize=this.getSize()}this._backBuffer=document.createElement("canvas");if(this._canvasSize){this._backBuffer.width=this._canvasSize[0];this._backBuffer.height=this._canvasSize[1]}this._contextId=undefined}c.prototype=Object.create(i.prototype);c.prototype.constructor=c;c.prototype.elementType="canvas";c.prototype.elementClass="famous-surface";c.prototype.setContent=function d(){};c.prototype.deploy=function f(k){if(this._canvasSize){k.width=this._canvasSize[0];k.height=this._canvasSize[1]}if(this._contextId==="2d"){k.getContext(this._contextId).drawImage(this._backBuffer,0,0);this._backBuffer.width=0;this._backBuffer.height=0}};c.prototype.recall=function b(l){var k=this.getSize();this._backBuffer.width=l.width;this._backBuffer.height=l.height;if(this._contextId==="2d"){this._backBuffer.getContext(this._contextId).drawImage(l,0,0);l.width=0;l.height=0}};c.prototype.getContext=function j(k){this._contextId=k;return this._currTarget?this._currTarget.getContext(k):this._backBuffer.getContext(k)};c.prototype.setSize=function h(l,k){i.prototype.setSize.apply(this,arguments);if(k){this._canvasSize=[k[0],k[1]]}if(this._currTarget){this._currTarget.width=this._canvasSize[0];this._currTarget.height=this._canvasSize[1]}};a.exports=c});define("famous/surfaces/ContainerSurface",["require","exports","module","famous/core/Surface","famous/core/Context"],function(c,f,b){var h=c("famous/core/Surface");var i=c("famous/core/Context");function e(k){h.call(this,k);this._container=document.createElement("div");this._container.classList.add("famous-group");this._container.classList.add("famous-container-group");this._shouldRecalculateSize=false;this.context=new i(this._container);this.setContent(this._container)}e.prototype=Object.create(h.prototype);e.prototype.constructor=e;e.prototype.elementType="div";e.prototype.elementClass="famous-surface";e.prototype.add=function j(){return this.context.add.apply(this.context,arguments)};e.prototype.render=function a(){if(this._sizeDirty){this._shouldRecalculateSize=true}return h.prototype.render.apply(this,arguments)};e.prototype.deploy=function d(){this._shouldRecalculateSize=true;return h.prototype.deploy.apply(this,arguments)};e.prototype.commit=function g(p,n,m,l,o){var q=this._size?[this._size[0],this._size[1]]:null;var k=h.prototype.commit.apply(this,arguments);if(this._shouldRecalculateSize||(q&&(this._size[0]!==q[0]||this._size[1]!==q[1]))){this.context.setSize();this._shouldRecalculateSize=false}this.context.update();return k};b.exports=e});define("famous/surfaces/FormContainerSurface",["require","exports","module","./ContainerSurface"],function(b,a,c){var e=b("./ContainerSurface");function f(g){if(g){this._method=g.method||""}e.apply(this,arguments)}f.prototype=Object.create(e.prototype);f.prototype.constructor=f;f.prototype.elementType="form";f.prototype.deploy=function d(g){if(this._method){g.method=this._method}return e.prototype.deploy.apply(this,arguments)};c.exports=f});define("famous/surfaces/ImageSurface",["require","exports","module","famous/core/Surface"],function(b,a,e){var h=b("famous/core/Surface");function d(i){this._imageUrl=undefined;h.apply(this,arguments)}d.prototype=Object.create(h.prototype);d.prototype.constructor=d;d.prototype.elementType="img";d.prototype.elementClass="famous-surface";d.prototype.setContent=function g(i){this._imageUrl=i;this._contentDirty=true};d.prototype.deploy=function f(i){i.src=this._imageUrl||""};d.prototype.recall=function c(i){i.src=""};e.exports=d});define("famous/surfaces/InputSurface",["require","exports","module","famous/core/Surface"],function(f,j,b){var k=f("famous/core/Surface");function e(o){this._placeholder=o.placeholder||"";this._value=o.value||"";this._type=o.type||"text";this._name=o.name||"";k.apply(this,arguments);this.on("click",this.focus.bind(this));window.addEventListener("click",function(p){if(p.target!==this._currTarget){this.blur()}}.bind(this))}e.prototype=Object.create(k.prototype);e.prototype.constructor=e;e.prototype.elementType="input";e.prototype.elementClass="famous-surface";e.prototype.setPlaceholder=function l(o){this._placeholder=o;this._contentDirty=true;return this};e.prototype.focus=function n(){if(this._currTarget){this._currTarget.focus()}return this};e.prototype.blur=function d(){if(this._currTarget){this._currTarget.blur()}return this};e.prototype.setValue=function h(o){this._value=o;this._contentDirty=true;return this};e.prototype.setType=function c(o){this._type=o;this._contentDirty=true;return this};e.prototype.getValue=function i(){if(this._currTarget){return this._currTarget.value}else{return this._value}};e.prototype.setName=function m(o){this._name=o;this._contentDirty=true;return this};e.prototype.getName=function a(){return this._name};e.prototype.deploy=function g(o){if(this._placeholder!==""){o.placeholder=this._placeholder}o.value=this._value;o.type=this._type;o.name=this._name};b.exports=e});define("famous/surfaces/SubmitInputSurface",["require","exports","module","./InputSurface"],function(b,a,d){var c=b("./InputSurface");function f(g){c.apply(this,arguments);this._type="submit";if(g&&g.onClick){this.setOnClick(g.onClick)}}f.prototype=Object.create(c.prototype);f.prototype.constructor=f;f.prototype.setOnClick=function(g){this.onClick=g};f.prototype.deploy=function e(g){if(this.onclick){g.onClick=this.onClick}c.prototype.deploy.apply(this,arguments)};d.exports=f});define("famous/surfaces/TextareaSurface",["require","exports","module","famous/core/Surface"],function(d,h,b){var j=d("famous/core/Surface");function o(q){this._placeholder=q.placeholder||"";this._value=q.value||"";this._name=q.name||"";this._wrap=q.wrap||"";this._cols=q.cols||"";this._rows=q.rows||"";j.apply(this,arguments);this.on("click",this.focus.bind(this))}o.prototype=Object.create(j.prototype);o.prototype.constructor=o;o.prototype.elementType="textarea";o.prototype.elementClass="famous-surface";o.prototype.setPlaceholder=function k(q){this._placeholder=q;this._contentDirty=true;return this};o.prototype.focus=function p(){if(this._currTarget){this._currTarget.focus()}return this};o.prototype.blur=function c(){if(this._currTarget){this._currTarget.blur()}return this};o.prototype.setValue=function f(q){this._value=q;this._contentDirty=true;return this};o.prototype.getValue=function g(){if(this._currTarget){return this._currTarget.value}else{return this._value}};o.prototype.setName=function l(q){this._name=q;this._contentDirty=true;return this};o.prototype.getName=function a(){return this._name};o.prototype.setWrap=function m(q){this._wrap=q;this._contentDirty=true;return this};o.prototype.setColumns=function n(q){this._cols=q;this._contentDirty=true;return this};o.prototype.setRows=function i(q){this._rows=q;this._contentDirty=true;return this};o.prototype.deploy=function e(q){if(this._placeholder!==""){q.placeholder=this._placeholder}if(this._value!==""){q.value=this._value}if(this._name!==""){q.name=this._name}if(this._wrap!==""){q.wrap=this._wrap}if(this._cols!==""){q.cols=this._cols}if(this._rows!==""){q.rows=this._rows}};b.exports=o});define("famous/surfaces/VideoSurface",["require","exports","module","famous/core/Surface"],function(d,g,b){var h=d("famous/core/Surface");function e(j){this._videoUrl=undefined;this.options=Object.create(e.DEFAULT_OPTIONS);if(j){this.setOptions(j)}h.apply(this,arguments)}e.prototype=Object.create(h.prototype);e.prototype.constructor=e;e.DEFAULT_OPTIONS={autoplay:false};e.prototype.elementType="video";e.prototype.elementClass="famous-surface";e.prototype.setOptions=function i(j){for(var k in e.DEFAULT_OPTIONS){if(j[k]!==undefined){this.options[k]=j[k]}}};e.prototype.setContent=function c(j){this._videoUrl=j;this._contentDirty=true};e.prototype.deploy=function f(j){j.src=this._videoUrl;j.autoplay=this.options.autoplay};e.prototype.recall=function a(j){j.src=""};b.exports=e});define("famous/utilities/KeyCodes",["require","exports","module"],function(b,a,d){var c={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};d.exports=c});define("famous/utilities/Timer",["require","exports","module","famous/core/Engine"],function(d,h,c){var l=d("famous/core/Engine");var e="prerender";var f=(window.performance)?function(){return window.performance.now()}:function(){return Date.now()};function a(n){l.on(e,n);return n}function g(o,p){var n=f();var q=function(){var r=f();if(r-n>=p){o.apply(this,arguments);l.removeListener(e,q)}};return a(q)}function k(o,p){var n=f();var q=function(){var r=f();if(r-n>=p){o.apply(this,arguments);n=f()}};return a(q)}function b(n,o){if(o===undefined){return undefined}var p=function(){o--;if(o<=0){n.apply(this,arguments);i(p)}};return a(p)}function j(o,p){p=p||1;var n=p;var q=function(){p--;if(p<=0){o.apply(this,arguments);p=n}};return a(q)}function i(n){l.removeListener(e,n)}function m(q,t){var s;var o;var r;var n;var p;return function(){o=this;p=arguments;r=f();var u=function(){var v=f-r;if(v<t){s=g(u,t-v)}else{s=null;n=q.apply(o,p)}};i(s);s=g(u,t);return n}}c.exports={setTimeout:g,setInterval:k,debounce:m,after:b,every:j,clear:i}});define("famous/views/ContextualView",["require","exports","module","famous/core/Entity","famous/core/Transform","famous/core/EventHandler","famous/core/OptionsManager"],function(e,h,d){var f=e("famous/core/Entity");var g=e("famous/core/Transform");var l=e("famous/core/EventHandler");var c=e("famous/core/OptionsManager");function a(m){this.options=Object.create(this.constructor.DEFAULT_OPTIONS||a.DEFAULT_OPTIONS);this._optionsManager=new c(this.options);if(m){this.setOptions(m)}this._eventInput=new l();this._eventOutput=new l();l.setInputHandler(this,this._eventInput);l.setOutputHandler(this,this._eventOutput);this._id=f.register(this)}a.DEFAULT_OPTIONS={};a.prototype.setOptions=function j(m){return this._optionsManager.setOptions(m)};a.prototype.getOptions=function k(){return this._optionsManager.getOptions()};a.prototype.render=function b(){return this._id};a.prototype.commit=function i(m){};d.exports=a});define("famous/views/SequentialLayout",["require","exports","module","famous/core/OptionsManager","famous/core/Transform","famous/core/ViewSequence","famous/utilities/Utility"],function(d,f,c){var b=d("famous/core/OptionsManager");var e=d("famous/core/Transform");var m=d("famous/core/ViewSequence");var g=d("famous/utilities/Utility");function j(o){this._items=null;this._size=null;this._outputFunction=j.DEFAULT_OUTPUT_FUNCTION;this.options=Object.create(this.constructor.DEFAULT_OPTIONS);this.optionsManager=new b(this.options);this._itemsCache=[];this._outputCache={size:null,target:this._itemsCache};if(o){this.setOptions(o)}}j.DEFAULT_OPTIONS={direction:g.Direction.Y,itemSpacing:0,defaultItemSize:[50,50]};j.DEFAULT_OUTPUT_FUNCTION=function h(o,r,q){var p=(this.options.direction===g.Direction.X)?e.translate(r,0):e.translate(0,r);return{transform:p,target:o.render()}};j.prototype.getSize=function n(){if(!this._size){this.render()}return this._size};j.prototype.sequenceFrom=function l(o){if(o instanceof Array){o=new m(o)}this._items=o;return this};j.prototype.setOptions=function i(o){this.optionsManager.setOptions.apply(this.optionsManager,arguments);return this};j.prototype.setOutputFunction=function k(o){this._outputFunction=o;return this};j.prototype.render=function a(){var q=0;var t=0;var o=(this.options.direction===g.Direction.X)?0:1;var u=(this.options.direction===g.Direction.X)?1:0;var p=this._items;var x=this._itemsCache;var s=0;while(p){var w=p.get();if(!w){break}var v;if(w&&w.getSize){v=w.getSize()}if(!v){v=this.options.defaultItemSize}if(v[u]!==true){t=Math.max(t,v[u])}var r=this._outputFunction.call(this,w,q,s);x[s]=r;if(v[o]&&(v[o]!==true)){q+=v[o]+this.options.itemSpacing}p=p.getNext();s++}this._itemsCache.splice(s);if(!t){t=undefined}if(!this._size){this._size=[0,0]}this._size[o]=q-this.options.itemSpacing;this._size[u]=t;this._outputCache.size=this.getSize();return this._outputCache};c.exports=j});define("famous/views/Deck",["require","exports","module","famous/core/Transform","famous/core/OptionsManager","famous/transitions/Transitionable","famous/utilities/Utility","./SequentialLayout"],function(e,g,d){var f=e("famous/core/Transform");var c=e("famous/core/OptionsManager");var h=e("famous/transitions/Transitionable");var k=e("famous/utilities/Utility");var m=e("./SequentialLayout");function b(q){m.apply(this,arguments);this.state=new h(0);this._isOpen=false;this.setOutputFunction(function(s,x,t){var w=n.call(this);var v=(this.options.direction===k.Direction.X)?f.translate(w*x,0,0.001*(w-1)*x):f.translate(0,w*x,0.001*(w-1)*x);var r=s.render();if(this.options.stackRotation){var u=this.options.stackRotation*t*(1-w);r={transform:f.rotateZ(u),origin:[0.5,0.5],target:r}}return{transform:v,size:s.getSize(),target:r}})}b.prototype=Object.create(m.prototype);b.prototype.constructor=b;b.DEFAULT_OPTIONS=c.patch(m.DEFAULT_OPTIONS,{transition:{curve:"easeOutBounce",duration:500},stackRotation:0});b.prototype.getSize=function p(){var r=m.prototype.getSize.apply(this,arguments);var s=this._items?this._items.get().getSize():[0,0];if(!s){s=[0,0]}var t=n.call(this);var q=1-t;return[s[0]*q+r[0]*t,s[1]*q+r[1]*t]};function n(q){if(q){return this._isOpen?1:0}else{return this.state.get()}}function l(s,q,r){this.state.halt();this.state.set(s,q,r)}b.prototype.isOpen=function a(){return this._isOpen};b.prototype.open=function j(q){this._isOpen=true;l.call(this,1,this.options.transition,q)};b.prototype.close=function o(q){this._isOpen=false;l.call(this,0,this.options.transition,q)};b.prototype.toggle=function i(q){if(this._isOpen){this.close(q)}else{this.open(q)}};d.exports=b});define("famous/views/RenderController",["require","exports","module","famous/core/Modifier","famous/core/RenderNode","famous/core/Transform","famous/transitions/Transitionable","famous/core/View"],function(g,s,c){var a=g("famous/core/Modifier");var l=g("famous/core/RenderNode");var k=g("famous/core/Transform");var d=g("famous/transitions/Transitionable");var m=g("famous/core/View");function j(t){m.apply(this,arguments);this._showing=-1;this._outgoingRenderables=[];this._nextRenderable=null;this._renderables=[];this._nodes=[];this._modifiers=[];this._states=[];this.inTransformMap=j.DefaultMap.transform;this.inOpacityMap=j.DefaultMap.opacity;this.inOriginMap=j.DefaultMap.origin;this.outTransformMap=j.DefaultMap.transform;this.outOpacityMap=j.DefaultMap.opacity;this.outOriginMap=j.DefaultMap.origin;this._output=[]}j.prototype=Object.create(m.prototype);j.prototype.constructor=j;j.DEFAULT_OPTIONS={inTransition:true,outTransition:true,overlap:true};j.DefaultMap={transform:function(){return k.identity},opacity:function(t){return t},origin:null};function q(u,t){return u(t.get())}j.prototype.inTransformFrom=function n(t){if(t instanceof Function){this.inTransformMap=t}else{if(t&&t.get){this.inTransformMap=t.get.bind(t)}else{throw new Error("inTransformFrom takes only function or getter object")}}return this};j.prototype.inOpacityFrom=function p(t){if(t instanceof Function){this.inOpacityMap=t}else{if(t&&t.get){this.inOpacityMap=t.get.bind(t)}else{throw new Error("inOpacityFrom takes only function or getter object")}}return this};j.prototype.inOriginFrom=function e(t){if(t instanceof Function){this.inOriginMap=t}else{if(t&&t.get){this.inOriginMap=t.get.bind(t)}else{throw new Error("inOriginFrom takes only function or getter object")}}return this};j.prototype.outTransformFrom=function i(t){if(t instanceof Function){this.outTransformMap=t}else{if(t&&t.get){this.outTransformMap=t.get.bind(t)}else{throw new Error("inTransformFrom takes only function or getter object")}}return this};j.prototype.outOpacityFrom=function f(t){if(t instanceof Function){this.outOpacityMap=t}else{if(t&&t.get){this.outOpacityMap=t.get.bind(t)}else{throw new Error("inOpacityFrom takes only function or getter object")}}return this};j.prototype.outOriginFrom=function b(t){if(t instanceof Function){this.outOriginMap=t}else{if(t&&t.get){this.outOriginMap=t.get.bind(t)}else{throw new Error("inOriginFrom takes only function or getter object")}}return this};j.prototype.show=function o(w,y,A){if(!w){return this.hide(A)}if(y instanceof Function){A=y;y=null}if(this._showing>=0){if(this.options.overlap){this.hide()}else{if(this._nextRenderable){this._nextRenderable=w}else{this._nextRenderable=w;this.hide(function(){if(this._nextRenderable===w){this.show(this._nextRenderable,A)}this._nextRenderable=null})}return undefined}}var x=null;var u=this._renderables.indexOf(w);if(u>=0){this._showing=u;x=this._states[u];x.halt();var z=this._outgoingRenderables.indexOf(w);if(z>=0){this._outgoingRenderables.splice(z,1)}}else{x=new d(0);var t=new a({transform:this.inTransformMap?q.bind(this,this.inTransformMap,x):null,opacity:this.inOpacityMap?q.bind(this,this.inOpacityMap,x):null,origin:this.inOriginMap?q.bind(this,this.inOriginMap,x):null});var v=new l();v.add(t).add(w);this._showing=this._nodes.length;this._nodes.push(v);this._modifiers.push(t);this._states.push(x);this._renderables.push(w)}if(!y){y=this.options.inTransition}x.set(1,y,A)};j.prototype.hide=function h(y,z){if(this._showing<0){return}var u=this._showing;this._showing=-1;if(y instanceof Function){z=y;y=undefined}var w=this._nodes[u];var t=this._modifiers[u];var x=this._states[u];var v=this._renderables[u];t.transformFrom(this.outTransformMap?q.bind(this,this.outTransformMap,x):null);t.opacityFrom(this.outOpacityMap?q.bind(this,this.outOpacityMap,x):null);t.originFrom(this.outOriginMap?q.bind(this,this.outOriginMap,x):null);if(this._outgoingRenderables.indexOf(v)<0){this._outgoingRenderables.push(v)}if(!y){y=this.options.outTransition}x.halt();x.set(0,y,function(D,A,E,C){if(this._outgoingRenderables.indexOf(C)>=0){var B=this._nodes.indexOf(D);this._nodes.splice(B,1);this._modifiers.splice(B,1);this._states.splice(B,1);this._renderables.splice(B,1);this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(C),1);if(this._showing>=B){this._showing--}}if(z){z.call(this)}}.bind(this,w,t,x,v))};j.prototype.render=function r(){var t=this._output;if(t.length>this._nodes.length){t.splice(this._nodes.length)}for(var u=0;u<this._nodes.length;u++){t[u]=this._nodes[u].render()}return t};c.exports=j});define("famous/views/EdgeSwapper",["require","exports","module","famous/transitions/CachedMap","famous/core/Entity","famous/core/EventHandler","famous/core/Transform","./RenderController"],function(d,h,c){var f=d("famous/transitions/CachedMap");var e=d("famous/core/Entity");var m=d("famous/core/EventHandler");var g=d("famous/core/Transform");var a=d("./RenderController");function k(o){this._currentTarget=null;this._size=[undefined,undefined];this._controller=new a(o);this._controller.inTransformFrom(f.create(n.bind(this,0.0001)));this._controller.outTransformFrom(f.create(n.bind(this,-0.0001)));this._eventInput=new m();m.setInputHandler(this,this._eventInput);this._entityId=e.register(this);if(o){this.setOptions(o)}}function n(p,o){return g.translate(this._size[0]*(1-o),0,p*(1-o))}k.prototype.show=function l(o){if(this._currentTarget){this._eventInput.unpipe(this._currentTarget)}this._currentTarget=o;if(this._currentTarget&&this._currentTarget.trigger){this._eventInput.pipe(this._currentTarget)}this._controller.show.apply(this._controller,arguments)};k.prototype.setOptions=function j(o){this._controller.setOptions(o)};k.prototype.render=function b(){return this._entityId};k.prototype.commit=function i(o){this._size[0]=o.size[0];this._size[1]=o.size[1];return{transform:o.transform,opacity:o.opacity,origin:o.origin,size:o.size,target:this._controller.render()}};c.exports=k});define("famous/views/FlexibleLayout",["require","exports","module","famous/core/Entity","famous/core/Transform","famous/core/OptionsManager","famous/core/EventHandler","famous/transitions/Transitionable"],function(e,h,c){var f=e("famous/core/Entity");var g=e("famous/core/Transform");var b=e("famous/core/OptionsManager");var o=e("famous/core/EventHandler");var j=e("famous/transitions/Transitionable");function n(p){this.options=Object.create(n.DEFAULT_OPTIONS);this.optionsManager=new b(this.options);if(p){this.setOptions(p)}this.id=f.register(this);this._ratios=new j(this.options.ratios);this._nodes=[];this._cachedDirection=null;this._cachedTotalLength=false;this._cachedLengths=[];this._cachedTransforms=null;this._ratiosDirty=false;this._eventOutput=new o();o.setOutputHandler(this,this._eventOutput)}n.DIRECTION_X=0;n.DIRECTION_Y=1;n.DEFAULT_OPTIONS={direction:n.DIRECTION_X,transition:false,ratios:[]};function m(u,q,w){var x;var p=0;var y=q;var s=0;var v;var r;var t;this._cachedLengths=[];this._cachedTransforms=[];for(t=0;t<u.length;t++){v=u[t];r=this._nodes[t];if(typeof v!=="number"){y-=r.getSize()[w]||0}else{s+=v}}for(t=0;t<u.length;t++){r=this._nodes[t];v=u[t];q=(typeof v==="number")?y*v/s:r.getSize()[w];x=(w===n.DIRECTION_X)?g.translate(p,0,0):g.translate(0,p,0);this._cachedTransforms.push(x);this._cachedLengths.push(q);p+=q}}n.prototype.render=function a(){return this.id};n.prototype.setOptions=function k(p){this.optionsManager.setOptions(p)};n.prototype.sequenceFrom=function l(r){this._nodes=r;if(this._ratios.get().length===0){var q=[];for(var p=0;p<this._nodes.length;p++){q.push(1)}this.setRatios(q)}};n.prototype.setRatios=function d(p,q,s){if(q===undefined){q=this.options.transition}var r=this._ratios;if(r.get().length===0){q=undefined}if(r.isActive()){r.halt()}r.set(p,q,s);this._ratiosDirty=true};n.prototype.commit=function i(p){var s=p.size;var r=p.transform;var u=p.origin;var v=this._ratios.get();var w=this.options.direction;var q=s[w];var y;if(q!==this._cachedTotalLength||this._ratiosDirty||this._ratios.isActive()||w!==this._cachedDirection){m.call(this,v,q,w);if(q!==this._cachedTotalLength){this._cachedTotalLength=q}if(w!==this._cachedDirection){this._cachedDirection=w}if(this._ratiosDirty){this._ratiosDirty=false}}var x=[];for(var t=0;t<v.length;t++){y=[undefined,undefined];q=this._cachedLengths[t];y[w]=q;x.push({transform:this._cachedTransforms[t],size:y,target:this._nodes[t].render()})}if(s&&(u[0]!==0&&u[1]!==0)){r=g.moveThen([-s[0]*u[0],-s[1]*u[1],0],r)}return{transform:r,size:s,target:x}};c.exports=n});define("famous/views/Flipper",["require","exports","module","famous/core/Transform","famous/transitions/Transitionable","famous/core/RenderNode","famous/core/OptionsManager"],function(e,g,d){var f=e("famous/core/Transform");var h=e("famous/transitions/Transitionable");var j=e("famous/core/RenderNode");var c=e("famous/core/OptionsManager");function a(p){this.options=Object.create(a.DEFAULT_OPTIONS);this._optionsManager=new c(this.options);if(p){this.setOptions(p)}this.angle=new h(0);this.frontNode=undefined;this.backNode=undefined;this.flipped=false}a.DIRECTION_X=0;a.DIRECTION_Y=1;var k=1;a.DEFAULT_OPTIONS={transition:true,direction:a.DIRECTION_X};a.prototype.flip=function i(q,r){var p=this.flipped?0:Math.PI;this.setAngle(p,q,r);this.flipped=!this.flipped};a.prototype.setAngle=function n(q,p,r){if(p===undefined){p=this.options.transition}if(this.angle.isActive()){this.angle.halt()}this.angle.set(q,p,r)};a.prototype.setOptions=function l(p){return this._optionsManager.setOptions(p)};a.prototype.setFront=function m(p){this.frontNode=p};a.prototype.setBack=function o(p){this.backNode=p};a.prototype.render=function b(){var s=this.angle.get();var q;var r;if(this.options.direction===a.DIRECTION_X){q=f.rotateY(s);r=f.rotateY(s+Math.PI)}else{q=f.rotateX(s);r=f.rotateX(s+Math.PI)}var p=[];if(this.frontNode){p.push({transform:q,target:this.frontNode.render()})}if(this.backNode){p.push({transform:f.moveThen([0,0,k],r),target:this.backNode.render()})}return p};d.exports=a});define("famous/views/GridLayout",["require","exports","module","famous/core/Entity","famous/core/RenderNode","famous/core/Transform","famous/core/ViewSequence","famous/core/EventHandler","famous/core/Modifier","famous/core/OptionsManager","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(h,r,c){var q=h("famous/core/Entity");var m=h("famous/core/RenderNode");var l=h("famous/core/Transform");var k=h("famous/core/ViewSequence");var i=h("famous/core/EventHandler");var b=h("famous/core/Modifier");var j=h("famous/core/OptionsManager");var f=h("famous/transitions/Transitionable");var s=h("famous/transitions/TransitionableTransform");function d(u){this.options=Object.create(d.DEFAULT_OPTIONS);this.optionsManager=new j(this.options);if(u){this.setOptions(u)}this.id=q.register(this);this._modifiers=[];this._states=[];this._contextSizeCache=[0,0];this._dimensionsCache=[0,0];this._activeCount=0;this._eventOutput=new i();i.setOutputHandler(this,this._eventOutput)}function p(E,A,D){var x=[E[0],E[1]];x[0]-=this.options.gutterSize[0]*(A-1);x[1]-=this.options.gutterSize[1]*(D-1);var C=Math.round(x[1]/D);var B=Math.round(x[0]/A);var v=0;var w;var u=0;for(var z=0;z<D;z++){w=0;for(var y=0;y<A;y++){if(this._modifiers[u]===undefined){e.call(this,u,[B,C],[w,v,0],1)}else{a.call(this,u,[B,C],[w,v,0],1)}u++;w+=B+this.options.gutterSize[0]}v+=C+this.options.gutterSize[1]}this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]];this._contextSizeCache=[E[0],E[1]];this._activeCount=D*A;for(z=this._activeCount;z<this._modifiers.length;z++){a.call(this,z,[Math.round(B),Math.round(C)],[0,0],0)}this._eventOutput.emit("reflow")}function e(x,y,v,w){var z={transform:new s(l.translate.apply(null,v)),opacity:new f(w),size:new f(y)};var u=new b({transform:z.transform,opacity:z.opacity,size:z.size});this._states[x]=z;this._modifiers[x]=u}function a(x,C,w,y){var z=this._states[x];var u=z.size;var v=z.opacity;var B=z.transform;var A=this.options.transition;B.halt();v.halt();u.halt();B.setTranslate(w,A);u.set(C,A);v.set(y,A)}d.DEFAULT_OPTIONS={dimensions:[1,1],transition:false,gutterSize:[0,0]};d.prototype.render=function t(){return this.id};d.prototype.setOptions=function n(u){return this.optionsManager.setOptions(u)};d.prototype.sequenceFrom=function o(u){if(u instanceof Array){u=new k(u)}this.sequence=u};d.prototype.commit=function g(v){var w=v.transform;var z=v.opacity;var B=v.origin;var F=v.size;var A=this.options.dimensions[0];var E=this.options.dimensions[1];if(F[0]!==this._contextSizeCache[0]||F[1]!==this._contextSizeCache[1]||A!==this._dimensionsCache[0]||E!==this._dimensionsCache[1]){p.call(this,F,A,E)}var y=this.sequence;var D=[];var u=0;while(y&&(u<this._modifiers.length)){var C=y.get();var x=this._modifiers[u];if(u>=this._activeCount&&this._states[u].opacity.isActive()){this._modifiers.splice(u,1);this._states.splice(u,1)}if(C){D.push(x.modify({origin:B,target:C.render()}))}y=y.getNext();u++}if(F){w=l.moveThen([-F[0]*B[0],-F[1]*B[1],0],w)}return{transform:w,opacity:z,size:F,target:D}};c.exports=d});define("famous/views/HeaderFooterLayout",["require","exports","module","famous/core/Entity","famous/core/RenderNode","famous/core/Transform","famous/core/OptionsManager"],function(d,h,c){var f=d("famous/core/Entity");var j=d("famous/core/RenderNode");var g=d("famous/core/Transform");var b=d("famous/core/OptionsManager");function n(o){this.options=Object.create(n.DEFAULT_OPTIONS);this._optionsManager=new b(this.options);if(o){this.setOptions(o)}this._entityId=f.register(this);this.header=new j();this.footer=new j();this.content=new j()}n.DIRECTION_X=0;n.DIRECTION_Y=1;n.DEFAULT_OPTIONS={direction:n.DIRECTION_Y,headerSize:undefined,footerSize:undefined,defaultHeaderSize:0,defaultFooterSize:0};n.prototype.render=function a(){return this._entityId};n.prototype.setOptions=function k(o){return this._optionsManager.setOptions(o)};function m(p,q){var o=p.getSize();return o?o[this.options.direction]:q}function e(o){if(this.options.direction===n.DIRECTION_X){return g.translate(o,0,0)}else{return g.translate(0,o,0)}}function l(p,o){if(this.options.direction===n.DIRECTION_X){return[p,o[1]]}else{return[o[0],p]}}n.prototype.commit=function i(o){var q=o.transform;var u=o.origin;var w=o.size;var s=o.opacity;var t=(this.options.headerSize!==undefined)?this.options.headerSize:m.call(this,this.header,this.options.defaultHeaderSize);var r=(this.options.footerSize!==undefined)?this.options.footerSize:m.call(this,this.footer,this.options.defaultFooterSize);var p=w[this.options.direction]-t-r;if(w){q=g.moveThen([-w[0]*u[0],-w[1]*u[1],0],q)}var v=[{size:l.call(this,t,w),target:this.header.render()},{transform:e.call(this,t),size:l.call(this,p,w),target:this.content.render()},{transform:e.call(this,t+p),size:l.call(this,r,w),target:this.footer.render()}];return{transform:q,opacity:s,size:w,target:v}};c.exports=n});define("famous/views/Lightbox",["require","exports","module","famous/core/Transform","famous/core/Modifier","famous/core/RenderNode","famous/utilities/Utility","famous/core/OptionsManager","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(f,h,e){var g=f("famous/core/Transform");var o=f("famous/core/Modifier");var k=f("famous/core/RenderNode");var l=f("famous/utilities/Utility");var d=f("famous/core/OptionsManager");var i=f("famous/transitions/Transitionable");var c=f("famous/transitions/TransitionableTransform");function a(p){this.options=Object.create(a.DEFAULT_OPTIONS);this._optionsManager=new d(this.options);if(p){this.setOptions(p)}this._showing=false;this.nodes=[];this.transforms=[];this.states=[]}a.DEFAULT_OPTIONS={inTransform:g.scale(0.001,0.001,0.001),inOpacity:0,inOrigin:[0.5,0.5],outTransform:g.scale(0.001,0.001,0.001),outOpacity:0,outOrigin:[0.5,0.5],showTransform:g.identity,showOpacity:1,showOrigin:[0.5,0.5],inTransition:true,outTransition:true,overlap:false};a.prototype.setOptions=function m(p){return this._optionsManager.setOptions(p)};a.prototype.show=function n(s,t,v){if(!s){return this.hide(v)}if(t instanceof Function){v=t;t=undefined}if(this._showing){if(this.options.overlap){this.hide()}else{return this.hide(this.show.bind(this,s,t,v))}}this._showing=true;var u={transform:new c(this.options.inTransform),origin:new i(this.options.inOrigin),opacity:new i(this.options.inOpacity)};var p=new o({transform:u.transform,opacity:u.opacity,origin:u.origin});var r=new k();r.add(p).add(s);this.nodes.push(r);this.states.push(u);this.transforms.push(p);var q=v?l.after(3,v):undefined;if(!t){t=this.options.inTransition}u.transform.set(this.options.showTransform,t,q);u.opacity.set(this.options.showOpacity,t,q);u.origin.set(this.options.showOrigin,t,q)};a.prototype.hide=function j(s,u){if(!this._showing){return}this._showing=false;if(s instanceof Function){u=s;s=undefined}var r=this.nodes[this.nodes.length-1];var p=this.transforms[this.transforms.length-1];var t=this.states[this.states.length-1];var q=l.after(3,function(){this.nodes.splice(this.nodes.indexOf(r),1);this.states.splice(this.states.indexOf(t),1);this.transforms.splice(this.transforms.indexOf(p),1);if(u){u.call(this)}}.bind(this));if(!s){s=this.options.outTransition}t.transform.set(this.options.outTransform,s,q);t.opacity.set(this.options.outOpacity,s,q);t.origin.set(this.options.outOrigin,s,q)};a.prototype.render=function b(){var p=[];for(var q=0;q<this.nodes.length;q++){p.push(this.nodes[q].render())}return p};e.exports=a});define("famous/physics/forces/Drag",["require","exports","module","./Force"],function(e,c,f){var b=e("./Force");function a(h){this.options=Object.create(this.constructor.DEFAULT_OPTIONS);if(h){this.setOptions(h)}b.call(this)}a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.FORCE_FUNCTIONS={LINEAR:function(h){return h},QUADRATIC:function(h){return h.mult(h.norm())}};a.DEFAULT_OPTIONS={strength:0.01,forceFunction:a.FORCE_FUNCTIONS.LINEAR};a.prototype.applyForce=function g(h){var l=this.options.strength;var j=this.options.forceFunction;var k=this.force;for(var i=0;i<h.length;i++){var m=h[i];j(m.velocity).mult(-l).put(k);m.applyForce(k)}};a.prototype.setOptions=function d(h){for(var i in h){this.options[i]=h[i]}};f.exports=a});define("famous/views/Scroller",["require","exports","module","famous/core/Entity","famous/core/Group","famous/core/OptionsManager","famous/core/Transform","famous/utilities/Utility","famous/core/ViewSequence","famous/core/EventHandler"],function(g,w,b){var u=g("famous/core/Entity");var n=g("famous/core/Group");var j=g("famous/core/OptionsManager");var l=g("famous/core/Transform");var e=g("famous/utilities/Utility");var k=g("famous/core/ViewSequence");var h=g("famous/core/EventHandler");function r(y){this.options=Object.create(this.constructor.DEFAULT_OPTIONS);this._optionsManager=new j(this.options);if(y){this._optionsManager.setOptions(y)}this._node=null;this._position=0;this._positionOffset=0;this._positionGetter=null;this._outputFunction=null;this._masterOutputFunction=null;this.outputFrom();this._onEdge=0;this.group=new n();this.group.add({render:t.bind(this)});this._entityId=u.register(this);this._size=[undefined,undefined];this._contextSize=[undefined,undefined];this._eventInput=new h();this._eventOutput=new h();h.setInputHandler(this,this._eventInput);h.setOutputHandler(this,this._eventOutput)}r.DEFAULT_OPTIONS={direction:e.Direction.Y,margin:0,clipSize:undefined,groupScroll:false};function d(y){if(!y){y=this._contextSize}var z=(this.options.direction===e.Direction.X)?0:1;return(y[z]===undefined)?this._contextSize[z]:y[z]}function o(A,C,B){var z=A.getSize?A.getSize():this._contextSize;var y=this._outputFunction(C);B.push({transform:y,target:A.render()});return d.call(this,z)}function a(){if(this.options.clipSize){return this.options.clipSize}else{return d.call(this,this._contextSize)}}r.prototype.setOptions=function q(y){this._optionsManager.setOptions(y);if(this.options.groupScroll){this.group.pipe(this._eventOutput)}else{this.group.unpipe(this._eventOutput)}};r.prototype.onEdge=function x(){return this._onEdge};r.prototype.outputFrom=function p(y,z){if(!y){y=function(A){return(this.options.direction===e.Direction.X)?l.translate(A,0):l.translate(0,A)}.bind(this);if(!z){z=y}}this._outputFunction=y;this._masterOutputFunction=z?z:function(A){return l.inverse(y(-A))}};r.prototype.positionFrom=function m(y){if(y instanceof Function){this._positionGetter=y}else{if(y&&y.get){this._positionGetter=y.get.bind(y)}else{this._positionGetter=null;this._position=y}}if(this._positionGetter){this._position=this._positionGetter.call(this)}};r.prototype.sequenceFrom=function s(y){if(y instanceof Array){y=new k({array:y})}this._node=y;this._positionOffset=0};r.prototype.getSize=function c(y){return y?this._contextSize:this._size};r.prototype.render=function v(){if(!this._node){return null}if(this._positionGetter){this._position=this._positionGetter.call(this)}return this._entityId};r.prototype.commit=function f(D){var A=D.transform;var z=D.opacity;var y=D.origin;var C=D.size;if(!this.options.clipSize&&(C[0]!==this._contextSize[0]||C[1]!==this._contextSize[1])){this._onEdge=0;this._contextSize[0]=C[0];this._contextSize[1]=C[1];if(this.options.direction===e.Direction.X){this._size[0]=a.call(this);this._size[1]=undefined}else{this._size[0]=undefined;this._size[1]=a.call(this)}}var B=this._masterOutputFunction(-this._position);return{transform:l.multiply(A,B),size:C,opacity:z,origin:y,target:this.group.render()}};function i(){var z=d.call(this,this._node.getSize());var y=this._node&&this._node.getNext?this._node.getNext():null;while(y&&this._position+this._positionOffset>=z){this._positionOffset-=z;this._node=y;z=d.call(this,this._node.getSize());y=this._node&&this._node.getNext?this._node.getNext():null}var A=this._node&&this._node.getPrevious?this._node.getPrevious():null;while(A&&this._position+this._positionOffset<0){var B=d.call(this,A.getSize());this._positionOffset+=B;this._node=A;A=this._node&&this._node.getPrevious?this._node.getPrevious():null}}function t(){var F=null;var C=this._position;var G=[];this._onEdge=0;var A=-this._positionOffset;var E=a.call(this);var B=this._node;while(B&&A-C<E+this.options.margin){A+=o.call(this,B,A,G);B=B.getNext?B.getNext():null}var D=this._node;var z=d.call(this,D.getSize());if(A<E){while(D&&z<E){D=D.getPrevious();if(D){z+=d.call(this,D.getSize())}}D=this._node;while(D&&z<E){D=D.getNext();if(D){z+=d.call(this,D.getSize())}}}var y=(z!==undefined&&z<E)?z:E;if(!B&&A-C<=y){this._onEdge=1;this._eventOutput.emit("edgeHit",{position:A-y})}else{if(!this._node.getPrevious()&&C<=0){this._onEdge=-1;this._eventOutput.emit("edgeHit",{position:0})}}B=(this._node&&this._node.getPrevious)?this._node.getPrevious():null;A=-this._positionOffset;if(B){F=B.getSize?B.getSize():this._contextSize;A-=d.call(this,F)}while(B&&((A-C)>-(a.call(this)+this.options.margin))){o.call(this,B,A,G);B=B.getPrevious?B.getPrevious():null;if(B){F=B.getSize?B.getSize():this._contextSize;A-=d.call(this,F)}}i.call(this);return G}b.exports=r});define("famous/views/Scrollview",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Drag","famous/physics/forces/Spring","famous/core/EventHandler","famous/core/OptionsManager","famous/core/ViewSequence","famous/views/Scroller","famous/utilities/Utility","famous/inputs/GenericSync","famous/inputs/ScrollSync","famous/inputs/TouchSync"],function(f,G,d){var n=f("famous/physics/PhysicsEngine");var M=f("famous/physics/bodies/Particle");var O=f("famous/physics/forces/Drag");var I=f("famous/physics/forces/Spring");var g=f("famous/core/EventHandler");var m=f("famous/core/OptionsManager");var l=f("famous/core/ViewSequence");var J=f("famous/views/Scroller");var t=f("famous/utilities/Utility");var k=f("famous/inputs/GenericSync");var L=f("famous/inputs/ScrollSync");var y=f("famous/inputs/TouchSync");k.register({scroll:L,touch:y});function H(P){this.options=Object.create(H.DEFAULT_OPTIONS);this._optionsManager=new m(this.options);this._node=null;this._physicsEngine=new n();this._particle=new M();this._physicsEngine.addBody(this._particle);this.spring=new I({anchor:[0,0,0]});this.drag=new O({forceFunction:O.FORCE_FUNCTIONS.QUADRATIC});this.friction=new O({forceFunction:O.FORCE_FUNCTIONS.LINEAR});this.sync=new k(["scroll","touch"],{direction:this.options.direction});this._eventInput=new g();this._eventOutput=new g();this._eventInput.pipe(this.sync);this.sync.pipe(this._eventInput);g.setInputHandler(this,this._eventInput);g.setOutputHandler(this,this._eventOutput);this._touchCount=0;this._springState=0;this._onEdge=0;this._pageSpringPosition=0;this._edgeSpringPosition=0;this._touchVelocity=undefined;this._earlyEnd=false;this._needsPaginationCheck=false;this._scroller=new J();this._scroller.positionFrom(this.getPosition.bind(this));this.setOptions(P);u.call(this)}var s=0.5;H.DEFAULT_OPTIONS={direction:t.Direction.Y,rails:true,friction:0.001,drag:0.0001,edgeGrip:0.5,edgePeriod:300,edgeDamp:1,margin:1000,paginated:false,pagePeriod:500,pageDamp:0.8,pageStopSpeed:10,pageSwitchSpeed:0.5,speedLimit:10,groupScroll:false};var j={NONE:0,EDGE:1,PAGE:2};function e(P){this._touchCount=P.count;if(P.count===undefined){this._touchCount=1}a.call(this);this.setVelocity(0);this._touchVelocity=0;this._earlyEnd=false}function z(Q){var P=-Q.velocity;var R=-Q.delta;if(this._onEdge&&Q.slip){if((P<0&&this._onEdge<0)||(P>0&&this._onEdge>0)){if(!this._earlyEnd){x.call(this,Q);this._earlyEnd=true}}else{if(this._earlyEnd&&(Math.abs(P)>Math.abs(this.getVelocity()))){e.call(this,Q)}}}if(this._earlyEnd){return}this._touchVelocity=P;if(Q.slip){this.setVelocity(P)}else{this.setPosition(this.getPosition()+R)}}function x(Q){this._touchCount=Q.count||0;if(!this._touchCount){a.call(this);if(this._onEdge){F.call(this,this._edgeSpringPosition,j.EDGE)}N.call(this);var P=-Q.velocity;var R=this.options.speedLimit;if(Q.slip){R*=this.options.edgeGrip}if(P<-R){P=-R}else{if(P>R){P=R}}this.setVelocity(P);this._touchVelocity=undefined;this._needsPaginationCheck=true}}function u(){this._eventInput.bindThis(this);this._eventInput.on("start",e);this._eventInput.on("update",z);this._eventInput.on("end",x);this._scroller.on("edgeHit",function(P){this._edgeSpringPosition=P.position}.bind(this))}function N(){if(this._springState){this._physicsEngine.attach([this.spring],this._particle)}else{this._physicsEngine.attach([this.drag,this.friction],this._particle)}}function a(){this._springState=j.NONE;this._physicsEngine.detachAll()}function D(Q){var R=this.options.direction;var P=(Q.getSize()||this._scroller.getSize())[R];if(!P){P=this._scroller.getSize()[R]}return P}function w(P){if(!this._onEdge&&P){this.sync.setOptions({scale:this.options.edgeGrip});if(!this._touchCount&&this._springState!==j.EDGE){F.call(this,this._edgeSpringPosition,j.EDGE)}}else{if(this._onEdge&&!P){this.sync.setOptions({scale:1});if(this._springState&&Math.abs(this.getVelocity())<0.001){a.call(this);N.call(this)}}}this._onEdge=P}function q(){if(!this._needsPaginationCheck){return}if(this._touchCount){return}if(this._springState===j.EDGE){return}var S=this.getVelocity();if(Math.abs(S)>=this.options.pageStopSpeed){return}var Q=this.getPosition();var T=Math.abs(S)>this.options.pageSwitchSpeed;var P=D.call(this,this._node);var U=Q>0.5*P;var R=S>0;if((U&&!T)||(T&&R)){this.goToNextPage()}else{F.call(this,0,j.PAGE)}this._needsPaginationCheck=false}function F(P,R){var Q;if(R===j.EDGE){this._edgeSpringPosition=P;Q={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}}else{if(R===j.PAGE){this._pageSpringPosition=P;Q={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}}}this.spring.setOptions(Q);if(R&&!this._springState){a.call(this);this._springState=R;N.call(this)}this._springState=R}function E(){var S=this.getPosition();var R=D.call(this,this._node);var Q=this._node.getNext();while(S>R+s&&Q){p.call(this,-R);S-=R;this._scroller.sequenceFrom(Q);this._node=Q;Q=this._node.getNext();R=D.call(this,this._node)}var T=this._node.getPrevious();var P;while(S<-s&&T){P=D.call(this,T);this._scroller.sequenceFrom(T);this._node=T;p.call(this,P);S+=P;T=this._node.getPrevious()}}function p(P){this._edgeSpringPosition+=P;this._pageSpringPosition+=P;this.setPosition(this.getPosition()+P);if(this._springState===j.EDGE){this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]})}else{if(this._springState===j.PAGE){this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}}}H.prototype.outputFrom=function b(){return this._scroller.outputFrom.apply(this._scroller,arguments)};H.prototype.getPosition=function B(){return this._particle.getPosition1D()};H.prototype.setPosition=function K(P){this._particle.setPosition1D(P)};H.prototype.getVelocity=function c(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()};H.prototype.setVelocity=function o(P){this._particle.setVelocity1D(P)};H.prototype.setOptions=function r(P){if(P){if(P.direction!==undefined){if(P.direction==="x"){P.direction=t.Direction.X}else{if(P.direction==="y"){P.direction=t.Direction.Y}}}this._scroller.setOptions(P);this._optionsManager.setOptions(P)}this._scroller.setOptions(this.options);if(this.options.groupScroll){this._scroller.pipe(this._eventInput)}else{this._scroller.unpipe(this._eventInput)}this.drag.setOptions({strength:this.options.drag});this.friction.setOptions({strength:this.options.friction});this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp});this.sync.setOptions({rails:this.options.rails,direction:(this.options.direction===t.Direction.X)?k.DIRECTION_X:k.DIRECTION_Y})};H.prototype.goToPreviousPage=function v(){if(!this._node){return null}var Q=this._node.getPrevious();if(Q){var R=this.getPosition();var P=D.call(this,Q);this._scroller.sequenceFrom(Q);this._node=Q;var S=(R<s)?-P:0;F.call(this,S,j.PAGE);p.call(this,P)}this._eventOutput.emit("pageChange",{direction:-1});return Q};H.prototype.goToNextPage=function h(){if(!this._node){return null}var Q=this._node.getNext();if(Q){var T=this.getPosition();var S=D.call(this,this._node);var R=D.call(this,Q);this._scroller.sequenceFrom(Q);this._node=Q;var P=(T>S-s)?S+R:S;F.call(this,P,j.PAGE);p.call(this,-S)}this._eventOutput.emit("pageChange",{direction:1});return Q};H.prototype.sequenceFrom=function i(P){if(P instanceof Array){P=new l({array:P})}this._node=P;return this._scroller.sequenceFrom(P)};H.prototype.getSize=function C(){return this._scroller.getSize.apply(this._scroller,arguments)};H.prototype.render=function A(){if(!this._node){return null}E.call(this);w.call(this,this._scroller.onEdge());if(this.options.paginated){q.call(this)}return this._scroller.render()};d.exports=H});define("famous/views/ScrollContainer",["require","exports","module","famous/surfaces/ContainerSurface","famous/core/EventHandler","./Scrollview","famous/utilities/Utility","famous/core/OptionsManager"],function(f,h,e){var g=f("famous/surfaces/ContainerSurface");var l=f("famous/core/EventHandler");var a=f("./Scrollview");var i=f("famous/utilities/Utility");var c=f("famous/core/OptionsManager");function d(m){this.options=Object.create(d.DEFAULT_OPTIONS);this._optionsManager=new c(this.options);if(m){this.setOptions(m)}this.container=new g(this.options.container);this.scrollview=new a(this.options.scrollview);this.container.add(this.scrollview);l.setInputHandler(this,this.scrollview);l.setOutputHandler(this,this.scrollview);this.scrollview.subscribe(this.container)}d.DEFAULT_OPTIONS={container:{properties:{overflow:"hidden"}},scrollview:{direction:i.Direction.X}};d.prototype.setOptions=function j(m){return this._optionsManager.setOptions(m)};d.prototype.sequenceFrom=function k(){return this.scrollview.sequenceFrom.apply(this.scrollview,arguments)};d.prototype.render=function b(){return this.container.render.apply(this.container,arguments)};e.exports=d});define("famous/widgets/NavigationBar",["require","exports","module","famous/core/Scene","famous/core/Surface","famous/core/Transform","famous/core/View"],function(d,h,b){var e=d("famous/core/Scene");var i=d("famous/core/Surface");var g=d("famous/core/Transform");var a=d("famous/core/View");function f(j){a.apply(this,arguments);this.title=new i({classes:this.options.classes,content:this.options.content});this.back=new i({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.backContent});this.back.on("click",function(){this._eventOutput.emit("back",{})}.bind(this));this.more=new i({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.moreContent});this.more.on("click",function(){this._eventOutput.emit("more",{})}.bind(this));this.layout=new e({id:"master",size:this.options.size,target:[{transform:g.inFront,origin:[0,0.5],target:this.back},{origin:[0.5,0.5],target:this.title},{transform:g.inFront,origin:[1,0.5],target:this.more}]});this._add(this.layout);this._optionsManager.on("change",function(l){var k=l.id;var m=l.value;if(k==="size"){this.layout.id.master.setSize(m);this.title.setSize(m);this.back.setSize([m[1],m[1]]);this.more.setSize([m[1],m[1]])}else{if(k==="backClasses"){this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)})}else{if(k==="backContent"){this.back.setContent(this.options.backContent)}else{if(k==="classes"){this.title.setOptions({classes:this.options.classes});this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)});this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)})}else{if(k==="content"){this.setContent(this.options.content)}else{if(k==="moreClasses"){this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)})}else{if(k==="moreContent"){this.more.setContent(this.options.content)}}}}}}}}.bind(this))}f.prototype=Object.create(a.prototype);f.prototype.constructor=f;f.DEFAULT_OPTIONS={size:[undefined,50],backClasses:["back"],backContent:"&#x25c0;",classes:["navigation"],content:"",moreClasses:["more"],moreContent:"&#x271a;"};f.prototype.setContent=function c(j){return this.title.setContent(j)};b.exports=f});define("famous/widgets/Slider",["require","exports","module","famous/core/Surface","famous/surfaces/CanvasSurface","famous/core/Transform","famous/core/EventHandler","famous/math/Utilities","famous/core/OptionsManager","famous/inputs/MouseSync","famous/inputs/TouchSync","famous/inputs/GenericSync"],function(e,s,a){var l=e("famous/core/Surface");var d=e("famous/surfaces/CanvasSurface");var i=e("famous/core/Transform");var f=e("famous/core/EventHandler");var o=e("famous/math/Utilities");var g=e("famous/core/OptionsManager");var r=e("famous/inputs/MouseSync");var k=e("famous/inputs/TouchSync");var n=e("famous/inputs/GenericSync");n.register({mouse:r,touch:k});function j(t){this.options=Object.create(j.DEFAULT_OPTIONS);this.optionsManager=new g(this.options);if(t){this.setOptions(t)}this.indicator=new d({size:this.options.indicatorSize,classes:["slider-back"]});this.label=new l({size:this.options.labelSize,content:this.options.label,properties:{pointerEvents:"none"},classes:["slider-label"]});this.eventOutput=new f();this.eventInput=new f();f.setInputHandler(this,this.eventInput);f.setOutputHandler(this,this.eventOutput);var u=(this.options.range[1]-this.options.range[0])/this.options.indicatorSize[0];this.sync=new n(["mouse","touch"],{scale:u,direction:n.DIRECTION_X});this.indicator.pipe(this.sync);this.sync.pipe(this);this.eventInput.on("update",function(v){this.set(v.position)}.bind(this));this._drawPos=0;b.call(this)}j.DEFAULT_OPTIONS={size:[200,60],indicatorSize:[200,30],labelSize:[200,30],range:[0,1],precision:2,value:0,label:"",fillColor:"rgba(170, 170, 170, 1)"};function b(){this.label.setContent(this.options.label+'<span style="float: right">'+this.get().toFixed(this.options.precision)+"</span>")}j.prototype.setOptions=function m(t){return this.optionsManager.setOptions(t)};j.prototype.get=function p(){return this.options.value};j.prototype.set=function h(t){if(t===this.options.value){return}this.options.value=o.clamp(t,this.options.range);b.call(this);this.eventOutput.emit("change",{value:t})};j.prototype.getSize=function c(){return this.options.size};j.prototype.render=function q(){var u=this.options.range;var v=Math.floor(((this.get()-u[0])/(u[1]-u[0]))*this.options.indicatorSize[0]);if(v<this._drawPos){this.indicator.getContext("2d").clearRect(v,0,this._drawPos-v+1,this.options.indicatorSize[1])}else{if(v>this._drawPos){var t=this.indicator.getContext("2d");t.fillStyle=this.options.fillColor;t.fillRect(this._drawPos-1,0,v-this._drawPos+1,this.options.indicatorSize[1])}}this._drawPos=v;return{size:this.options.size,target:[{origin:[0,0],target:this.indicator.render()},{transform:i.translate(0,0,1),origin:[0,0],target:this.label.render()}]}};a.exports=j});define("famous/widgets/ToggleButton",["require","exports","module","famous/core/Surface","famous/core/EventHandler","famous/views/RenderController"],function(f,g,d){var h=f("famous/core/Surface");var l=f("famous/core/EventHandler");var a=f("famous/views/RenderController");function e(n){this.options={content:"",offClasses:["off"],onClasses:["on"],size:undefined,outTransition:{curve:"easeInOut",duration:300},inTransition:{curve:"easeInOut",duration:300},toggleMode:e.TOGGLE,crossfade:true};this._eventOutput=new l();l.setOutputHandler(this,this._eventOutput);this.offSurface=new h();this.offSurface.on("click",function(){if(this.options.toggleMode!==e.OFF){this.select()}}.bind(this));this.offSurface.pipe(this._eventOutput);this.onSurface=new h();this.onSurface.on("click",function(){if(this.options.toggleMode!==e.ON){this.deselect()}}.bind(this));this.onSurface.pipe(this._eventOutput);this.arbiter=new a({overlap:this.options.crossfade});this.deselect();if(n){this.setOptions(n)}}e.OFF=0;e.ON=1;e.TOGGLE=2;e.prototype.select=function k(){this.selected=true;this.arbiter.show(this.onSurface,this.options.inTransition);this._eventOutput.emit("select")};e.prototype.deselect=function j(){this.selected=false;this.arbiter.show(this.offSurface,this.options.outTransition);this._eventOutput.emit("deselect")};e.prototype.isSelected=function c(){return this.selected};e.prototype.setOptions=function i(n){if(n.content!==undefined){this.options.content=n.content;this.offSurface.setContent(this.options.content);this.onSurface.setContent(this.options.content)}if(n.offClasses){this.options.offClasses=n.offClasses;this.offSurface.setClasses(this.options.offClasses)}if(n.onClasses){this.options.onClasses=n.onClasses;this.onSurface.setClasses(this.options.onClasses)}if(n.size!==undefined){this.options.size=n.size;this.onSurface.setSize(this.options.size);this.offSurface.setSize(this.options.size)}if(n.toggleMode!==undefined){this.options.toggleMode=n.toggleMode}if(n.outTransition!==undefined){this.options.outTransition=n.outTransition}if(n.inTransition!==undefined){this.options.inTransition=n.inTransition}if(n.crossfade!==undefined){this.options.crossfade=n.crossfade;this.arbiter.setOptions({overlap:this.options.crossfade})}};e.prototype.getSize=function m(){return this.options.size};e.prototype.render=function b(){return this.arbiter.render()};d.exports=e});define("famous/widgets/TabBar",["require","exports","module","famous/utilities/Utility","famous/core/View","famous/views/GridLayout","./ToggleButton"],function(e,f,c){var h=e("famous/utilities/Utility");var a=e("famous/core/View");var i=e("famous/views/GridLayout");var d=e("./ToggleButton");function g(m){a.apply(this,arguments);this.layout=new i();this.buttons=[];this._buttonIds={};this._buttonCallbacks={};this.layout.sequenceFrom(this.buttons);this._add(this.layout);this._optionsManager.on("change",k.bind(this))}g.prototype=Object.create(a.prototype);g.prototype.constructor=g;g.DEFAULT_OPTIONS={sections:[],widget:d,size:[undefined,50],direction:h.Direction.X,buttons:{toggleMode:d.ON}};function k(p){var q=p.id;var o=p.value;if(q==="direction"){this.layout.setOptions({dimensions:l.call(this.buttons.length,this.options.direction)})}else{if(q==="buttons"){for(var m in this.buttons){this.buttons[m].setOptions(o)}}else{if(q==="sections"){for(var n in this.options.sections){this.defineSection(n,this.options.sections[n])}}}}}function l(m,n){if(n===h.Direction.X){return[m,1]}else{return[1,m]}}g.prototype.defineSection=function b(q,o){var n;var m=this._buttonIds[q];if(m===undefined){m=this.buttons.length;this._buttonIds[q]=m;var p=this.options.widget;n=new p();this.buttons[m]=n;this.layout.setOptions({dimensions:l(this.buttons.length,this.options.direction)})}else{n=this.buttons[m];n.unbind("select",this._buttonCallbacks[q])}if(this.options.buttons){n.setOptions(this.options.buttons)}n.setOptions(o);this._buttonCallbacks[q]=this.select.bind(this,q);n.on("select",this._buttonCallbacks[q])};g.prototype.select=function j(o){var n=this._buttonIds[o];if(this.buttons[n]&&this.buttons[n].isSelected()){this._eventOutput.emit("select",{id:o})}else{if(this.buttons[n]){this.buttons[n].select()}}for(var m=0;m<this.buttons.length;m++){if(m!==n){this.buttons[m].deselect()}}};c.exports=g});define("famous/physics/bodies/Body",["require","exports","module","./Particle","famous/core/Transform","famous/math/Vector","famous/math/Quaternion","famous/math/Matrix"],function(g,x,b){var s=g("./Particle");var j=g("famous/core/Transform");var a=g("famous/math/Vector");var h=g("famous/math/Quaternion");var m=g("famous/math/Matrix");function o(y){s.call(this,y);y=y||{};this.orientation=new h();this.angularVelocity=new a();this.angularMomentum=new a();this.torque=new a();if(y.orientation){this.orientation.set(y.orientation)}if(y.angularVelocity){this.angularVelocity.set(y.angularVelocity)}if(y.angularMomentum){this.angularMomentum.set(y.angularMomentum)}if(y.torque){this.torque.set(y.torque)}this.setMomentsOfInertia();this.angularVelocity.w=0;this.pWorld=new a()}o.DEFAULT_OPTIONS=s.DEFAULT_OPTIONS;o.DEFAULT_OPTIONS.orientation=[0,0,0,1];o.DEFAULT_OPTIONS.angularVelocity=[0,0,0];o.AXES=s.AXES;o.SLEEP_TOLERANCE=s.SLEEP_TOLERANCE;o.INTEGRATOR=s.INTEGRATOR;o.prototype=Object.create(s.prototype);o.prototype.constructor=o;o.prototype.isBody=true;o.prototype.setMass=function u(){s.prototype.setMass.apply(this,arguments);this.setMomentsOfInertia()};o.prototype.setMomentsOfInertia=function c(){this.inertia=new m();this.inverseInertia=new m()};o.prototype.updateAngularVelocity=function i(){this.angularVelocity.set(this.inverseInertia.vectorMultiply(this.angularMomentum))};o.prototype.toWorldCoordinates=function l(y){return this.pWorld.set(this.orientation.rotateVector(y))};o.prototype.getEnergy=function r(){return s.prototype.getEnergy.call(this)+0.5*this.inertia.vectorMultiply(this.angularVelocity).dot(this.angularVelocity)};o.prototype.reset=function w(B,z,A,y){s.prototype.reset.call(this,B,z);this.angularVelocity.clear();this.setOrientation(A||[1,0,0,0]);this.setAngularMomentum(y||[0,0,0])};o.prototype.setOrientation=function t(y){this.orientation.set(y)};o.prototype.setAngularVelocity=function k(y){this.wake();this.angularVelocity.set(y)};o.prototype.setAngularMomentum=function q(y){this.wake();this.angularMomentum.set(y)};o.prototype.applyForce=function e(z,y){s.prototype.applyForce.call(this,z);if(y!==undefined){this.applyTorque(y.cross(z))}};o.prototype.applyTorque=function v(y){this.wake();this.torque.set(this.torque.add(y))};o.prototype.getTransform=function p(){return j.thenMove(this.orientation.getTransform(),j.getTranslate(s.prototype.getTransform.call(this)))};o.prototype._integrate=function d(y){s.prototype._integrate.call(this,y);this.integrateAngularMomentum(y);this.updateAngularVelocity(y);this.integrateOrientation(y)};o.prototype.integrateAngularMomentum=function n(y){o.INTEGRATOR.integrateAngularMomentum(this,y)};o.prototype.integrateOrientation=function f(y){o.INTEGRATOR.integrateOrientation(this,y)};b.exports=o});define("famous/physics/bodies/Circle",["require","exports","module","./Body","famous/math/Matrix"],function(d,c,e){var h=d("./Body");var b=d("famous/math/Matrix");function f(i){i=i||{};this.setRadius(i.radius||0);h.call(this,i)}f.prototype=Object.create(h.prototype);f.prototype.constructor=f;f.prototype.setRadius=function a(i){this.radius=i;this.size=[2*this.radius,2*this.radius];this.setMomentsOfInertia()};f.prototype.setMomentsOfInertia=function g(){var i=this.mass;var j=this.radius;this.inertia=new b([[0.25*i*j*j,0,0],[0,0.25*i*j*j,0],[0,0,0.5*i*j*j]]);this.inverseInertia=new b([[4/(i*j*j),0,0],[0,4/(i*j*j),0],[0,0,2/(i*j*j)]])};e.exports=f});define("famous/physics/bodies/Rectangle",["require","exports","module","./Body","famous/math/Matrix"],function(c,b,e){var g=c("./Body");var a=c("famous/math/Matrix");function d(i){i=i||{};this.size=i.size||[0,0];g.call(this,i)}d.prototype=Object.create(g.prototype);d.prototype.constructor=d;d.prototype.setSize=function h(i){this.size=i;this.setMomentsOfInertia()};d.prototype.setMomentsOfInertia=function f(){var i=this.mass;var j=this.size[0];var k=this.size[1];this.inertia=new a([[i*k*k/12,0,0],[0,i*j*j/12,0],[0,0,i*(j*j+k*k)/12]]);this.inverseInertia=new a([[12/(i*k*k),0,0],[0,12/(i*j*j),0],[0,0,12/(i*(j*j+k*k))]])};e.exports=d});define("famous/physics/constraints/Collision",["require","exports","module","./Constraint","famous/math/Vector"],function(b,c,a){var i=b("./Constraint");var d=b("famous/math/Vector");function h(j){this.options=Object.create(h.DEFAULT_OPTIONS);if(j){this.setOptions(j)}this.normal=new d();this.pDiff=new d();this.vDiff=new d();this.impulse1=new d();this.impulse2=new d();i.call(this)}h.prototype=Object.create(i.prototype);h.prototype.constructor=h;h.DEFAULT_OPTIONS={restitution:0.5,drift:0.5,slop:0};function e(k,j){return k.velocity.dot(j.velocity)}h.prototype.setOptions=function f(j){for(var k in j){this.options[k]=j[k]}};h.prototype.applyConstraint=function g(K,C,z){if(C===undefined){return}var p=C.velocity;var m=C.position;var w=C.inverseMass;var G=C.radius;var q=this.options;var k=q.drift;var r=-q.slop;var t=q.restitution;var B=this.normal;var I=this.pDiff;var y=this.vDiff;var J=this.impulse1;var H=this.impulse2;for(var F=0;F<K.length;F++){var L=K[F];if(L===C){continue}var o=L.velocity;var l=L.position;var v=L.inverseMass;var E=L.radius;I.set(l.sub(m));y.set(o.sub(p));var A=I.norm();var j=A-(G+E);var D=1/(w+v);var s=0;if(j<0){B.set(I.normalize());if(this._eventOutput){var u={target:L,source:C,overlap:j,normal:B};this._eventOutput.emit("preCollision",u);this._eventOutput.emit("collision",u)}var x=(j<=r)?((1+t)*B.dot(y)+k/z*(j-r))/(s+z/D):((1+t)*B.dot(y))/(s+z/D);B.mult(z*x).put(J);J.mult(-1).put(H);C.applyImpulse(J);L.applyImpulse(H);if(this._eventOutput){this._eventOutput.emit("postCollision",u)}}}};a.exports=h});define("famous/physics/constraints/Curve",["require","exports","module","./Constraint","famous/math/Vector"],function(b,c,a){var i=b("./Constraint");var e=b("famous/math/Vector");function j(k){this.options=Object.create(j.DEFAULT_OPTIONS);if(k){this.setOptions(k)}this.J=new e();this.impulse=new e();i.call(this)}j.prototype=Object.create(i.prototype);j.prototype.constructor=j;var g=1e-7;var d=Math.PI;j.DEFAULT_OPTIONS={equation:function(k,m,l){return 0},plane:function(k,m,l){return l},period:0,dampingRatio:0};j.prototype.setOptions=function f(k){for(var l in k){this.options[l]=k[l]}};j.prototype.applyConstraint=function h(W,H,F){var n=this.options;var q=this.impulse;var t=this.J;var T=n.equation;var R=n.plane;var X=n.dampingRatio;var P=n.period;for(var N=0;N<W.length;N++){var B=W[N];var D=B.velocity;var G=B.position;var I=B.mass;var o;var V;if(P===0){o=0;V=1}else{var U=4*I*d*X/P;var M=4*I*d*d/(P*P);o=1/(U+F*M);V=F*M/(U+F*M)}var w=G.x;var s=G.y;var r=G.z;var L=T(w,s,r);var C=(T(w+g,G,G)-L)/g;var A=(T(w,s+g,G)-L)/g;var u=(T(w,s,G+g)-L)/g;var l=R(w,s,r);var S=(R(w+g,s,r)-l)/g;var Q=(R(w,s+g,r)-l)/g;var O=(R(w,s,r+g)-l)/g;t.setXYZ(C+S,A+Q,u+O);var K=V/F*(L+l);var E=-(t.dot(D)+K)/(o+F*t.normSquared()/I);q.set(t.mult(F*E));B.applyImpulse(q)}};a.exports=j});define("famous/physics/constraints/Distance",["require","exports","module","./Constraint","famous/math/Vector"],function(c,d,a){var k=c("./Constraint");var f=c("famous/math/Vector");function i(l){this.options=Object.create(this.constructor.DEFAULT_OPTIONS);if(l){this.setOptions(l)}this.impulse=new f();this.normal=new f();this.diffP=new f();this.diffV=new f();k.call(this)}i.prototype=Object.create(k.prototype);i.prototype.constructor=i;i.DEFAULT_OPTIONS={anchor:null,length:0,minLength:0,period:0,dampingRatio:0};var e=Math.PI;i.prototype.setOptions=function g(l){if(l.anchor){if(l.anchor.position instanceof f){this.options.anchor=l.anchor.position}if(l.anchor instanceof f){this.options.anchor=l.anchor}if(l.anchor instanceof Array){this.options.anchor=new f(l.anchor)}}if(l.length!==undefined){this.options.length=l.length}if(l.dampingRatio!==undefined){this.options.dampingRatio=l.dampingRatio}if(l.period!==undefined){this.options.period=l.period}if(l.minLength!==undefined){this.options.minLength=l.minLength}};function h(m,l){return l.mass*m.norm()}i.prototype.setAnchor=function b(l){if(!this.options.anchor){this.options.anchor=new f()}this.options.anchor.set(l)};i.prototype.applyConstraint=function j(M,C,y){var B=this.normal;var I=this.diffP;var A=this.diffV;var t=this.impulse;var q=this.options;var N=q.dampingRatio;var H=q.period;var L=q.minLength;var l;var u;if(C){var o=C.velocity;l=C.position;u=C.inverseMass}else{l=this.options.anchor;u=0}var r=this.options.length;for(var G=0;G<M.length;G++){var w=M[G];var p=w.velocity;var m=w.position;var v=w.inverseMass;I.set(m.sub(l));B.set(I.normalize());var z=I.norm()-r;if(Math.abs(z)<L){return}if(C){A.set(p.sub(o))}else{A.set(p)}var E=1/(v+u);var s;var K;if(H===0){s=0;K=1}else{var J=4*E*e*N/H;var F=4*E*e*e/(H*H);s=1/(J+y*F);K=y*F/(J+y*F)}var D=K/y*z;var x=-(B.dot(A)+D)/(s+y/E);t.set(B.mult(y*x));w.applyImpulse(t);if(C){C.applyImpulse(t.mult(-1))}}};a.exports=i});define("famous/physics/constraints/Surface",["require","exports","module","./Constraint","famous/math/Vector"],function(b,c,a){var j=b("./Constraint");var e=b("famous/math/Vector");function f(k){this.options=Object.create(f.DEFAULT_OPTIONS);if(k){this.setOptions(k)}this.J=new e();this.impulse=new e();j.call(this)}f.prototype=Object.create(j.prototype);f.prototype.constructor=f;f.DEFAULT_OPTIONS={equation:undefined,period:0,dampingRatio:0};var h=1e-7;var d=Math.PI;f.prototype.setOptions=function g(k){for(var l in k){this.options[l]=k[l]}};f.prototype.applyConstraint=function i(R,F,D){var o=this.impulse;var s=this.J;var l=this.options;var O=l.equation;var S=l.dampingRatio;var N=l.period;for(var M=0;M<R.length;M++){var L=R[M];var B=L.velocity;var E=L.position;var G=L.mass;var n;var P;if(N===0){n=0;P=1}else{var Q=4*G*d*S/N;var K=4*G*d*d/(N*N);n=1/(Q+D*K);P=D*K/(Q+D*K)}var u=E.x;var r=E.y;var q=E.z;var I=O(u,r,q);var A=(O(u+h,E,E)-I)/h;var w=(O(u,r+h,E)-I)/h;var t=(O(u,r,E+h)-I)/h;s.setXYZ(A,w,t);var H=P/D*I;var C=-(s.dot(B)+H)/(n+D*s.normSquared()/G);o.set(s.mult(D*C));L.applyImpulse(o)}};a.exports=f});define("famous/physics/constraints/Walls",["require","exports","module","./Constraint","./Wall","famous/math/Vector"],function(h,r,d){var i=h("./Constraint");var e=h("./Wall");var a=h("famous/math/Vector");function f(s){this.options=Object.create(f.DEFAULT_OPTIONS);if(s){this.setOptions(s)}c.call(this,s.sides||this.options.sides);i.call(this)}f.prototype=Object.create(i.prototype);f.prototype.constructor=f;f.ON_CONTACT=e.ON_CONTACT;f.SIDES={LEFT:0,RIGHT:1,TOP:2,BOTTOM:3,FRONT:4,BACK:5,TWO_DIMENSIONAL:[0,1,2,3],THREE_DIMENSIONAL:[0,1,2,3,4,5]};f.DEFAULT_OPTIONS={sides:f.SIDES.TWO_DIMENSIONAL,size:[window.innerWidth,window.innerHeight,0],origin:[0.5,0.5,0.5],drift:0.5,slop:0,restitution:0.5,onContact:f.ON_CONTACT.REFLECT};var n={0:new a(1,0,0),1:new a(-1,0,0),2:new a(0,1,0),3:new a(0,-1,0),4:new a(0,0,1),5:new a(0,0,-1)};function m(u,t,s){var w;var v=f.SIDES;switch(parseInt(u)){case v.LEFT:w=t[0]*s[0];break;case v.TOP:w=t[1]*s[1];break;case v.FRONT:w=t[2]*s[2];break;case v.RIGHT:w=t[0]*(1-s[0]);break;case v.BOTTOM:w=t[1]*(1-s[1]);break;case v.BACK:w=t[2]*(1-s[2]);break}return w}f.prototype.setOptions=function p(t){var s=false;if(t.restitution!==undefined){b.call(this,{restitution:t.restitution})}if(t.drift!==undefined){b.call(this,{drift:t.drift})}if(t.slop!==undefined){b.call(this,{slop:t.slop})}if(t.onContact!==undefined){b.call(this,{onContact:t.onContact})}if(t.size!==undefined){s=true}if(t.sides!==undefined){this.options.sides=t.sides}if(t.origin!==undefined){s=true}if(s){this.setSize(t.size,t.origin)}};function c(v){this.components={};var u=this.components;for(var t=0;t<v.length;t++){var s=v[t];u[t]=new e({normal:n[s].clone(),distance:m(s,this.options.size,this.options.origin)})}}f.prototype.setSize=function q(t,s){s=s||this.options.origin;if(s.length<3){s[2]=0.5}this.forEach(function(u,v){var w=m(v,t,s);u.setOptions({distance:w})});this.options.size=t;this.options.origin=s};function b(s){this.forEach(function(u){u.setOptions(s)});for(var t in s){this.options[t]=s[t]}}f.prototype.applyConstraint=function g(s,u,t){this.forEach(function(v){v.applyConstraint(s,u,t)})};f.prototype.forEach=function o(t){for(var s in this.sides){t(this.sides[s],s)}};f.prototype.rotateZ=function j(s){this.forEach(function(t){var u=t.options.normal;u.rotateZ(s).put(u)})};f.prototype.rotateX=function l(s){this.forEach(function(t){var u=t.options.normal;u.rotateX(s).put(u)})};f.prototype.rotateY=function k(s){this.forEach(function(t){var u=t.options.normal;u.rotateY(s).put(u)})};d.exports=f});define("famous/physics/forces/Repulsion",["require","exports","module","./Force","famous/math/Vector"],function(f,d,g){var c=f("./Force");var a=f("famous/math/Vector");function b(i){this.options=Object.create(b.DEFAULT_OPTIONS);if(i){this.setOptions(i)}this.disp=new a();c.call(this)}b.prototype=Object.create(c.prototype);b.prototype.constructor=b;b.DECAY_FUNCTIONS={LINEAR:function(j,i){return Math.max(1-(1/i)*j,0)},MORSE:function(k,i){var j=(i===0)?100:i;var l=k+j*(1-Math.log(2));return Math.max(1-Math.pow(1-Math.exp(l/j-1),2),0)},INVERSE:function(j,i){return 1/(1-i+j)},GRAVITY:function(j,i){return 1/(1-i+j*j)}};b.DEFAULT_OPTIONS={strength:1,anchor:undefined,range:[0,Infinity],cutoff:0,cap:Infinity,decayFunction:b.DECAY_FUNCTIONS.GRAVITY};b.prototype.setOptions=function e(i){if(i.anchor!==undefined){if(i.anchor.position instanceof a){this.options.anchor=i.anchor.position}if(i.anchor instanceof Array){this.options.anchor=new a(i.anchor)}delete i.anchor}for(var j in i){this.options[j]=i[j]}};b.prototype.applyForce=function h(t,k){var z=this.options;var l=this.force;var v=this.disp;var n=z.strength;var p=z.anchor||k.position;var x=z.cap;var m=z.cutoff;var u=z.range[0];var j=z.range[1];var o=z.decayFunction;if(n===0){return}for(var s in t){var q=t[s];if(q===k){continue}var y=q.mass;var w=q.position;v.set(w.sub(p));var i=v.norm();if(i<j&&i>u){l.set(v.normalize(n*y*o(i,m)).cap(x));q.applyForce(l)}}};g.exports=b});define("famous/physics/forces/RotationalDrag",["require","exports","module","./Drag"],function(e,c,f){var b=e("./Drag");function a(h){b.call(this,h)}a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.DEFAULT_OPTIONS=b.DEFAULT_OPTIONS;a.FORCE_FUNCTIONS=b.FORCE_FUNCTIONS;a.FORCE_FUNCTIONS={LINEAR:function(h){return h},QUADRATIC:function(h){return h.mult(h.norm())}};a.prototype.applyForce=function g(h){var l=this.options.strength;var j=this.options.forceFunction;var k=this.force;for(var i=0;i<h.length;i++){var m=h[i];j(m.angularVelocity).mult(-100*l).put(k);m.applyTorque(k)}};a.prototype.setOptions=function d(h){for(var i in h){this.options[i]=h[i]}};f.exports=a});define("famous/physics/forces/RotationalSpring",["require","exports","module","./Spring"],function(d,c,e){var b=d("./Spring");function a(h){b.call(this,h)}a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.DEFAULT_OPTIONS=b.DEFAULT_OPTIONS;a.FORCE_FUNCTIONS=b.FORCE_FUNCTIONS;a.prototype.applyForce=function g(p){var j=this.force;var u=this.options;var t=this.disp;var r=u.stiffness;var l=u.damping;var h=u.length;var o=u.anchor;for(var n=0;n<p.length;n++){var q=p[n];t.set(o.sub(q.orientation));var s=t.norm()-h;if(s===0){return}var k=q.mass;r*=k;l*=k;j.set(t.normalize(r*this.forceFunction(s,this.options.lMax)));if(l){j.set(j.add(q.angularVelocity.mult(-l)))}q.applyTorque(j)}};a.prototype.getEnergy=function f(k){var i=this.options;var j=i.length;var h=i.anchor;var m=i.stiffness;var l=h.sub(k.orientation).norm()-j;return 0.5*m*l*l};e.exports=a});define("famous/physics/forces/VectorField",["require","exports","module","./Force","famous/math/Vector"],function(d,e,a){var i=d("./Force");var f=d("famous/math/Vector");function h(k){this.options=Object.create(h.DEFAULT_OPTIONS);if(k){this.setOptions(k)}b.call(this,this.options.field);i.call(this);this.evaluation=new f(0,0,0)}h.prototype=Object.create(i.prototype);h.prototype.constructor=h;h.FIELDS={CONSTANT:function(k,l){return k.set(l.direction)},LINEAR:function(k){return k},RADIAL:function(k){return k.set(k.mult(-1,k))},SPHERE_ATTRACTOR:function(k,l){return k.set(k.mult((l.radius-k.norm())/k.norm()))},POINT_ATTRACTOR:function(k,l){return k.set(l.position.sub(k))}};h.DEFAULT_OPTIONS={strength:1,field:h.FIELDS.CONSTANT};h.prototype.setOptions=function g(k){for(var l in k){this.options[l]=k[l]}};function b(l){var k=h.FIELDS;switch(l){case k.CONSTANT:if(!this.options.direction){this.options.direction=new f(0,1,0)}break;case k.POINT_ATTRACTOR:if(!this.options.position){this.options.position=new f(0,0,0)}break;case k.SPHERE_ATTRACTOR:if(!this.options.radius){this.options.radius=1}break}}function c(k){var l=this.evaluation;var m=this.options.field;l.set(k);return m(l,this.options)}h.prototype.applyForce=function j(k){var m=this.force;for(var l=0;l<k.length;l++){var n=k[l];m.set(c.call(this,n.position).mult(n.mass*this.options.strength));n.applyForce(m)}};a.exports=h});(function(){function a(b){var c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",b);document.getElementsByTagName("head")[0].appendChild(c)}a("http://code.famo.us/famous/0.2/famous.css");window.addEventListener("load",function(){console.log("----------- start -----------");require(["main"])})})();